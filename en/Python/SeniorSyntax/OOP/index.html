<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content=张杨的个人网站 name=description><meta content=yangzhang name=author><link href=https://yangzhang.site/en/Python/SeniorSyntax/OOP/ rel=canonical><link href=../../../../assets/images/favicon.png rel=icon><meta content="mkdocs-1.5.3, mkdocs-material-8.5.10" name=generator><title>面向对象编程 - yangzhang's Site</title><link href=../../../../assets/stylesheets/main.975780f9.min.css rel=stylesheet><link href=../../../../assets/stylesheets/palette.2505c338.min.css rel=stylesheet><!-- 数学公式格式支持，用html嵌入的方式支持数学公式自动换行，mathjax似乎要支持但是现在还没实现。
Automatic line breaking has not yet been implemented in MathJax version 3, 
but is high on our list for inclusion in a future release. --><script src=../../../../assets/javascripts/math.js></script><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href=../../../../assets/stylesheets/extra.css rel=stylesheet><link href=../../../../assets/stylesheets/termynal.css rel=stylesheet><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-8R9VRSN3S0"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-8R9VRSN3S0",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-8R9VRSN3S0",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script><link href=../../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src=../../../../assets/javascripts/glightbox.min.js></script></head> <body data-md-color-accent=orange data-md-color-primary=deep-purple data-md-color-scheme=sun dir=ltr> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#_1> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <!-- Add announcement here, including arbitrary HTML --> Latest Update(๑•ᴗ•๑)♡ : <a href=/Python/SeniorSyntax/OOP/ >面向对象编程</a> </div> </aside> </div> <header class=md-header data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label="yangzhang's Site" class="md-header__button md-logo" data-md-component=logo href=../../../.. title="yangzhang's Site"> <img alt=logo src=../../../../assets/images/summation.png> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> yangzhang's Site </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 面向对象编程 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input aria-hidden=true class=md-option data-md-color-accent=orange data-md-color-media data-md-color-primary=deep-purple data-md-color-scheme=sun id=__palette_1 name=__palette type=radio> <input aria-hidden=true class=md-option data-md-color-accent=orange data-md-color-media data-md-color-primary=grey data-md-color-scheme=mon id=__palette_2 name=__palette type=radio> <input aria-hidden=true class=md-option data-md-color-accent=orange data-md-color-media data-md-color-primary=blue-grey data-md-color-scheme=tues id=__palette_3 name=__palette type=radio> <input aria-hidden=true class=md-option data-md-color-accent=orange data-md-color-media data-md-color-primary=teal data-md-color-scheme=wed id=__palette_4 name=__palette type=radio> <input aria-hidden=true class=md-option data-md-color-accent=orange data-md-color-media data-md-color-primary=indigo data-md-color-scheme=thur id=__palette_5 name=__palette type=radio> <input aria-hidden=true class=md-option data-md-color-accent=orange data-md-color-media data-md-color-primary=pink data-md-color-scheme=fri id=__palette_6 name=__palette type=radio> <input aria-hidden=true class=md-option data-md-color-accent=orange data-md-color-media data-md-color-primary=deep-purple data-md-color-scheme=sat id=__palette_7 name=__palette type=radio> </form> <div class=md-header__option> <div class=md-select> <button aria-label="Select language" class="md-header__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"></path></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a class=md-select__link href=../../../../Python/SeniorSyntax/OOP/ hreflang=zh> 简体中文 </a> </li> <li class=md-select__item> <a class=md-select__link href=./ hreflang=en> English </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 title=Clear type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a class=md-source data-md-component=source href=https://github.com/AIboy996/AIboy996.github.io title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </div> <div class=md-source__repository> AIboy996.github.io </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav aria-label=Tabs class=md-tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../About/ class=md-tabs__link> About </a> </li> <li class=md-tabs__item> <a href=../../../Note/ class=md-tabs__link> Note </a> </li> <li class=md-tabs__item> <a href=../../../Blog/ class=md-tabs__link> Blog </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> Python </a> </li> <li class=md-tabs__item> <a href=../../../Project/ class=md-tabs__link> Project </a> </li> <li class=md-tabs__item> <a href=../../../Statistics/ class=md-tabs__link> Statistics </a> </li> <li class=md-tabs__item> <a href=../../../SomeMath/ class=md-tabs__link> SomeMath </a> </li> <li class=md-tabs__item> <a href=../../../Tags/ class=md-tabs__link> Tags </a> </li> <li class=md-tabs__item> <a href=../../../Playground/ class=md-tabs__link> Playground </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary md-nav--lifted" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="yangzhang's Site" class="md-nav__button md-logo" data-md-component=logo href=../../../.. title="yangzhang's Site"> <img alt=logo src=../../../../assets/images/summation.png> </a> yangzhang's Site </label> <div class=md-nav__source> <a class=md-source data-md-component=source href=https://github.com/AIboy996/AIboy996.github.io title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </div> <div class=md-source__repository> AIboy996.github.io </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 id=__nav_1 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../../About/ >About</a> <label for=__nav_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-label=About class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../About/about/ class=md-nav__link> 关于本站和我的一切 </a> </li> <li class=md-nav__item> <a href=../../../About/devices/ class=md-nav__link> 我的电子设备们 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../About/resume.html> Resume </a> </li> <li class=md-nav__item> <a href=../../../About/hobby/ class=md-nav__link> 兴趣点 </a> </li> <li class=md-nav__item> <a href=../../../About/links/ class=md-nav__link> Links </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 id=__nav_2 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../../Note/ >Note</a> <label for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-label=Note class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Note </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/software/ class=md-nav__link> 我用的软件 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 id=__nav_2_3 type=checkbox> <label class=md-nav__link for=__nav_2_3> Docker <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Docker class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Docker/docker_intro/ class=md-nav__link> Docker简介 </a> </li> <li class=md-nav__item> <a href=../../../Note/Docker/docker_basic/ class=md-nav__link> Docker基础 </a> </li> <li class=md-nav__item> <a href=../../../Note/Docker/docker_senior/ class=md-nav__link> Docker进阶 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 id=__nav_2_4 type=checkbox> <label class=md-nav__link for=__nav_2_4> Git <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Git class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Git </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Git/git/ class=md-nav__link> 单机git </a> </li> <li class=md-nav__item> <a href=../../../Note/Git/git_server/ class=md-nav__link> 协作git </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 id=__nav_2_5 type=checkbox> <label class=md-nav__link for=__nav_2_5> 墙和梯子 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=墙和梯子 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> 墙和梯子 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/GFW/intro/ class=md-nav__link> 关于墙和梯子的基础知识 </a> </li> <li class=md-nav__item> <a href=../../../Note/GFW/client/ class=md-nav__link> 梯子客户端评测 </a> </li> <li class=md-nav__item> <a href=../../../Note/GFW/server/ class=md-nav__link> 搭建一个VPN服务器 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6 id=__nav_2_6 type=checkbox> <label class=md-nav__link for=__nav_2_6> mkdocs <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=mkdocs class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> mkdocs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/mkdocs/theory/ class=md-nav__link> 理论 </a> </li> <li class=md-nav__item> <a href=../../../Note/mkdocs/practice/ class=md-nav__link> 实践 </a> </li> <li class=md-nav__item> <a href=../../../Note/mkdocs/best_practices/ class=md-nav__link> 最佳实践 </a> </li> <li class=md-nav__item> <a href=../../../Note/mkdocs/about_math/ class=md-nav__link> 写数学公式的坑 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_7 id=__nav_2_7 type=checkbox> <label class=md-nav__link for=__nav_2_7> LaTeX <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=LaTeX class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> LaTeX </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/latex/basic_latex/ class=md-nav__link> LaTeX基础 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_8 id=__nav_2_8 type=checkbox> <label class=md-nav__link for=__nav_2_8> ManimGL <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=ManimGL class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_8> <span class="md-nav__icon md-icon"></span> ManimGL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/manim/hello/ class=md-nav__link> 初见manim </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_9 id=__nav_2_9 type=checkbox> <label class=md-nav__link for=__nav_2_9> Jupyter <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Jupyter class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_9> <span class="md-nav__icon md-icon"></span> Jupyter </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/jupyter/jupyter1/ class=md-nav__link> 介绍 </a> </li> <li class=md-nav__item> <a href=../../../Note/jupyter/jupyter2/ class=md-nav__link> 基础使用 </a> </li> <li class=md-nav__item> <a href=../../../Note/jupyter/jupyter3/ class=md-nav__link> 远程服务 </a> </li> <li class=md-nav__item> <a href=../../../Note/jupyter/jupyter4/ class=md-nav__link> 进阶使用 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_10 id=__nav_2_10 type=checkbox> <label class=md-nav__link for=__nav_2_10> SAS <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=SAS class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_10> <span class="md-nav__icon md-icon"></span> SAS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/SAS/SAS_basic/ class=md-nav__link> SAS的基本操作 </a> </li> <li class=md-nav__item> <a href=../../../Note/SAS/SAS_application/ class=md-nav__link> SAS的统计应用 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_11 id=__nav_2_11 type=checkbox> <label class=md-nav__link for=__nav_2_11> Linux &amp; Shell <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Linux & Shell" class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_11> <span class="md-nav__icon md-icon"></span> Linux &amp; Shell </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Shell/linux/ class=md-nav__link> All About Linux </a> </li> <li class=md-nav__item> <a href=../../../Note/Shell/man/ class=md-nav__link> Manual for Shell </a> </li> <li class=md-nav__item> <a href=../../../Note/Shell/ssh/ class=md-nav__link> SSH </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 id=__nav_3 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../../Blog/ >Blog</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-label=Blog class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 id=__nav_3_2 type=checkbox> <label class=md-nav__link for=__nav_3_2> 2019 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=2019 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> 2019 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Blog/2019/2019_summary/ class=md-nav__link> 2019年度总结 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 id=__nav_3_3 type=checkbox> <label class=md-nav__link for=__nav_3_3> 2020 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=2020 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> 2020 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Blog/2020/2020_summary/ class=md-nav__link> 2020年度总结 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 id=__nav_3_4 type=checkbox> <label class=md-nav__link for=__nav_3_4> 2022 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=2022 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> 2022 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Blog/2022/2022_summary/ class=md-nav__link> 2022年度总结 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5 id=__nav_3_5 type=checkbox> <label class=md-nav__link for=__nav_3_5> 2023 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=2023 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> 2023 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Blog/2023/intern/ class=md-nav__link> 卖身记（一） </a> </li> <li class=md-nav__item> <a href=../../../Blog/2023/curriculum/ class=md-nav__link> 毕业.课程 </a> </li> <li class=md-nav__item> <a href=../../../Blog/2023/GEE/ class=md-nav__link> 考研始末 </a> </li> <li class=md-nav__item> <a href=../../../Blog/2023/music/ class=md-nav__link> 音乐和记忆 </a> </li> <li class=md-nav__item> <a href=../../../Blog/2023/intern2/ class=md-nav__link> 卖身记（二） </a> </li> <li class=md-nav__item> <a href=../../../Blog/2023/thesis/ class=md-nav__link> 毕业.论文 </a> </li> <li class=md-nav__item> <a href=../../../Blog/2023/travel_to_japan/ class=md-nav__link> 毕业.旅行 </a> </li> <li class=md-nav__item> <a href=../../../Blog/2023/recall_high_school_math/ class=md-nav__link> 中等数学复健 </a> </li> <li class=md-nav__item> <a href=../../../Blog/2023/graduation_pics/ class=md-nav__link> 毕业.留影 </a> </li> <li class=md-nav__item> <a href=../../../Blog/2023/name/ class=md-nav__link> 称呼zy的20种方法 </a> </li> <li class=md-nav__item> <a href=../../../Blog/2023/bloom/ class=md-nav__link> 铁树开花 </a> </li> <li class=md-nav__item> <a href=../../../Blog/2023/2023_summary/ class=md-nav__link> 2023年度回顾 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_6 id=__nav_3_6 type=checkbox> <label class=md-nav__link for=__nav_3_6> 2024 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=2024 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> 2024 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Blog/2024/otaku/ class=md-nav__link> おたく </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 id=__nav_4 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../ >Python</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-label=Python class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../pre_python/ class=md-nav__link> 前置知识 </a> </li> <li class=md-nav__item> <a href=../../command_line/ class=md-nav__link> 安装以及交互式运行 </a> </li> <li class=md-nav__item> <a href=../../script/ class=md-nav__link> 脚本式运行和脚本书写规范 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 id=__nav_4_5 type=checkbox> <label class=md-nav__link for=__nav_4_5> 基础语法 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=基础语法 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> 基础语法 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../BasicSyntax/builtin_class/ class=md-nav__link> 内置类 </a> </li> <li class=md-nav__item> <a href=../../BasicSyntax/builtin_keyword/ class=md-nav__link> 内置关键字 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6 id=__nav_4_6 type=checkbox> <label class=md-nav__link for=__nav_4_6> 高级语法 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=高级语法 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> 高级语法 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../functional_programming/ class=md-nav__link> 函数式编程 </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> 面向对象编程 <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> 面向对象编程 </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#attribute> 属性（attribute） </a> <nav aria-label=属性（attribute） class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#_2> 类属性和实例属性 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_3> 模式匹配 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_4> 限定属性 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#method> 方法（method） </a> <nav aria-label=方法（method） class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#_5> 类方法装饰器 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#polymorphism> 多态（polymorphism） </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#magic-method> 魔法方法（magic method） </a> <nav aria-label="魔法方法（magic method）" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#_6> 类的构造方法 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_7> 类的表示方法 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_8> 比较运算符 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_9> 二元运算符 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_10> 一元运算符 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_11> 数值转换 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_12> 实例属性访问控制 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_13> 迭代器 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_14> 描述器 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_15> 容器 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_16> 上下文管理器 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_17> 可调用对象 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_18> 协程行为 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#generic-type> 泛型（generic type） </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_19> 控制类的创建 </a> <nav aria-label=控制类的创建 class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#_20> 父类 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_21> 元类 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_22> 写在最后 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_7 id=__nav_4_7 type=checkbox> <label class=md-nav__link for=__nav_4_7> 标准库 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=标准库 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_7> <span class="md-nav__icon md-icon"></span> 标准库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../StandardLibrary/os/ class=md-nav__link> os </a> </li> <li class=md-nav__item> <a href=../../StandardLibrary/re/ class=md-nav__link> re </a> </li> <li class=md-nav__item> <a href=../../StandardLibrary/time/ class=md-nav__link> time </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_8 id=__nav_4_8 type=checkbox> <label class=md-nav__link for=__nav_4_8> 第三方库 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=第三方库 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_8> <span class="md-nav__icon md-icon"></span> 第三方库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/package_management/ class=md-nav__link> 包管理 </a> </li> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/numpy/ class=md-nav__link> NumPy </a> </li> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/pandas/ class=md-nav__link> pandas </a> </li> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/DIY/ class=md-nav__link> 自己写一个包 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_9 id=__nav_4_9 type=checkbox> <label class=md-nav__link for=__nav_4_9> 应用案例（MISC） <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=应用案例（MISC） class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_9> <span class="md-nav__icon md-icon"></span> 应用案例（MISC） </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Example/email/ class=md-nav__link> 发邮件 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_10 id=__nav_4_10 type=checkbox> <label class=md-nav__link for=__nav_4_10> 应用案例（爬虫） <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=应用案例（爬虫） class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_10> <span class="md-nav__icon md-icon"></span> 应用案例（爬虫） </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Example/Spider/national_FDA/ class=md-nav__link> 获取国家药监局官网上的GSP认证信息 </a> </li> <li class=md-nav__item> <a href=../../Example/Spider/local_FDA/ class=md-nav__link> 获取地方药监局官网上的GSP认证信息 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_11 id=__nav_4_11 type=checkbox> <label class=md-nav__link for=__nav_4_11> 应用案例（微软三件套） <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=应用案例（微软三件套） class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_11> <span class="md-nav__icon md-icon"></span> 应用案例（微软三件套） </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Example/Excel/csv2xlsx/ class=md-nav__link> 超大csv文件转xlsx文件 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 id=__nav_5 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../../Project/ >Project</a> <label for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-label=Project class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Project </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Project/plt-gallery/ class=md-nav__link> 基于PyScript的matplotlib画廊 </a> </li> <li class=md-nav__item> <a href=../../../Project/Course-Selection-System/ class=md-nav__link> 基于Django的选课系统 </a> </li> <li class=md-nav__item> <a href=../../../Project/qrq/ class=md-nav__link> chrome二维码生成扩展 </a> </li> <li class=md-nav__item> <a href=../../../Project/pymd/ class=md-nav__link> 基于Python的markdown渲染器 </a> </li> <li class=md-nav__item> <a href=../../../Project/high_school_math/ class=md-nav__link> 高中数学讲义（自用） </a> </li> <li class=md-nav__item> <a href=../../../Project/AirPrint-with-Python/ class=md-nav__link> 基于Python的AirPrint虚拟打印机 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 id=__nav_6 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../../Statistics/ >Statistics</a> <label for=__nav_6> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-label=Statistics class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Statistics </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_2 id=__nav_6_2 type=checkbox> <label class=md-nav__link for=__nav_6_2> 基础课 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=基础课 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> 基础课 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Statistics/Calculus/ class=md-nav__link> 数学分析 </a> </li> <li class=md-nav__item> <a href=../../../Statistics/Linear_Algebra/ class=md-nav__link> 线性代数 </a> </li> <li class=md-nav__item> <a href=../../../Statistics/Operations_Research/ class=md-nav__link> 运筹学 </a> </li> <li class=md-nav__item> <a href=../../../Statistics/Probability_Theory_and_Mathematical_Statistics/ class=md-nav__link> 概率论与数理统计 </a> </li> <li class=md-nav__item> <a href=../../../Statistics/Statistical_Software/ class=md-nav__link> 统计软件 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_3 id=__nav_6_3 type=checkbox> <label class=md-nav__link for=__nav_6_3> 专业课 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=专业课 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> 专业课 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Statistics/Statistical_Inference/ class=md-nav__link> 统计推断 </a> </li> <li class=md-nav__item> <a href=../../../Statistics/Regression_Analysis/ class=md-nav__link> 回归分析 </a> </li> <li class=md-nav__item> <a href=../../../Statistics/Time_Series_Analysis/ class=md-nav__link> 时间序列分析 </a> </li> <li class=md-nav__item> <a href=../../../Statistics/Sampling/ class=md-nav__link> 抽样调查 </a> </li> <li class=md-nav__item> <a href=../../../Statistics/Multivariate_Analysis/ class=md-nav__link> 多元分析 </a> </li> <li class=md-nav__item> <a href=../../../Statistics/Stochastic_Process/ class=md-nav__link> 随机过程 </a> </li> <li class=md-nav__item> <a href=../../../Statistics/Categorical_Data_Analysis/ class=md-nav__link> 属性数据分析 </a> </li> <li class=md-nav__item> <a href=../../../Statistics/Nonparametric_Statistics/ class=md-nav__link> 非参数统计 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_4 id=__nav_6_4 type=checkbox> <label class=md-nav__link for=__nav_6_4> 选修课 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=选修课 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> 选修课 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Statistics/Computational_Statistics/ class=md-nav__link> 统计计算 </a> </li> <li class=md-nav__item> <a href=../../../Statistics/Data_Mining/ class=md-nav__link> 数据挖掘 </a> </li> <li class=md-nav__item> <a href=../../../Statistics/Pattern_Recognition_and_Machine_Learning/ class=md-nav__link> 模式识别和机器学习 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 id=__nav_7 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../../../SomeMath/ >SomeMath</a> <label for=__nav_7> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-label=SomeMath class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> SomeMath </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7_2 id=__nav_7_2 type=checkbox> <label class=md-nav__link for=__nav_7_2> 实分析 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=实分析 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_7_2> <span class="md-nav__icon md-icon"></span> 实分析 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../SomeMath/real/rational_numbers_countable/ class=md-nav__link> 有理数集是可数的 </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/real/taylor_expand/taylor_expand/ class=md-nav__link> 泰勒展开 </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/real/hyperbolic_function/ class=md-nav__link> 双曲函数 </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/real/a_limit/ class=md-nav__link> 一道极限题 </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/real/derivatives/ class=md-nav__link> 导数 </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/real/gamma_func/ class=md-nav__link> Gamma函数 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7_3 id=__nav_7_3 type=checkbox> <label class=md-nav__link for=__nav_7_3> 复分析 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=复分析 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_7_3> <span class="md-nav__icon md-icon"></span> 复分析 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../SomeMath/complex/why_complex/ class=md-nav__link> 我们为什么需要复数 </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/complex/constructible_number/ class=md-nav__link> 规矩数 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7_4 id=__nav_7_4 type=checkbox> <label class=md-nav__link for=__nav_7_4> 代数 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=代数 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_7_4> <span class="md-nav__icon md-icon"></span> 代数 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../SomeMath/algebra/linear_differential_equation/ class=md-nav__link> 线性齐次差分方程 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7_5 id=__nav_7_5 type=checkbox> <label class=md-nav__link for=__nav_7_5> 概率论 <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=概率论 class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_7_5> <span class="md-nav__icon md-icon"></span> 概率论 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../SomeMath/prob/Montmort1/ class=md-nav__link> Montmort问题（一） </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Tags/ class=md-nav__link> Tags </a> </li> <li class=md-nav__item> <a href=../../../Playground/ class=md-nav__link> Playground </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#attribute> 属性（attribute） </a> <nav aria-label=属性（attribute） class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#_2> 类属性和实例属性 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_3> 模式匹配 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_4> 限定属性 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#method> 方法（method） </a> <nav aria-label=方法（method） class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#_5> 类方法装饰器 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#polymorphism> 多态（polymorphism） </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#magic-method> 魔法方法（magic method） </a> <nav aria-label="魔法方法（magic method）" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#_6> 类的构造方法 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_7> 类的表示方法 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_8> 比较运算符 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_9> 二元运算符 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_10> 一元运算符 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_11> 数值转换 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_12> 实例属性访问控制 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_13> 迭代器 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_14> 描述器 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_15> 容器 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_16> 上下文管理器 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_17> 可调用对象 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_18> 协程行为 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#generic-type> 泛型（generic type） </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_19> 控制类的创建 </a> <nav aria-label=控制类的创建 class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#_20> 父类 </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_21> 元类 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_22> 写在最后 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <!-- Edit and view button --> <!-- 是否隐藏编辑按钮 --> <!-- <a href="https://github.dev/AIboy996/AIboy996.github.io/blob/main/docs/Python/SeniorSyntax/OOP.md" title="Edit this page" class="md-content__button md-icon" >
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
</a> --> <a class="md-content__button md-icon" href=https://github.com/AIboy996/AIboy996.github.io/tree/main/docs/Python/SeniorSyntax/OOP.md title="View source of this page"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"></path></svg> </a> <!-- Tags --> <!-- Determine whether to show tags --> <nav class=md-tags> <a class=md-tag href=/Tags#python进阶>python进阶</a> </nav> <!--
  Hack: check whether the content contains a h1 headline. If it
  doesn't, the page title (or respectively site name) is used
  as the main headline.
--> <!-- Markdown content --> <div><h1 id=_1>面向对象编程<a class=headerlink href=#_1 title="Permanent link">¶</a></h1> <p>虽然函数式编程也很好玩，但是我认为python最丰富、可玩性最高的还是OOP（面向对象编程，Object Oriented Programming）。</p> <p>在这里你几乎可以<strong>控制Python对象的一切行为</strong>：</p> <ul> <li><code>with</code>语句如何创建对象</li> <li><code>for</code>语句如何迭代对象</li> <li><code>print(object)</code>会输出什么东西</li> <li><code>()</code>,<code>[]</code>,<code>.</code>,<code>+</code>,<code>-</code>,<code>*=</code>,<code>/=</code>等操作符的行为</li> </ul> <p>诸如此类。</p> <p>甚至可以用元类（metaclass）来控制定义类的过程，比如要求所有的方法命名都必须用小写字母。</p> <p>之前的两篇文章<a href=../BasicSyntax/builtin_keyword>内置关键字</a>和<a href=../BasicSyntax/builtin_class>内置类</a>已经回答了下面的问题：</p> <ul> <li>什么是类？<ul> <li>类就是某些对象的抽象，几乎python中一切的东西都是类（或者由类生成的对象或者叫实例 i.e. instance）</li> </ul> </li> <li>为什么使用类？<ul> <li>因为类是一类对象的抽象，可以很好的提供这些对象的统一接口便于维护，极大提高了代码的复用率。同时类之间的继承关系也可以很方便地简化代码。</li> <li>类的关键在于<strong>抽象</strong>和<strong>复用</strong>。</li> </ul> </li> <li>如何自定义一个类？<ul> <li>使用<code>class</code>关键字</li> </ul> </li> <li>如何访问类的属性、方法？<ul> <li>使用<code>.</code>运算符</li> </ul> </li> <li>从类到对象的过程？<ul> <li>例如<code>a = A()</code></li> <li>首先会运行<code>A.__new__(cls)</code>方法来创建一个实例，必须传入参数<code>cls</code>，返回一个实例<code>a</code>。</li> <li>然后会运行<code>A.__init__(self)</code>方法来初始化实例，这个方法必须传入参数<code>self</code>，没有返回值。</li> <li>于是乎一个实例就被创造好了。</li> </ul> </li> <li>如何继承一个类？<ul> <li>这么写：<code>class MyClass(FatherClass)</code></li> </ul> </li> </ul> <p>这篇文章我们来补充一些OOP的知识。</p> <h2 id=attribute>属性（attribute）<a class=headerlink href=#attribute title="Permanent link">¶</a></h2> <blockquote> <p>属性就是类命名空间中的变量</p> </blockquote> <h3 id=_2>类属性和实例属性<a class=headerlink href=#_2 title="Permanent link">¶</a></h3> <p>我们定义这样一个类来展示类中几种不同的属性：</p> <p></p><div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=k>class</span> <span class=nc>Example</span><span class=p>:</span>
<span class=o>...</span>     <span class=n>class_attribute</span> <span class=o>=</span> <span class=s1>'类属性'</span>
<span class=o>...</span>     <span class=n>__private</span> <span class=o>=</span> <span class=s1>'私有 类属性'</span>
<span class=o>...</span>     <span class=n>_private</span> <span class=o>=</span> <span class=s1>'惯用私有 类属性'</span>
<span class=o>...</span>     <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=o>...</span>         <span class=bp>self</span><span class=o>.</span><span class=n>instance_attribute_in_method</span> <span class=o>=</span> <span class=s1>'实例属性'</span>
<span class=o>...</span>     <span class=nd>@property</span>
<span class=o>...</span>     <span class=k>def</span> <span class=nf>property_attribute</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=o>...</span>         <span class=k>return</span> <span class=s1>'property装饰的类属性'</span>
</code></pre></div> 先看看里面都有啥： <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=nb>dir</span><span class=p>(</span><span class=n>Example</span><span class=p>)</span>
<span class=p>[</span><span class=s1>'_Example__private'</span><span class=p>,</span> <span class=s1>'__class__'</span><span class=p>,</span> <span class=s1>'__delattr__'</span><span class=p>,</span> <span class=s1>'__dict__'</span><span class=p>,</span> <span class=s1>'__dir__'</span><span class=p>,</span> <span class=s1>'__doc__'</span><span class=p>,</span> <span class=s1>'__eq__'</span><span class=p>,</span> <span class=s1>'__format__'</span><span class=p>,</span> <span class=s1>'__ge__'</span><span class=p>,</span> <span class=s1>'__getattribute__'</span><span class=p>,</span> <span class=s1>'__getstate__'</span><span class=p>,</span> <span class=s1>'__gt__'</span><span class=p>,</span> <span class=s1>'__hash__'</span><span class=p>,</span> <span class=s1>'__init__'</span><span class=p>,</span> <span class=s1>'__init_subclass__'</span><span class=p>,</span> <span class=s1>'__le__'</span><span class=p>,</span> <span class=s1>'__lt__'</span><span class=p>,</span> <span class=s1>'__module__'</span><span class=p>,</span> <span class=s1>'__ne__'</span><span class=p>,</span> <span class=s1>'__new__'</span><span class=p>,</span> <span class=s1>'__reduce__'</span><span class=p>,</span> <span class=s1>'__reduce_ex__'</span><span class=p>,</span> <span class=s1>'__repr__'</span><span class=p>,</span> <span class=s1>'__setattr__'</span><span class=p>,</span> <span class=s1>'__sizeof__'</span><span class=p>,</span> <span class=s1>'__str__'</span><span class=p>,</span> <span class=s1>'__subclasshook__'</span><span class=p>,</span> <span class=s1>'__weakref__'</span><span class=p>,</span> <span class=s1>'_private'</span><span class=p>,</span> <span class=s1>'class_attribute'</span><span class=p>,</span> <span class=s1>'property_attribute'</span><span class=p>]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>e</span> <span class=o>=</span> <span class=n>Example</span><span class=p>()</span> 
<span class=o>&gt;&gt;&gt;</span> <span class=n>e</span><span class=o>.</span><span class=fm>__dir__</span><span class=p>()</span>
<span class=p>[</span> <span class=s1>'_Example__private'</span><span class=p>,</span> <span class=s1>'__class__'</span><span class=p>,</span> <span class=s1>'__delattr__'</span><span class=p>,</span>
  <span class=s1>'__dict__'</span><span class=p>,</span> <span class=s1>'__dir__'</span><span class=p>,</span> <span class=s1>'__doc__'</span><span class=p>,</span> <span class=s1>'__eq__'</span><span class=p>,</span> 
  <span class=s1>'__format__'</span><span class=p>,</span> <span class=s1>'__ge__'</span><span class=p>,</span> <span class=s1>'__getattribute__'</span><span class=p>,</span> 
  <span class=s1>'__gt__'</span><span class=p>,</span> <span class=s1>'__hash__'</span><span class=p>,</span> <span class=s1>'__init__'</span><span class=p>,</span> <span class=s1>'__init_subclass__'</span><span class=p>,</span>
  <span class=s1>'__le__'</span><span class=p>,</span> <span class=s1>'__lt__'</span><span class=p>,</span> <span class=s1>'__module__'</span><span class=p>,</span> <span class=s1>'__ne__'</span><span class=p>,</span> 
  <span class=s1>'__new__'</span><span class=p>,</span> <span class=s1>'__reduce__'</span><span class=p>,</span> <span class=s1>'__reduce_ex__'</span><span class=p>,</span> 
  <span class=s1>'__repr__'</span><span class=p>,</span> <span class=s1>'__setattr__'</span><span class=p>,</span> <span class=s1>'__sizeof__'</span><span class=p>,</span> 
  <span class=s1>'__str__'</span><span class=p>,</span> <span class=s1>'__subclasshook__'</span><span class=p>,</span> <span class=s1>'__weakref__'</span><span class=p>,</span>
  <span class=s1>'_private'</span><span class=p>,</span> <span class=s1>'class_attribute'</span><span class=p>,</span> 
  <span class=s1>'instance_attribute_in_method'</span><span class=p>,</span> <span class=s1>'property_attribute'</span><span class=p>]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>e</span><span class=o>.</span><span class=vm>__dict__</span>
<span class=p>{</span><span class=s1>'instance_attribute_in_method'</span><span class=p>:</span> <span class=s1>'实例属性'</span><span class=p>}</span>
</code></pre></div> 可以发现，<code>e.__dir__()</code>可以查到所有的类属性以及实例属性： <ul> <li><code>_Example__private</code>：（私有变量会被重命名）</li> <li><code>_private</code></li> <li><code>class_attribute</code></li> <li><code>class_attribute_in_method</code></li> <li><code>property_attribute</code></li> </ul> <div class="admonition caution"> <p class=admonition-title>类属性是共享的</p> <p>请注意，类属性是这个类的所有实例共享的。每个实例都可以访问、修改这个属性。请不要把本该属于实例的属性放到类属性中。</p> </div> <p>但是<code>e.__dict__</code>只能查到通过<code>self.</code>赋值的变量（也就是实例属性）。 </p><div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>e</span><span class=o>.</span><span class=n>class_attribute</span>
<span class=s1>'类属性'</span>
<span class=o>&gt;&gt;&gt;</span> <span class=k>try</span><span class=p>:</span>
<span class=o>...</span>     <span class=nb>print</span><span class=p>(</span><span class=n>e</span><span class=o>.</span><span class=n>__private</span><span class=p>)</span>
<span class=o>...</span> <span class=k>except</span> <span class=ne>AttributeError</span> <span class=k>as</span> <span class=n>error</span><span class=p>:</span>
<span class=o>...</span>     <span class=nb>print</span><span class=p>(</span><span class=n>error</span><span class=p>)</span>
<span class=s1>'Example'</span> <span class=nb>object</span> <span class=n>has</span> <span class=n>no</span> <span class=n>attribute</span> <span class=s1>'__private'</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>e</span><span class=o>.</span><span class=n>instance_attribute_in_method</span>
<span class=s1>'实例属性'</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>e</span><span class=o>.</span><span class=n>property_attribute</span>
<span class=s1>'property装饰的类属性'</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>e</span><span class=o>.</span><span class=n>_Example__private</span>
<span class=s1>'私有 类属性'</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>e</span><span class=o>.</span><span class=n>_private</span>
<span class=s1>'惯用私有 类属性'</span>
</code></pre></div> <p>此外，如果同样的属性名称同时出现在实例和类中，则属性查找会优先选择实例。 </p><div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=k>class</span> <span class=nc>Warehouse</span><span class=p>:</span>
<span class=o>...</span>    <span class=n>purpose</span> <span class=o>=</span> <span class=s1>'storage'</span>
<span class=o>...</span>    <span class=n>region</span> <span class=o>=</span> <span class=s1>'west'</span>
<span class=o>...</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>w1</span> <span class=o>=</span> <span class=n>Warehouse</span><span class=p>()</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>print</span><span class=p>(</span><span class=n>w1</span><span class=o>.</span><span class=n>purpose</span><span class=p>,</span> <span class=n>w1</span><span class=o>.</span><span class=n>region</span><span class=p>)</span>
<span class=n>storage</span> <span class=n>west</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>w2</span> <span class=o>=</span> <span class=n>Warehouse</span><span class=p>()</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>w2</span><span class=o>.</span><span class=n>region</span> <span class=o>=</span> <span class=s1>'east'</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>print</span><span class=p>(</span><span class=n>w2</span><span class=o>.</span><span class=n>purpose</span><span class=p>,</span> <span class=n>w2</span><span class=o>.</span><span class=n>region</span><span class=p>)</span>
<span class=n>storage</span> <span class=n>east</span>
</code></pre></div> <h3 id=_3>模式匹配<a class=headerlink href=#_3 title="Permanent link">¶</a></h3> <p><code>__match_args__</code>，定义了<code>match</code>语句中对象的行为，规定了使用哪些变量来进行匹配。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>A</span><span class=p>:</span>
    <span class=n>__match_args__</span> <span class=o>=</span> <span class=p>(</span><span class=s1>'a'</span><span class=p>,</span><span class=s1>'b'</span><span class=p>)</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>a</span> <span class=o>=</span> <span class=n>x</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>b</span> <span class=o>=</span> <span class=n>y</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>c</span> <span class=o>=</span> <span class=n>z</span>

<span class=n>obj</span> <span class=o>=</span> <span class=n>A</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>)</span>

<span class=k>match</span> <span class=n>obj</span><span class=p>:</span>
    <span class=k>case</span> <span class=n>A</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>2</span><span class=p>)</span> <span class=c1># this case matched</span>
    <span class=k>case</span> <span class=n>A</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
</code></pre></div> <h3 id=_4>限定属性<a class=headerlink href=#_4 title="Permanent link">¶</a></h3> <p>最后，类定义中还可以规定一个特殊的属性：<code>__slots__</code>，使用它可以声明所有的属性。从而显著节省空间、提高属性的查找速度。</p> <p>用法就是： </p><div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>A</span><span class=p>:</span>
  <span class=vm>__slots__</span>  <span class=o>=</span> <span class=p>[</span><span class=s1>'data'</span><span class=p>]</span>
  <span class=k>pass</span>
</code></pre></div> 这样A的所有实例就都只有<code>data</code>这个属性了，也不可以通过赋值的方式增加其他属性。 <h2 id=method>方法（method）<a class=headerlink href=#method title="Permanent link">¶</a></h2> <blockquote> <p>方法就是命名空间中的函数</p> </blockquote> <p>如果你直接在<code>class</code>的定义内写一个普通的函数: </p><div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=k>class</span> <span class=nc>Example</span><span class=p>:</span>
<span class=o>...</span>     <span class=k>def</span> <span class=nf>f</span><span class=p>(</span><span class=n>s</span><span class=p>):</span>
<span class=o>...</span>         <span class=nb>print</span><span class=p>(</span><span class=n>s</span><span class=p>)</span>
</code></pre></div> 那么它只能通过<code>Example.f</code>来调用。 <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>Example</span><span class=o>.</span><span class=n>f</span><span class=p>(</span><span class=s1>'asd'</span><span class=p>)</span>
<span class=n>asd</span>
</code></pre></div> <p>实例化之后它的行为就会变化，他会默认<strong>把自身作为第一个参数传入</strong>：</p> <details class=info> <summary>把实例自身作为参数传入类方法</summary> <p>Python中约定俗称的习惯是，如果你需要使用实例自身作为第一个参数传入，那么这个形参应该定义为<code>self</code>（前面的例子说明了，定义成其他的也不是不行，这是个软约束）。</p> <p>另外，在其他语言中也广泛存在这样的行为，例如JavaScript的<code>this</code>、Java中的<code>this</code>、C++中也有<code>this</code>指针。这些概念和Python的<code>self</code>非常类似。</p> </details> <p></p><div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>e</span> <span class=o>=</span> <span class=n>Example</span><span class=p>()</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>e</span><span class=o>.</span><span class=n>f</span><span class=p>()</span>
<span class=o>&lt;</span><span class=n>__main__</span><span class=o>.</span><span class=n>Example</span> <span class=nb>object</span> <span class=n>at</span> <span class=mh>0x102c437d0</span><span class=o>&gt;</span>
</code></pre></div> 这个时候函数就没法实现我们想要的功能了： <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>e</span><span class=o>.</span><span class=n>f</span><span class=p>(</span><span class=s1>'asd'</span><span class=p>)</span>
<span class=n>Traceback</span> <span class=p>(</span><span class=n>most</span> <span class=n>recent</span> <span class=n>call</span> <span class=n>last</span><span class=p>):</span>
  <span class=n>File</span> <span class=s2>"&lt;stdin&gt;"</span><span class=p>,</span> <span class=n>line</span> <span class=mi>1</span><span class=p>,</span> <span class=ow>in</span> <span class=o>&lt;</span><span class=n>module</span><span class=o>&gt;</span>
<span class=ne>TypeError</span><span class=p>:</span> <span class=n>Example</span><span class=o>.</span><span class=n>f</span><span class=p>()</span> <span class=n>takes</span> <span class=mi>1</span> <span class=n>positional</span> <span class=n>argument</span> <span class=n>but</span> <span class=mi>2</span> <span class=n>were</span> <span class=n>given</span>
</code></pre></div> <h3 id=_5>类方法装饰器<a class=headerlink href=#_5 title="Permanent link">¶</a></h3> <p>我们在函数式编程已经介绍了装饰器。在类的方法定义中，我们也常用装饰器来实现一些功能。</p> <blockquote> <p>根据我们之前的介绍，所谓装饰器就是一个返回函数的函数。所以Python中所谓的内置装饰器就是内置函数，大概只有<code>staticmethod</code>, <code>classmethod</code>和<code>property</code>。也有很多其他的装饰器被python安置在了各个标准库中，例如<code>functools.cache</code>等。</p> </blockquote> <p><code>@staticmethod</code>装饰的<strong>静态方法</strong>可以解决我们上面提到的问题，静态方法不会把<code>self</code>作为第一个参数传入。</p> <p><code>@classmethod</code>装饰的<strong>类方法</strong>可以在不实例化的使用。</p> <p><code>@property</code>装饰的<strong>方法会成为一个属性</strong>。这个属性会有<code>getter</code>, <code>setter</code>, <code>deleter</code>三个方法，分别使用<code>@property</code>, <code>@x.setter</code>, <code>@x.deleter</code>装饰即可。使用这个装饰器可以更加精细地控制属性的行为，例如我希望<code>person.age</code>这个属性永远是正整数，就可以写一个方法来实现。</p> <p>例如： </p><div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>C</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_x</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=nd>@property</span>
    <span class=k>def</span> <span class=nf>x</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>"""I'm the 'x' property."""</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_x</span>

    <span class=nd>@x</span><span class=o>.</span><span class=n>setter</span>
    <span class=k>def</span> <span class=nf>x</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_x</span> <span class=o>=</span> <span class=n>value</span>

    <span class=nd>@x</span><span class=o>.</span><span class=n>deleter</span>
    <span class=k>def</span> <span class=nf>x</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>_x</span>
</code></pre></div> <p>再如<code>abc</code>包中的<code>@abstractmethod</code>，是用于声明抽象方法的装饰器。一般用于抽象基类中为实现的方法。</p> <p>更多的内容我们在介绍标准库的时候再来看。</p> <h3 id=polymorphism>多态（polymorphism）<a class=headerlink href=#polymorphism title="Permanent link">¶</a></h3> <p>多态是一个计算机术语，也就是同一个接口在不同的类上表现出的行为不同。例如： </p><div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=k>class</span> <span class=nc>Person</span><span class=p>:</span>
<span class=o>...</span>     <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
<span class=o>...</span>         <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
<span class=o>...</span>     <span class=k>def</span> <span class=nf>hello</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=o>...</span>         <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"I am </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
<span class=o>...</span>
<span class=o>&gt;&gt;&gt;</span> <span class=k>class</span> <span class=nc>Doctor</span><span class=p>(</span><span class=n>Person</span><span class=p>):</span>
<span class=o>...</span>     <span class=k>def</span> <span class=nf>hello</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=o>...</span>         <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"I am Dr.</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
<span class=o>...</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>alice</span> <span class=o>=</span> <span class=n>Person</span><span class=p>(</span><span class=s1>'Alice'</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>alice</span><span class=o>.</span><span class=n>hello</span><span class=p>()</span>
<span class=n>I</span> <span class=n>am</span> <span class=n>Alice</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>galler</span> <span class=o>=</span> <span class=n>Doctor</span><span class=p>(</span><span class=s1>'Galler'</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>galler</span><span class=o>.</span><span class=n>hello</span><span class=p>()</span>
<span class=n>I</span> <span class=n>am</span> <span class=n>Dr</span><span class=o>.</span><span class=n>Galler</span>
</code></pre></div> <h2 id=magic-method>魔法方法（magic method）<a class=headerlink href=#magic-method title="Permanent link">¶</a></h2> <p>类的方法中最好玩的一部分就是魔法方法了。</p> <p>这些方法是Python设计的用于定义类的一些重要行为（例如重载运算符）的方法，命名前后都有双下划线。例如：</p> <ul> <li><code>__init__</code></li> <li><code>__new__</code></li> <li><code>__call__</code></li> </ul> <p>需要注意，很多时候我们并不是完全重写这些方法，只是想要在默认的行为中加上一点内容。所以我们首先需要学会如何复现默认的行为（实际上这在前面的文中已经展示过了）。</p> <p>例如我们想要在<code>__hash__</code>被调用的时候输出一句话，然后采用默认的行为：</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>A</span><span class=p>:</span>
  <span class=k>def</span> <span class=fm>__hash__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
    <span class=nb>print</span><span class=p>(</span><span class=s1>'__hash__() is called'</span><span class=p>)</span>
    <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__hash__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=c1># 父类的hash函数</span>
</code></pre></div> <p>这里面<code>super()</code>返回<code>A</code>的父类。所以<code>super().__hash__(self)</code>实际上就是调用<code>A</code>的父类的<code>__hash__</code>方法，在这个例子里就是<code>object.__hash__(self)</code>（python类定义时默认的父类是object）。</p> <p>学会了这一手，就可以来看Python中各种神奇的魔法方法。</p> <h3 id=_6>类的构造方法<a class=headerlink href=#_6 title="Permanent link">¶</a></h3> <p>也就是<code>__new__</code>、<code>__init__</code>和<code>__del__</code>这三个方法。分别定义了如何生成类的实例、如何初始化实例和实例被销毁（Python有自动的内存回收机制）时候的行为。</p> <ul> <li> <p><code>__new__</code>的目的主要是允许不可变类型的子类 (例如 int, str 或 tuple) 定制实例创建过程： </p><div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=k>class</span> <span class=nc>inch</span><span class=p>(</span><span class=nb>float</span><span class=p>):</span>
<span class=o>...</span>     <span class=s2>"Convert from inch to meter"</span>
<span class=o>...</span>     <span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>arg</span><span class=o>=</span><span class=mf>0.0</span><span class=p>):</span>
<span class=o>...</span>         <span class=k>return</span> <span class=nb>float</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>arg</span><span class=o>*</span><span class=mf>0.0254</span><span class=p>)</span>
<span class=o>...</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>print</span><span class=p>(</span><span class=n>inch</span><span class=p>(</span><span class=mi>12</span><span class=p>))</span>
<span class=mf>0.3048</span>
</code></pre></div> </li> <li> <p><code>__init__</code>几乎是每个类都会重载的重要方法，它控制着类的实例化行为。一个基类如果有<code>__init__</code>方法，则其所派生的类如果也有<code>__init__</code>方法，就必须显式地调用它以确保实例基类部分的正确初始化；例如: <code>super().__init__([args...])</code>。</p> </li> <li> <p><code>__del__</code>控制类销毁的行为。如果一个基类具有<code>__del__</code>方法，则其所派生的类如果也有<code>__del__</code>方法，就必须显式地调用它以确保实例基类部分的正确清除。</p> </li> </ul> <p>下面给出一个文件处理的例子： </p><div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>os.path</span> <span class=kn>import</span> <span class=n>join</span>

<span class=k>class</span> <span class=nc>FileObject</span><span class=p>:</span>
<span class=w>    </span><span class=sd>'''文件对象的装饰类，用来保证文件被删除时能够正确关闭。'''</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filepath</span><span class=o>=</span><span class=s1>'~'</span><span class=p>,</span> <span class=n>filename</span><span class=o>=</span><span class=s1>'sample.txt'</span><span class=p>):</span>
        <span class=c1># 使用读写模式打开filepath中的filename文件</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>file</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=n>join</span><span class=p>(</span><span class=n>filepath</span><span class=p>,</span> <span class=n>filename</span><span class=p>),</span> <span class=s1>'r+'</span><span class=p>)</span>

    <span class=k>def</span> <span class=fm>__del__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>file</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
        <span class=k>del</span> <span class=bp>self</span><span class=o>.</span><span class=n>file</span>
</code></pre></div> <div class="admonition caution"> <p class=admonition-title>何谓对象的销毁？</p> <p>根据Python的垃圾回收机制（garbage collector）当对象的引用计数为0的时候对象就会被销毁。所以<code>del x</code>并不直接调用 <code>x.__del__()</code>，前者会将 x 的引用计数减一，而后者仅会在 x 的引用计数变为零时被调用。</p> <p>要查看对象的引用计数可以使用<code>gc.get_count()</code>函数。</p> <p>由于调用<code>__del__</code>方法时周边状况已不确定，在其执行期间发生的<strong>异常将被忽略</strong>，改为打印一个警告到<code>sys.stderr</code>。</p> </div> <h3 id=_7>类的表示方法<a class=headerlink href=#_7 title="Permanent link">¶</a></h3> <p><code>__repr__</code>, <code>__str__</code>, <code>__format__</code>, <code>__hash__</code>, <code>__bool__</code>和<code>__bytes__</code>依次控制了<code>repr(object)</code>, <code>str(object)</code>, <code>hash(object)</code>, <code>format(object)</code>, <code>bool(object)</code>和<code>bytes(object)</code>的行为。</p> <p>例如： </p><div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=k>class</span> <span class=nc>Vector</span><span class=p>:</span>
<span class=o>...</span>     <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>data</span><span class=p>):</span>
<span class=o>...</span>       <span class=bp>self</span><span class=o>.</span><span class=n>data</span> <span class=o>=</span> <span class=n>data</span>
<span class=o>...</span>     <span class=k>def</span> <span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=o>...</span>       <span class=k>return</span> <span class=s1>'vec(</span><span class=si>%s</span><span class=s1>)'</span> <span class=o>%</span> <span class=p>(</span><span class=s1>','</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=nb>map</span><span class=p>(</span><span class=nb>str</span><span class=p>,</span><span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>)))</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>v</span> <span class=o>=</span> <span class=n>Vector</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>print</span><span class=p>(</span><span class=n>v</span><span class=p>)</span>
<span class=n>vec</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>)</span>
</code></pre></div> <div class="admonition caution"> <p class=admonition-title><code>__hash__</code>和<code>__eq__</code>的关联</p> <p>如果一个类没有定义 <code>__eq__()</code> 方法那么它也不应该定义 <code>__hash__()</code> 操作；</p> <p>如果它定义了 <code>__eq__()</code> 但没有定义 <code>__hash__()</code>，则其实例将不可被用作可哈希多项集的条目。 </p> <p>如果一个类定义了可变对象并实现了 <code>__eq__()</code> 方法，则它不应该实现 <code>__hash__()</code>，因为 hashable 多项集的实现要求键的哈希值是不可变的（如果对象的哈希值发生改变，它将位于错误的哈希桶中）。</p> </div> <h3 id=_8>比较运算符<a class=headerlink href=#_8 title="Permanent link">¶</a></h3> <p>运算符号与方法名称的对应关系如下：</p> <ul> <li><code>x&lt;y</code> 调用 <code>x.__lt__(y)</code></li> <li><code>x&lt;=y</code> 调用 <code>x.__le__(y)</code></li> <li><code>x==y</code> 调用 <code>x.__eq__(y)</code></li> <li><code>x!=y</code> 调用 <code>x.__ne__(y)</code></li> <li><code>x&gt;y</code> 调用 <code>x.__gt__(y)</code></li> <li><code>x&gt;=y</code> 调用 <code>x.__ge__(y)</code></li> </ul> <p>这些运算符一般需要返回<code>True</code> or <code>False</code>。</p> <p>当然，也可以返回任意值。比如我就要定义<code>a &lt; 2</code>是a的二进制值向左移2（这个操作的一般写法是<code>a &lt;&lt; 2</code>），也不是不可以。</p> <h3 id=_9>二元运算符<a class=headerlink href=#_9 title="Permanent link">¶</a></h3> <p>主要包括（<code>+, -, *, @, /, //, %, divmod(), pow(), **, &lt;&lt;, &gt;&gt;, &amp;, ^, |</code>）。</p> <p>对应英文简写（<code>add, sub, mul, matmul, truediv, floordiv, mod, divmod, pow, lshift, rshift, and, xor, or</code>）。</p> <p>例如<code>a + b</code>会（默认）调用运算符<code>a.__add__(b)</code>，如果<code>a</code>没有实现这个方法并且a和b不是同一个类，那么就会调用b的反射（reverse）的运算符<code>b.__radd__(a)</code>，如果这个方法也没实现就会抛出错误。</p> <p>此外还有一些加强（implemented）运算符（<code>+=, -=, *=, @=, /=, //=, %=, **=, &lt;&lt;=, &gt;&gt;=, &amp;=, ^=, |=</code>）。</p> <p>例如<code>a += b</code>等价于<code>a = a.__iadd__(b)</code>，如果没实现<code>__iadd__</code>就会调用<code>a.__add__(b)</code>。</p> <h3 id=_10>一元运算符<a class=headerlink href=#_10 title="Permanent link">¶</a></h3> <p>运算符号与方法名称的对应关系如下：</p> <ul> <li><code>-a</code> 调用 <code>a.__neg__()</code></li> <li><code>+a</code> 调用 <code>a.__pos__()</code></li> <li><code>abs(a)</code> 调用 <code>a.__abs__()</code></li> <li><code>~a</code> 调用 <code>a.__invert__()</code></li> </ul> <h3 id=_11>数值转换<a class=headerlink href=#_11 title="Permanent link">¶</a></h3> <ul> <li><code>float(a)</code> 调用 <code>a.__float__()</code></li> <li><code>complex(a)</code> 调用 <code>a.__complex__()</code></li> <li><code>int(a)</code> 调用 <code>a.__int__()</code></li> <li><code>round(a)</code> 调用 <code>a.__round__()</code></li> <li><code>math.trunc(a)</code> 调用 <code>a.__trunc__()</code></li> <li><code>math.floor(a)</code> 调用 <code>a.__floor__()</code></li> <li><code>math.ceil(a)</code> 调用 <code>a.__ceil__()</code></li> <li><code>operator.index(a)</code> 调用 <code>a.__index__()</code></li> </ul> <h3 id=_12>实例属性访问控制<a class=headerlink href=#_12 title="Permanent link">¶</a></h3> <p><code>__getattribute__</code>和<code>__getattr__</code>, <code>__setattr__</code>, <code>__delattr__</code>, <code>__dir__</code>这几个方法可以控制实例属性被访问时的行为。</p> <p>其中<code>__getattribute__</code>和<code>__getattr__</code>这两个魔术方法的取名非常迷惑。</p> <ul> <li>只要我们尝试访问一个类实例的属性，就会触发<code>__getattribute__</code>方法。<ul> <li>特别注意，我们在写类定义的时候<code>self.xxx</code>也是会触发<code>__getattribute__</code>的，所以需要特别避免递归调用。</li> </ul> </li> <li>只有我们尝试一个<strong>不存在的</strong>类实例的属性，才会触发<code>__getattr__</code>方法。</li> </ul> <p>例如我们想让这个类被访问到不存在属性的时候返回<code>None</code>，就可以： </p><div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>A</span><span class=p>:</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>x</span>

    <span class=k>def</span> <span class=fm>__getattribute__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__getattribute__</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>

    <span class=k>def</span> <span class=fm>__getattr__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
        <span class=k>return</span> <span class=kc>None</span>

<span class=n>a</span> <span class=o>=</span> <span class=n>A</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>x</span><span class=p>)</span> <span class=c1># print 1</span>
<span class=nb>print</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>data</span><span class=p>)</span> <span class=c1># print None</span>
</code></pre></div> <p>当我们给实例的属性赋值时会触发<code>__setattr__</code>，例如<code>a.data = 1</code>（同样的在定义类的时候, <code>self.data=1</code>也是会触发这个方法的，需要注意避免循环调用）</p> <p>当我们删除实例的属性时会触发<code>__delattr__</code>，例如<code>del a.data</code>。</p> <p><code>__dir__</code>方法控制了<code>dir(object)</code>的行为，Python要求这个函数必须返回一个序列（例如列表）。</p> <h3 id=_13>迭代器<a class=headerlink href=#_13 title="Permanent link">¶</a></h3> <blockquote> <p>一个典型的例子就是python内置的<code>range</code>类</p> </blockquote> <p>定义了<code>__next__</code>的是一个迭代器，定义了<code>__iter__</code>的是一个可迭代对象。</p> <p>实现<code>__reversed__</code>这个方法可以让对象支持<code>reversed()</code>内置函数，这个方法应当返回一个逆序迭代器。</p> <p>使用<code>iter(iterable_object)</code>可以返回一个迭代器。</p> <p>使用<code>for</code>语句可以遍历一个可迭代对象（实际上会创建一个迭代器），每一次迭代实际上就是通过<code>.__next__()</code>获取迭代器中的下一个值。</p> <p>例如一个整数迭代器： </p><div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Range</span><span class=p>:</span>
<span class=w>    </span><span class=sd>"""Range(n) is a iterator from 1 to n"""</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>n</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>max</span> <span class=o>=</span> <span class=n>n</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>now</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>inc</span> <span class=o>=</span> <span class=mi>1</span> <span class=c1># 增量，顺序为1，逆序为-1</span>

    <span class=k>def</span> <span class=fm>__next__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>while</span> <span class=bp>self</span><span class=o>.</span><span class=n>now</span> <span class=o>!=</span> <span class=bp>self</span><span class=o>.</span><span class=n>max</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>now</span> <span class=o>+=</span> <span class=bp>self</span><span class=o>.</span><span class=n>inc</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>now</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>StopIteration</span>

    <span class=k>def</span> <span class=fm>__iter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=c1># 顺序迭代</span>
        <span class=k>return</span> <span class=bp>self</span>

    <span class=k>def</span> <span class=fm>__reversed__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=c1># 逆序迭代</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>inc</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>max</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>now</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>now</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>max</span><span class=o>+</span><span class=mi>1</span>
        <span class=k>return</span> <span class=bp>self</span>

<span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>Range</span><span class=p>(</span><span class=mi>3</span><span class=p>):</span> 
    <span class=c1># 输出 1 2 3</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>

<span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>reversed</span><span class=p>(</span><span class=n>Range</span><span class=p>(</span><span class=mi>3</span><span class=p>)):</span>
    <span class=c1># 输出 3 2 1</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>j</span><span class=p>)</span>
</code></pre></div> <h3 id=_14>描述器<a class=headerlink href=#_14 title="Permanent link">¶</a></h3> <p>实现了<code>__get__</code>, <code>__set__</code>和<code>__delete__</code>三个方法中的任意一个的对象称为描述器。他的主要作用是充当另外一个拥有者类的一个可变属性。</p> <p>例如： </p><div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>os</span>

<span class=k>class</span> <span class=nc>DirectorySize</span><span class=p>:</span>
<span class=w>    </span><span class=sd>"""描述器"""</span>
    <span class=k>def</span> <span class=fm>__get__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>obj</span><span class=p>,</span> <span class=n>objtype</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=n>obj</span><span class=o>.</span><span class=n>dirname</span><span class=p>))</span>

<span class=k>class</span> <span class=nc>Directory</span><span class=p>:</span>
    <span class=n>size</span> <span class=o>=</span> <span class=n>DirectorySize</span><span class=p>()</span> <span class=c1># Descriptor instance           </span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>dirname</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>dirname</span> <span class=o>=</span> <span class=n>dirname</span>  <span class=c1># Regular instance attribute</span>
</code></pre></div> <p>这个例子中，<code>Directory.size</code>就是一个根据<code>dirname</code>来动态变化的属性。</p> <p>更多描述器的使用指南<a href=https://docs.python.org/zh-cn/3/howto/descriptor.html>参见官网</a>。</p> <h3 id=_15>容器<a class=headerlink href=#_15 title="Permanent link">¶</a></h3> <blockquote> <p>一个典型的例子就是python内置的字典</p> </blockquote> <ul> <li><code>__len__</code>定义了<code>len(object)</code>的行为，通常我们会返回容器的大小。</li> <li><code>__length_hint__</code>，定义了一个长度的估计值，实现这个估计的方法可以提高性能。</li> <li><code>__getitem__</code>定义了<code>[key]</code>这一取值操作符的行为。</li> <li><code>__setitem__</code>则定义了对象在等号左侧时<code>object[key] =</code>的赋值行为。</li> <li><code>__delitem__</code>定义了<code>del object[key]</code>这样删除内容的行为。</li> <li><code>__missing__</code>定义了找不到<code>key</code>时候的行为。</li> <li><code>__iter__</code>和<code>__reversed__</code>分别定义了顺序迭代和逆序迭代的行为。</li> <li><code>__contains__</code>定义了成员检测操作符<code>in</code>的行为。</li> </ul> <div class="admonition info"> <p class=admonition-title>切片的行为</p> <p>实际上切片的行为也是通过<code>__getitem__</code>、<code>__setitem__</code>和<code>__delitem__</code>这三个方法定义的。</p> <p>以下形式的调用 </p><div class=highlight><pre><span></span><code><span class=n>a</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=n>b</span>
</code></pre></div> 会被解释器为转写为 <div class=highlight><pre><span></span><code><span class=n>a</span><span class=p>[</span><span class=nb>slice</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=kc>None</span><span class=p>)]</span> <span class=o>=</span> <span class=n>b</span>
</code></pre></div> 只要在这三个魔法方法里实现对<code>slice</code>参数对支持就行了。 <p>特别的，<code>...</code>在python中和<code>Ellipsis</code>是完全相同的，要在切片中定义这个参数的行为就需要特别判断一下。</p> </div> <div class="admonition example"> <p class=admonition-title>pandas.DataFrame的花式索引</p> <p>如果你用过pandas那么一定会感叹于各种花式索引的便利。</p> <p>你可以使用以下的索引方式： </p><div class=highlight><pre><span></span><code><span class=n>df</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>

<span class=n>df</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>key</span><span class=p>,</span> <span class=o>...</span><span class=p>]</span>

<span class=n>df</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=n>key</span><span class=p>,</span> <span class=o>...</span><span class=p>]</span>
</code></pre></div> <p>传入的参数也是很多样的。</p> <p>读者可以自行思考这些索引的实现方式。</p> </div> <p>其他形式以此类推。略去的切片项总是以 None 补全。</p> <h3 id=_16>上下文管理器<a class=headerlink href=#_16 title="Permanent link">¶</a></h3> <blockquote> <p>一个典型的例子是python的<code>open</code>函数</p> </blockquote> <p>定义了<code>__enter__(self)</code>和<code>__exit__(self, exc_type, exc_value, traceback)</code>的类是一个上下文管理器，可以在<code>with</code>语句中使用。</p> <div class=highlight><pre><span></span><code><span class=k>with</span> <span class=n>ContextManager</span><span class=p>()</span> <span class=k>as</span> <span class=n>c</span><span class=p>:</span>
    <span class=c1># with 语句会首先调用__enter__，把返回值赋值给as后的变量</span>
    <span class=k>pass</span>
<span class=c1># 语句结束后运行__exit__</span>
<span class=c1># 如果没有异常，三个参数都是None</span>
</code></pre></div> <h3 id=_17>可调用对象<a class=headerlink href=#_17 title="Permanent link">¶</a></h3> <blockquote> <p>很多python的内置数据类型都实现了这个方法，例如<code>list</code>再如<code>dict</code>，他们都可以当成一个函数来使用。</p> </blockquote> <p><code>__call__</code>定义了对象被调用时的行为：<code>object(args, ...)</code>。</p> <p>例如： </p><div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Hello</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>

    <span class=k>def</span> <span class=fm>__call__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>'Hello </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s1>.'</span><span class=p>)</span>

<span class=n>h</span> <span class=o>=</span> <span class=n>Hello</span><span class=p>(</span><span class=s1>'python'</span><span class=p>)</span>
<span class=n>h</span><span class=p>()</span> <span class=c1># print Hello python.</span>
</code></pre></div> <p>另外值得一提的是，既然类可以实现<code>__call__</code>从而变成<code>callable</code>对象，那么它自然可以作为一个装饰器，这就是类装饰器。</p> <p>例如： </p><div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>entryExit</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>f</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>f</span> <span class=o>=</span> <span class=n>f</span>
    <span class=k>def</span> <span class=fm>__call__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>"Entering"</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>f</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>f</span><span class=p>()</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>"Exited"</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>f</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>

<span class=nd>@entryExit</span>
<span class=k>def</span> <span class=nf>func</span><span class=p>():</span>
    <span class=nb>print</span><span class=p>(</span><span class=s2>"inside func()"</span><span class=p>)</span>

<span class=n>func</span><span class=p>()</span>
</code></pre></div> 这个函数调用会输出： <div class=highlight><pre><span></span><code>Entering func
inside func()
Exited func
</code></pre></div> <p>具体的原理读者可以回想我们对<code>@</code>语法糖的解释。</p> <h3 id=_18>协程行为<a class=headerlink href=#_18 title="Permanent link">¶</a></h3> <blockquote> <p>这部分比较专业，异步编程常用于网络通信工程，我只在写爬虫的时候偶尔能用上。</p> </blockquote> <p>实现了<code>__await__</code>的对象是可等待（awatiable）对象。</p> <blockquote> <p>使用<code>async def</code>定义的异步函数必须返回一个可等待对象。</p> </blockquote> <p><code>__aiter__</code>和<code>__anext__</code>定义了异步迭代器的行为。例如： </p><div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Reader</span><span class=p>:</span>
    <span class=k>async</span> <span class=k>def</span> <span class=nf>readline</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=o>...</span>

    <span class=k>def</span> <span class=fm>__aiter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span>

    <span class=k>async</span> <span class=k>def</span> <span class=fm>__anext__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>val</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>readline</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>val</span> <span class=o>==</span> <span class=sa>b</span><span class=s1>''</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>StopAsyncIteration</span>
        <span class=k>return</span> <span class=n>val</span>
</code></pre></div> <p><code>__aenter__</code>和<code>__aexit__</code>定义了异步上下文管理器的行为。例如： </p><div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>AsyncContextManager</span><span class=p>:</span>
    <span class=k>async</span> <span class=k>def</span> <span class=fm>__aenter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>await</span> <span class=n>log</span><span class=p>(</span><span class=s1>'entering context'</span><span class=p>)</span>

    <span class=k>async</span> <span class=k>def</span> <span class=fm>__aexit__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>exc_type</span><span class=p>,</span> <span class=n>exc</span><span class=p>,</span> <span class=n>tb</span><span class=p>):</span>
        <span class=k>await</span> <span class=n>log</span><span class=p>(</span><span class=s1>'exiting context'</span><span class=p>)</span>
</code></pre></div> <h3 id=generic-type>泛型（generic type）<a class=headerlink href=#generic-type title="Permanent link">¶</a></h3> <blockquote> <p><a href=https://peps.python.org/pep-0484/ >PEP 484 - Type Hints</a>规范了Python的类型提示。</p> </blockquote> <p>有种写法你肯的见过：<code>l: list[int] = [1,2,3]</code>。</p> <p>这行代码的type hint用到了<code>list[int]</code>，那么自然有一种语法可以实现类的<code>[]</code>操作符。</p> <p>它的实现方式是<code>__class_getitem__</code>方法，这个方法应当返回一个 <code>GenericAlias</code> 对象。</p> <p>当在类上定义时，<code>__class_getitem__</code> 会自动成为类方法。 因此，当它被定义时没有必要使用 <code>@classmethod</code> 来装饰。</p> <p>这个设计的目的就是允许标准库泛型类的运行时形参化以更方便地对这些类应用类型提示。</p> <h2 id=_19>控制类的创建<a class=headerlink href=#_19 title="Permanent link">¶</a></h2> <p>我们说Python万物皆对象，实际上类是元类的对象。</p> <p>默认情况下，类是使用元类<code>type()</code>来构建的，它的<code>__class__</code>是<code>type</code>。</p> <p>例如： </p><div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>A</span><span class=p>:</span>
    <span class=k>pass</span>
</code></pre></div> 实际上和 <div class=highlight><pre><span></span><code><span class=n>A</span> <span class=o>=</span> <span class=nb>type</span><span class=p>(</span><span class=s2>"A"</span><span class=p>,</span> <span class=p>(),</span> <span class=p>{})</span>
</code></pre></div> 是等价的。 <p>当一个类定义（<code>class</code>语块）被执行时，将发生以下步骤:</p> <ol> <li>调用基类的<code>__mro_entries__</code>方法，解析 MRO 条目；</li> <li>确定适当的元类；<ul> <li>如果没有基类且没有显式指定元类，则使用 <code>type()</code>；</li> <li>如果给出一个显式元类而且 不是 <code>type()</code> 的实例，则其会被直接用作元类；</li> <li>如果给出一个 <code>type()</code> 的实例作为显式元类，或是定义了基类，则使用最近派生的元类。</li> </ul> </li> <li>调用元类的<code>__prepare__</code>方法，准备类命名空间；</li> <li>执行类定义的主体（类似于<code>exec</code>类定义的所有代码）；</li> <li>调用元类的<code>__new__</code>方法，创建类对象。</li> </ol> <h3 id=_20>父类<a class=headerlink href=#_20 title="Permanent link">¶</a></h3> <p>当一个类继承另一个类时，会在这个父类上调用 <code>__init_subclass__()</code>。 这样，就使得编写改变子类行为的类成为可能。</p> <p>例如： </p><div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Philosopher</span><span class=p>:</span>
    <span class=k>def</span> <span class=nf>__init_subclass__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=o>/</span><span class=p>,</span> <span class=n>default_name</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>__init_subclass__</span><span class=p>(</span><span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=bp>cls</span><span class=o>.</span><span class=n>default_name</span> <span class=o>=</span> <span class=n>default_name</span>

<span class=k>class</span> <span class=nc>AustralianPhilosopher</span><span class=p>(</span><span class=n>Philosopher</span><span class=p>,</span> <span class=n>default_name</span><span class=o>=</span><span class=s2>"Bruce"</span><span class=p>):</span>
    <span class=k>pass</span>
</code></pre></div> <h3 id=_21>元类<a class=headerlink href=#_21 title="Permanent link">¶</a></h3> <p>元类可以实现的自定义行为就更多了。</p> <p>例如我们开头提到的，要求所有的方法命名都必须用小写字母: </p><div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Meta</span><span class=p>(</span><span class=nb>type</span><span class=p>):</span>
    <span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>bases</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
        <span class=n>flag</span> <span class=o>=</span> <span class=nb>all</span><span class=p>(</span><span class=n>name</span><span class=o>==</span><span class=n>name</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=nb>dict</span><span class=p>)</span>
        <span class=k>assert</span> <span class=n>flag</span><span class=p>,</span> <span class=s2>"CapitalName"</span>
        <span class=k>return</span> <span class=nb>type</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>bases</span><span class=p>,</span> <span class=nb>dict</span><span class=p>)</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>bases</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
        <span class=k>return</span> <span class=nb>type</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>bases</span><span class=p>,</span> <span class=nb>dict</span><span class=p>)</span>

    <span class=k>def</span> <span class=fm>__call__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwds</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>"meta_called"</span><span class=p>)</span>
        <span class=k>return</span> <span class=nb>type</span><span class=o>.</span><span class=fm>__call__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwds</span><span class=p>)</span>
</code></pre></div> 如果我们这样定义一个类： <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>MyClass</span><span class=p>(</span><span class=n>metaclass</span><span class=o>=</span><span class=n>Meta</span><span class=p>):</span>

    <span class=k>def</span> <span class=nf>Apple</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>pass</span>
</code></pre></div> 就会触发错误： <div class=highlight><pre><span></span><code><span class=n>Traceback</span> <span class=p>(</span><span class=n>most</span> <span class=n>recent</span> <span class=n>call</span> <span class=n>last</span><span class=p>):</span>
  <span class=n>File</span> <span class=s2>"/Users/yang/Desktop/example.py"</span><span class=p>,</span> <span class=n>line</span> <span class=mi>12</span><span class=p>,</span> <span class=ow>in</span> <span class=o>&lt;</span><span class=n>module</span><span class=o>&gt;</span>
    <span class=k>class</span> <span class=nc>MyClass</span><span class=p>(</span><span class=n>metaclass</span><span class=o>=</span><span class=n>Meta</span><span class=p>):</span>
  <span class=n>File</span> <span class=s2>"/Users/yang/Desktop/example.py"</span><span class=p>,</span> <span class=n>line</span> <span class=mi>3</span><span class=p>,</span> <span class=ow>in</span> <span class=fm>__new__</span>
    <span class=k>assert</span> <span class=nb>all</span><span class=p>(</span><span class=n>name</span><span class=o>==</span><span class=n>name</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=nb>dict</span><span class=p>),</span> <span class=s2>"CapitalName"</span>
<span class=ne>AssertionError</span><span class=p>:</span> <span class=n>CapitalName</span>
</code></pre></div> <p>把方法改成小写就可以正常定义了： </p><div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>MyClass</span><span class=p>(</span><span class=n>metaclass</span><span class=o>=</span><span class=n>Meta</span><span class=p>):</span>

    <span class=k>def</span> <span class=nf>apple</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>pass</span>

    <span class=k>def</span> <span class=fm>__call__</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>"subclass_called"</span><span class=p>)</span>
        <span class=k>pass</span>

<span class=n>obj</span> <span class=o>=</span> <span class=n>MyClass</span><span class=p>()</span>

<span class=n>obj</span><span class=p>()</span> 
<span class=c1># print meta_called then print subclass_called</span>
</code></pre></div> <p>指的注意的是，元类的<code>__call__</code>是在<code>MyClass</code>的对象被调用时才运行（如果子类也有<code>__call__</code>那么会先调用元类，在调用子类）。</p> <p>这个时候<code>MyClass.__class__</code>是<code>&lt;class '__main__.Meta'&gt;</code>，不再是常见的<code>&lt;class 'type'&gt;</code>。</p> <p>这也佐证了我们对类的叙述：类是元类的对象。</p> <h2 id=_22>写在最后<a class=headerlink href=#_22 title="Permanent link">¶</a></h2> <p>Python语法的介绍到此为止了。后面会介绍各种库（标准库和第三方库）的使用，以及一些具体的实战案例。</p> <p>我在本系列教程的第一篇文章说：Python是少儿编程的摇篮，我上二年级的小侄子都可以学会。</p> <p>好吧，我承认Python的语法如此庞杂，小侄子估计不太能搞定，大概只能入个门。</p> <p>奉劝各位读者莫要过分纠结这些fancy的语法，记住：你不会的语法全都对你没用，如果你哪天需要用了，自然就学会了。</p> <p>编程领域不适用"书到用时方恨少"，学得越多忘得越快，天天用的才是真的学到手的。</p> <p>此致。</p></div> <!-- 首页放一个标签云 --> <!-- Source file information --> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">February 2, 2024</span> <br> Created: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">January 13, 2023</span> </small> </div> <!-- Was this page helpful? --> <form class=md-feedback hidden name=feedback> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" data-md-value=1 title="This page was helpful" type=submit> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"></path></svg> </button> <button class="md-feedback__icon md-icon" data-md-value=0 title="This page could be improved" type=submit> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"></path></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help me improve this page by using the <a href="https://github.com/AIboy996/AIboy996.GitHub.io/issues/new/?title=[Feedback]+%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B+-+/en/Python/SeniorSyntax/OOP/" rel=noopener target=_blank>feedback form</a>. </div> </div> </div> </fieldset> </form> <!-- Comment system --> <h2 id=__comments>Comments</h2> <script async crossorigin=anonymous data-category=Announcements data-category-id=DIC_kwDOFgFkxM4CT4vh data-emit-metadata=1 data-input-position=top data-lang=zh-CN data-loading=lazy data-mapping=pathname data-reactions-enabled=0 data-repo=AIboy996/AIboy996.GitHub.io data-repo-id="MDEwOlJlcG9zaXRvcnkzNjkxOTAwODQ=" data-strict=1 data-theme=preferred_color_scheme src=https://giscus.app/client.js>
</script> <!-- Synchronize Giscus theme with palette --> <script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate" ? "dark" : "light"
      giscus.setAttribute("data-theme", theme) 
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate" ? "dark" : "light"

          /* Instruct Giscus to change theme */
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script> </article> </div> </div> <a class="md-top md-icon" data-md-component=top hidden href=#> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </a> </main> <footer class=md-footer> <nav aria-label=Footer class="md-footer__inner md-grid"> <a aria-label="Previous: 函数式编程" class="md-footer__link md-footer__link--prev" href=../functional_programming/ rel=prev> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> 函数式编程 </div> </div> </a> <a aria-label="Next: os" class="md-footer__link md-footer__link--next" href=../../StandardLibrary/os/ rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> os </div> </div> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> <a href=https://github.com/AIboy996/AIboy996.GitHub.io/blob/main/LICENSE>© 2022-2023 yangzhang</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a> </div> <div class=md-social> <a class=md-social__link href=https://github.com/AIboy996 rel=noopener target=_blank title="GitHub | AIboy996"> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </a> <a class=md-social__link href=https://space.bilibili.com/85735334 rel=noopener target=_blank title="BiliBili | 豆汁泡纳豆"> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0s16.1 2.868 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0c8.8 0 16.1 2.868 21.9 8.603 5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1zm-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8 6.3-6.5 9.7-14.3 10.1-23.5V173.8zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5-9.6 0-17.5-3.2-23.6-9.5-6.1-6.3-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2 6.3-6.3 13.2-9.6 23.3-10 9.2.4 17 3.7 23.3 10zm191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.1 6.3-14 9.5-23.6 9.5-9.6 0-17.4-3.2-23.6-9.5-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2 6.3-6.3 14.1-9.6 23.3-10 9.2.4 17 3.7 23.3 10z"></path></svg> </a> <a class=md-social__link href=https://bangumi.tv/anime/list/759154/do rel=noopener target=_blank title=bangumi追番列表> <svg viewbox="0 0 576 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M184.1 38.2c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L39 113c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0L95 101.2 150.1 40c8.9-9.9 24-10.7 33.9-1.8zm0 160c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L39 273c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0L95 261.2l55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zM256 96c0-17.7 14.3-32 32-32h224c17.7 0 32 14.3 32 32s-14.3 32-32 32H288c-17.7 0-32-14.3-32-32zm0 160c0-17.7 14.3-32 32-32h224c17.7 0 32 14.3 32 32s-14.3 32-32 32H288c-17.7 0-32-14.3-32-32zm-64 160c0-17.7 14.3-32 32-32h288c17.7 0 32 14.3 32 32s-14.3 32-32 32H224c-17.7 0-32-14.3-32-32zM80 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z"></path></svg> </a> <a class=md-social__link href=https://yangzhang.site/feed_rss_updated.xml rel=noopener target=_blank title=RSS> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M0 64c0-17.7 14.3-32 32-32 229.8 0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7 0 64zm128 352c0 35.3-28.7 64-64 64S0 451.3 0 416s28.7-64 64-64 64 28.7 64 64zM32 160c159.1 0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7 0-32-14.3-32-32s14.3-32 32-32z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-consent data-md-component=consent hidden id=__consent> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>I am using cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of posts and whether users can find what they're searching for. With your consent, all of this are helping me to make my site better.</p> <input class=md-toggle id=__settings type=checkbox> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input checked name=analytics type=checkbox> <span class=task-list-indicator></span> Google Analytics <label> </label></label></li> <li class=task-list-item> <label class=task-list-control> <input checked name=github type=checkbox> <span class=task-list-indicator></span> GitHub <label> </label></label></li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">Accept</button> <label class=md-button for=__settings>Manage settings</label> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script> <script id=__config type=application/json>{"base": "../../../..", "features": ["content.code.annotate", "navigation.tabs", "navigation.top", "navigation.indexes", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../../assets/javascripts/bundle.5a2dcb6a.min.js></script> <script src=../../../../assets/javascripts/color.js></script> <script src=../../../../assets/javascripts/termynal.js></script> <script src=../../../../assets/javascripts/gen_termynal.js></script> <script src=https://cdn.jsdelivr.net/gh/TRHX/CDN-for-itrhx.com@3.0.8/js/maodian.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>