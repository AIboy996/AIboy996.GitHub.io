<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content=张杨的个人网站 name=description><meta content="Yang Zhang" name=author><link href=https://yangzhang.site/en/Python/StandardLibrary/fractions/ rel=canonical><link href=../time/ rel=prev><link href=../../ThirdPartyLibrary/package_management/ rel=next><link href=../../../../feed_rss_created.xml rel=alternate title="RSS feed" type=application/rss+xml><link href=../../../../feed_rss_updated.xml rel=alternate title="RSS feed of updated content" type=application/rss+xml><link href=../../../../assets/images/favicon.png rel=icon><meta content="mkdocs-1.5.3, mkdocs-material-9.4.14" name=generator><title>fractions - yangzhang's Site</title><link href=../../../../assets/stylesheets/main.fad675c6.min.css rel=stylesheet><link href=../../../../assets/stylesheets/palette.356b1318.min.css rel=stylesheet><script async crossorigin=anonymous src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2353855407972667"></script><meta content=ca-pub-2353855407972667 name=google-adsense-account><!-- 数学公式格式支持，用html嵌入的方式支持数学公式自动换行，mathjax似乎要支持但是现在还没实现。
Automatic line breaking has not yet been implemented in MathJax version 3, 
but is high on our list for inclusion in a future release. --><script src=../../../../assets/javascripts/math.js></script><!-- 增加live photo的支持 --><link href=../../../../assets/stylesheets/thm.css rel=stylesheet><link href=../../../../assets/stylesheets/ai-summary.css rel=stylesheet><link href=../../../../assets/stylesheets/extra.css rel=stylesheet><link href=../../../../assets/stylesheets/termynal.css rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-8R9VRSN3S0"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-8R9VRSN3S0",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-8R9VRSN3S0",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link href=../../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src=../../../../assets/javascripts/glightbox.min.js></script></head> <body data-md-color-accent=orange data-md-color-primary=white data-md-color-scheme=placeholder dir=ltr> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#fractions> Skip to content </a> </div> <div data-md-component=announce> </div> <!--
  Copyright (c) 2016-2022 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine class according to configuration --> <!-- Header --> <header class=md-header data-md-component=header> <nav aria-label=header.title class="md-header__inner md-grid"> <!-- Link to home --> <a aria-label="yangzhang's Site" class="md-header__button md-logo" data-md-component=logo href=../../../.. title="yangzhang's Site"> <img alt=logo src=../../../../assets/images/summation.png> </a> <!-- Button to open drawer --> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <!-- Header title --> <div class=md-header__title> <span class=md-ellipsis> fractions </span> </div> <!-- Site language selector --> <div class=md-header__option> <div class=md-select> <button aria-label=select.language.title class="md-header__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"></path></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a class=md-select__link href=../../../../Python/StandardLibrary/fractions/ hreflang=zh> zh </a> </li> <li class=md-select__item> <a class=md-select__link href=./ hreflang=en> en </a> </li> </ul> </div> </div> </div> <!-- Button to open search modal --> <!-- Repository information --> <div class=md-header__source> <a class=md-source data-md-component=source href=https://github.com/AIboy996/AIboy996.github.io title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </div> <div class=md-source__repository> AIboy996.github.io </div> </a> </div> </nav> <!-- Navigation tabs (sticky) --> </header> <div class=md-container data-md-component=container> <nav aria-label=Tabs class=md-tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../About/ class=md-tabs__link> About </a> </li> <li class=md-tabs__item> <a href=../../../Note/ class=md-tabs__link> Note </a> </li> <li class=md-tabs__item> <a href=../../../../Blog/ class=md-tabs__link> Blog </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../ class=md-tabs__link> Python </a> </li> <li class=md-tabs__item> <a href=../../../Go/ class=md-tabs__link> Go </a> </li> <li class=md-tabs__item> <a href=../../../Project/ class=md-tabs__link> Project </a> </li> <li class=md-tabs__item> <a href=../../../Statistics/ class=md-tabs__link> Statistics </a> </li> <li class=md-tabs__item> <a href=../../../SomeMath/ class=md-tabs__link> SomeMath </a> </li> <li class=md-tabs__item> <a href=../../../Tags/ class=md-tabs__link> Tags </a> </li> <li class=md-tabs__item> <a href=../../../Playground/ class=md-tabs__link> Playground </a> </li> <li class=md-tabs__item> <a class=md-tabs__link href=https://www.travellings.cn/go.html> 开往 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary md-nav--lifted" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="yangzhang's Site" class="md-nav__button md-logo" data-md-component=logo href=../../../.. title="yangzhang's Site"> <img alt=logo src=../../../../assets/images/summation.png> </a> yangzhang's Site </label> <div class=md-nav__source> <a class=md-source data-md-component=source href=https://github.com/AIboy996/AIboy996.github.io title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </div> <div class=md-source__repository> AIboy996.github.io </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_1 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../About/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_1_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../About/about/ class=md-nav__link> <span class=md-ellipsis> About yangzhang.site </span> </a> </li> <li class=md-nav__item> <a href=../../../About/devices/ class=md-nav__link> <span class=md-ellipsis> My Devices </span> </a> </li> <li class=md-nav__item> <a href=../../../About/map/ class=md-nav__link> <span class=md-ellipsis> Travelled To </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../About/resume.html> <span class=md-ellipsis> Resume </span> </a> </li> <li class=md-nav__item> <a href=../../../About/log/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class=md-nav__item> <a href=../../../About/hobby/ class=md-nav__link> <span class=md-ellipsis> Hobbies </span> </a> </li> <li class=md-nav__item> <a href=../../../About/links/ class=md-nav__link> <span class=md-ellipsis> Links </span> </a> </li> <li class=md-nav__item> <a href=../../../About/ads/ class=md-nav__link> <span class=md-ellipsis> 广告 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Note/ class=md-nav__link> <span class=md-ellipsis> Note </span> </a> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_2_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Note </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/software/ class=md-nav__link> <span class=md-ellipsis> 装机必备 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/drug/ class=md-nav__link> <span class=md-ellipsis> 我不是药神 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_4 type=checkbox> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> 爬虫 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> 爬虫 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Spider/antispider/ class=md-nav__link> <span class=md-ellipsis> 反爬和反反爬 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_5 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Note/Fudan/ class=md-nav__link> <span class=md-ellipsis> 复旦 </span> </a> <label class=md-nav__link for=__nav_2_5 id=__nav_2_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_2_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> 复旦 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Fudan/campus/ class=md-nav__link> <span class=md-ellipsis> 复旦游览指北 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Fudan/fdulife/ class=md-nav__link> <span class=md-ellipsis> 复旦生活指南 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Fudan/script/ class=md-nav__link> <span class=md-ellipsis> 复旦的自动化生活 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Fudan/stuvpn/ class=md-nav__link> <span class=md-ellipsis> 复旦校园网VPN </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_6 type=checkbox> <label class=md-nav__link for=__nav_2_6 id=__nav_2_6_label tabindex=0> <span class=md-ellipsis> 书影音 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_6_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> 书影音 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Reading/huozhe/ class=md-nav__link> <span class=md-ellipsis> 《活着》 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Reading/wuyingdeng/ class=md-nav__link> <span class=md-ellipsis> 《无影灯》 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Reading/yourname/ class=md-nav__link> <span class=md-ellipsis> 「你的名字」 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Reading/summer/ class=md-nav__link> <span class=md-ellipsis> 「和Summer的五百天」 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_7 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Note/Mac/ class=md-nav__link> <span class=md-ellipsis> 我用Mac </span> </a> <label class=md-nav__link for=__nav_2_7 id=__nav_2_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_2_7_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> 我用Mac </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Mac/zsh/ class=md-nav__link> <span class=md-ellipsis> iTerm2+zsh </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Mac/sketchybar/ class=md-nav__link> <span class=md-ellipsis> sketchybar+yabai </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Mac/hammerspoon/ class=md-nav__link> <span class=md-ellipsis> Hammerspoon </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Mac/applescript/ class=md-nav__link> <span class=md-ellipsis> AppleScript </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Mac/quicklook/ class=md-nav__link> <span class=md-ellipsis> QuickLook </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_8 type=checkbox> <label class=md-nav__link for=__nav_2_8 id=__nav_2_8_label tabindex=0> <span class=md-ellipsis> 摄影 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_8_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_8> <span class="md-nav__icon md-icon"></span> 摄影 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Photography/terminology/ class=md-nav__link> <span class=md-ellipsis> 摄影术语 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Photography/Nikon_Z5/ class=md-nav__link> <span class=md-ellipsis> 尼康 Z5 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_9 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Note/Algorithm/ class=md-nav__link> <span class=md-ellipsis> Algorithm </span> </a> <label class=md-nav__link for=__nav_2_9 id=__nav_2_9_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_2_9_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_9> <span class="md-nav__icon md-icon"></span> Algorithm </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Algorithm/diffusion/ class=md-nav__link> <span class=md-ellipsis> Diffusion Models </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Algorithm/llm/ class=md-nav__link> <span class=md-ellipsis> Large Language Models </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Algorithm/reinforce/ class=md-nav__link> <span class=md-ellipsis> Reinforcement Learning </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Algorithm/search/ class=md-nav__link> <span class=md-ellipsis> 搜索 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Algorithm/advertising/ class=md-nav__link> <span class=md-ellipsis> 广告 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_9_7 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Note/Algorithm/redommendation/ class=md-nav__link> <span class=md-ellipsis> 推荐 </span> </a> <label class=md-nav__link for=__nav_2_9_7 id=__nav_2_9_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_2_9_7_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_9_7> <span class="md-nav__icon md-icon"></span> 推荐 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Algorithm/redommendation/intro/ class=md-nav__link> <span class=md-ellipsis> 推荐系统简介 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Algorithm/redommendation/ItemCF/ class=md-nav__link> <span class=md-ellipsis> ItemCF </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Algorithm/redommendation/Swing/ class=md-nav__link> <span class=md-ellipsis> Swing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_9_8 type=checkbox> <label class=md-nav__link for=__nav_2_9_8 id=__nav_2_9_8_label tabindex=0> <span class=md-ellipsis> Interview </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_9_8_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_9_8> <span class="md-nav__icon md-icon"></span> Interview </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Algorithm/interview/0309_pdd/ class=md-nav__link> <span class=md-ellipsis> 0309 pdd </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Algorithm/interview/0312_wechat/ class=md-nav__link> <span class=md-ellipsis> 0312 wechat </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Algorithm/interview/0315_pdd/ class=md-nav__link> <span class=md-ellipsis> 0315 pdd </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Algorithm/interview/0318_pdd/ class=md-nav__link> <span class=md-ellipsis> 0318 pdd </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Algorithm/interview/0330_pdd/ class=md-nav__link> <span class=md-ellipsis> 0330 pdd </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Algorithm/interview/0405_pdd/ class=md-nav__link> <span class=md-ellipsis> 0405 pdd </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_10 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Note/DataAnalysis/ class=md-nav__link> <span class=md-ellipsis> Data Analysis </span> </a> <label class=md-nav__link for=__nav_2_10 id=__nav_2_10_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_2_10_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_10> <span class="md-nav__icon md-icon"></span> Data Analysis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/DataAnalysis/ab_test/ class=md-nav__link> <span class=md-ellipsis> AB Test </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_10_3 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Note/DataAnalysis/casual/ class=md-nav__link> <span class=md-ellipsis> 因果推断 </span> </a> <label class=md-nav__link for=__nav_2_10_3 id=__nav_2_10_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_2_10_3_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_10_3> <span class="md-nav__icon md-icon"></span> 因果推断 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/DataAnalysis/casual/simpson/ class=md-nav__link> <span class=md-ellipsis> 辛普森悖论 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_10_4 type=checkbox> <label class=md-nav__link for=__nav_2_10_4 id=__nav_2_10_4_label tabindex=0> <span class=md-ellipsis> 数据库 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_10_4_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_10_4> <span class="md-nav__icon md-icon"></span> 数据库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/DataAnalysis/rel_db/ class=md-nav__link> <span class=md-ellipsis> 关系数据库 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/DataAnalysis/sql/ class=md-nav__link> <span class=md-ellipsis> SQL </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/DataAnalysis/sql_opt/ class=md-nav__link> <span class=md-ellipsis> SQL优化 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Note/DataAnalysis/hadoop/ class=md-nav__link> <span class=md-ellipsis> Hadoop </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_10_6 type=checkbox> <label class=md-nav__link for=__nav_2_10_6 id=__nav_2_10_6_label tabindex=0> <span class=md-ellipsis> Interview </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_10_6_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_10_6> <span class="md-nav__icon md-icon"></span> Interview </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/DataAnalysis/interview/0309_ant/ class=md-nav__link> <span class=md-ellipsis> 0309 ant </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/DataAnalysis/interview/0314_byte/ class=md-nav__link> <span class=md-ellipsis> 0314 byte </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/DataAnalysis/interview/0319_ant/ class=md-nav__link> <span class=md-ellipsis> 0319 ant </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/DataAnalysis/interview/0321_byte/ class=md-nav__link> <span class=md-ellipsis> 0321 byte </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_11 type=checkbox> <label class=md-nav__link for=__nav_2_11 id=__nav_2_11_label tabindex=0> <span class=md-ellipsis> Docker </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_11_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_11> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Docker/docker_intro/ class=md-nav__link> <span class=md-ellipsis> Docker简介 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Docker/docker_basic/ class=md-nav__link> <span class=md-ellipsis> Docker基础 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Docker/docker_senior/ class=md-nav__link> <span class=md-ellipsis> Docker进阶 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_12 type=checkbox> <label class=md-nav__link for=__nav_2_12 id=__nav_2_12_label tabindex=0> <span class=md-ellipsis> Gaming </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_12_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_12> <span class="md-nav__icon md-icon"></span> Gaming </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Gaming/bloodborne/ class=md-nav__link> <span class=md-ellipsis> 血源诅咒 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Gaming/eldenring/ class=md-nav__link> <span class=md-ellipsis> 艾尔登法环 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_13 type=checkbox> <label class=md-nav__link for=__nav_2_13 id=__nav_2_13_label tabindex=0> <span class=md-ellipsis> Git </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_13_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_13> <span class="md-nav__icon md-icon"></span> Git </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Git/git_everyday/ class=md-nav__link> <span class=md-ellipsis> git-everyday </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Git/git_server/ class=md-nav__link> <span class=md-ellipsis> git仓库托管 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_14 type=checkbox> <label class=md-nav__link for=__nav_2_14 id=__nav_2_14_label tabindex=0> <span class=md-ellipsis> Great Firewall </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_14_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_14> <span class="md-nav__icon md-icon"></span> Great Firewall </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/GFW/intro/ class=md-nav__link> <span class=md-ellipsis> 墙和梯子 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/GFW/client/ class=md-nav__link> <span class=md-ellipsis> 常见的梯子协议及客户端 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/GFW/server/ class=md-nav__link> <span class=md-ellipsis> 搭建一个代理服务器 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_15 type=checkbox> <label class=md-nav__link for=__nav_2_15 id=__nav_2_15_label tabindex=0> <span class=md-ellipsis> Jupyter </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_15_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_15> <span class="md-nav__icon md-icon"></span> Jupyter </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/jupyter/jupyter1/ class=md-nav__link> <span class=md-ellipsis> 介绍 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/jupyter/jupyter2/ class=md-nav__link> <span class=md-ellipsis> 基础使用 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/jupyter/jupyter3/ class=md-nav__link> <span class=md-ellipsis> 远程服务 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/jupyter/jupyter4/ class=md-nav__link> <span class=md-ellipsis> 进阶使用 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/jupyter/print/ class=md-nav__link> <span class=md-ellipsis> 打印 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_16 type=checkbox> <label class=md-nav__link for=__nav_2_16 id=__nav_2_16_label tabindex=0> <span class=md-ellipsis> LaTeX </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_16_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_16> <span class="md-nav__icon md-icon"></span> LaTeX </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/latex/basic_latex/ class=md-nav__link> <span class=md-ellipsis> LaTeX基础 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/latex/latex_cn/ class=md-nav__link> <span class=md-ellipsis> 使用LaTeX排版中文文档 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_17 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Note/Leetcode/ class=md-nav__link> <span class=md-ellipsis> Leetcode </span> </a> <label class=md-nav__link for=__nav_2_17 id=__nav_2_17_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_2_17_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_17> <span class="md-nav__icon md-icon"></span> Leetcode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Leetcode/001/ class=md-nav__link> <span class=md-ellipsis> 两数之和 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Leetcode/051/ class=md-nav__link> <span class=md-ellipsis> N皇后 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Leetcode/148/ class=md-nav__link> <span class=md-ellipsis> 排序链表 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Leetcode/206/ class=md-nav__link> <span class=md-ellipsis> 反转链表 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Leetcode/0309_pdd_2/ class=md-nav__link> <span class=md-ellipsis> 多多传送门 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Leetcode/0309_pdd_3/ class=md-nav__link> <span class=md-ellipsis> 多多读书 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Leetcode/0309_pdd_4/ class=md-nav__link> <span class=md-ellipsis> 剧院座位安排 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_18 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Note/Shell/ class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> <label class=md-nav__link for=__nav_2_18 id=__nav_2_18_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_2_18_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_18> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/Shell/man/ class=md-nav__link> <span class=md-ellipsis> Shell基础 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Shell/redirect/ class=md-nav__link> <span class=md-ellipsis> Shell重定向 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Shell/script/ class=md-nav__link> <span class=md-ellipsis> Shell脚本 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Shell/ssh/ class=md-nav__link> <span class=md-ellipsis> SSH </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Shell/sftp/ class=md-nav__link> <span class=md-ellipsis> 传输文件 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/Shell/tmux/ class=md-nav__link> <span class=md-ellipsis> Tmux </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_19 type=checkbox> <label class=md-nav__link for=__nav_2_19 id=__nav_2_19_label tabindex=0> <span class=md-ellipsis> Manim </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_19_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_19> <span class="md-nav__icon md-icon"></span> Manim </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/manim/hello/ class=md-nav__link> <span class=md-ellipsis> 初见manim </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_20 type=checkbox> <label class=md-nav__link for=__nav_2_20 id=__nav_2_20_label tabindex=0> <span class=md-ellipsis> MkDocs </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_20_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_20> <span class="md-nav__icon md-icon"></span> MkDocs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/mkdocs/theory/ class=md-nav__link> <span class=md-ellipsis> mkdocs介绍 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/mkdocs/practice/ class=md-nav__link> <span class=md-ellipsis> mkdocs实践 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/mkdocs/best_practices/ class=md-nav__link> <span class=md-ellipsis> Best practices </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/mkdocs/about_math/ class=md-nav__link> <span class=md-ellipsis> 写数学公式的坑 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/mkdocs/plugin/ class=md-nav__link> <span class=md-ellipsis> 控制插件加载 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/mkdocs/plugin_dev/ class=md-nav__link> <span class=md-ellipsis> mkdocs插件开发 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_21 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Note/NAS/ class=md-nav__link> <span class=md-ellipsis> NAS </span> </a> <label class=md-nav__link for=__nav_2_21 id=__nav_2_21_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_2_21_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_21> <span class="md-nav__icon md-icon"></span> NAS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/NAS/scrcpy/ class=md-nav__link> <span class=md-ellipsis> 远程控制安卓手机 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/NAS/https/ class=md-nav__link> <span class=md-ellipsis> SSL/TLS证书 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/NAS/oss/ class=md-nav__link> <span class=md-ellipsis> 自建图床 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/NAS/tg-bot/ class=md-nav__link> <span class=md-ellipsis> Telegram Bot </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/NAS/domain/ class=md-nav__link> <span class=md-ellipsis> 域名两三事 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/NAS/windows/ class=md-nav__link> <span class=md-ellipsis> 在Win上搭建NAS </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/NAS/wol/ class=md-nav__link> <span class=md-ellipsis> WOL </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/NAS/nodemation/ class=md-nav__link> <span class=md-ellipsis> 自动化Workflow </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/NAS/self-hosted-overleaf/ class=md-nav__link> <span class=md-ellipsis> 自建Overleaf </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/NAS/tautulli/ class=md-nav__link> <span class=md-ellipsis> Plex实时活动 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/NAS/media/ class=md-nav__link> <span class=md-ellipsis> 个人媒体库 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_22 type=checkbox> <label class=md-nav__link for=__nav_2_22 id=__nav_2_22_label tabindex=0> <span class=md-ellipsis> Nintendo Switch </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_22_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_22> <span class="md-nav__icon md-icon"></span> Nintendo Switch </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/NS/crack/ class=md-nav__link> <span class=md-ellipsis> NS破解 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/NS/stream/ class=md-nav__link> <span class=md-ellipsis> NS串流PS5 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/NS/nro/ class=md-nav__link> <span class=md-ellipsis> NS开发 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_23 type=checkbox> <label class=md-nav__link for=__nav_2_23 id=__nav_2_23_label tabindex=0> <span class=md-ellipsis> SAS </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_23_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_23> <span class="md-nav__icon md-icon"></span> SAS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/SAS/SAS_basic/ class=md-nav__link> <span class=md-ellipsis> SAS的基本操作 </span> </a> </li> <li class=md-nav__item> <a href=../../../Note/SAS/SAS_application/ class=md-nav__link> <span class=md-ellipsis> SAS的统计应用 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_24 type=checkbox> <label class=md-nav__link for=__nav_2_24 id=__nav_2_24_label tabindex=0> <span class=md-ellipsis> VSCode </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_24_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_24> <span class="md-nav__icon md-icon"></span> VSCode </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Note/vscode/modify_extension/ class=md-nav__link> <span class=md-ellipsis> 如何修改vscode扩展 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3 type=checkbox> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Blog </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../Blog/ class=md-nav__link> <span class=md-ellipsis> Blog/index </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_2 type=checkbox> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> 2025 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> 2025 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2025/hangzhou> <span class=md-ellipsis> Blog/2025/hangzhou </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2025/shwzoo> <span class=md-ellipsis> Blog/2025/shwzoo </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2025/haru> <span class=md-ellipsis> Blog/2025/haru </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2025/pi> <span class=md-ellipsis> Blog/2025/pi </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2025/travel_to_japan2> <span class=md-ellipsis> Blog/2025/travel_to_japan2 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2025/disney> <span class=md-ellipsis> Blog/2025/disney </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2025/tjupt> <span class=md-ellipsis> Blog/2025/tjupt </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_3 type=checkbox> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> 2024 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> 2024 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/2024_recall> <span class=md-ellipsis> Blog/2024/2024_recall </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/remove_tooth> <span class=md-ellipsis> Blog/2024/remove_tooth </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/birthday> <span class=md-ellipsis> Blog/2024/birthday </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/xiaoxia> <span class=md-ellipsis> Blog/2024/xiaoxia </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/cj2024> <span class=md-ellipsis> Blog/2024/cj2024 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/travel_to_xiamen> <span class=md-ellipsis> Blog/2024/travel_to_xiamen </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/chat> <span class=md-ellipsis> Blog/2024/chat </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/duanwu> <span class=md-ellipsis> Blog/2024/duanwu </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/fudan> <span class=md-ellipsis> Blog/2024/fudan </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/career> <span class=md-ellipsis> Blog/2024/career </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/travel_to_hk> <span class=md-ellipsis> Blog/2024/travel_to_hk </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/nomoney> <span class=md-ellipsis> Blog/2024/nomoney </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/no_argmax> <span class=md-ellipsis> Blog/2024/no_argmax </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/envelope> <span class=md-ellipsis> Blog/2024/envelope </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/new_blog> <span class=md-ellipsis> Blog/2024/new_blog </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/sakura> <span class=md-ellipsis> Blog/2024/sakura </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/winter> <span class=md-ellipsis> Blog/2024/winter </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2024/otaku> <span class=md-ellipsis> Blog/2024/otaku </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_4 type=checkbox> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> 2023 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> 2023 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2023/2023_summary> <span class=md-ellipsis> Blog/2023/2023_summary </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2023/bloom> <span class=md-ellipsis> Blog/2023/bloom </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2023/name> <span class=md-ellipsis> Blog/2023/name </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2023/graduation_pics> <span class=md-ellipsis> Blog/2023/graduation_pics </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2023/travel_to_japan> <span class=md-ellipsis> Blog/2023/travel_to_japan </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2023/thesis> <span class=md-ellipsis> Blog/2023/thesis </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2023/intern2> <span class=md-ellipsis> Blog/2023/intern2 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2023/music> <span class=md-ellipsis> Blog/2023/music </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2023/GEE> <span class=md-ellipsis> Blog/2023/GEE </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2023/curriculum> <span class=md-ellipsis> Blog/2023/curriculum </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2023/intern> <span class=md-ellipsis> Blog/2023/intern </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_5 type=checkbox> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class=md-ellipsis> 2022 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> 2022 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2022/2022_summary> <span class=md-ellipsis> Blog/2022/2022_summary </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_6 type=checkbox> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class=md-ellipsis> 2021 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_6_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> 2021 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2021/travel_to_chengdu> <span class=md-ellipsis> Blog/2021/travel_to_chengdu </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2021/mo> <span class=md-ellipsis> Blog/2021/mo </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_7 type=checkbox> <label class=md-nav__link for=__nav_3_7 id=__nav_3_7_label tabindex=0> <span class=md-ellipsis> 2020 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_7_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> 2020 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2020/2020_summary> <span class=md-ellipsis> Blog/2020/2020_summary </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2020/school> <span class=md-ellipsis> Blog/2020/school </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_8 type=checkbox> <label class=md-nav__link for=__nav_3_8 id=__nav_3_8_label tabindex=0> <span class=md-ellipsis> 2019 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_8_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> 2019 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2019/reply_2019> <span class=md-ellipsis> Blog/2019/reply_2019 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../Blog/2019/2019_summary> <span class=md-ellipsis> Blog/2019/2019_summary </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_4 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../ class=md-nav__link> <span class=md-ellipsis> Python </span> </a> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=true aria-labelledby=__nav_4_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../pre_python/ class=md-nav__link> <span class=md-ellipsis> 前置知识 </span> </a> </li> <li class=md-nav__item> <a href=../../command_line/ class=md-nav__link> <span class=md-ellipsis> 安装以及交互式运行 </span> </a> </li> <li class=md-nav__item> <a href=../../script/ class=md-nav__link> <span class=md-ellipsis> 脚本式运行和脚本书写规范 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_5 type=checkbox> <label class=md-nav__link for=__nav_4_5 id=__nav_4_5_label tabindex=0> <span class=md-ellipsis> 基础语法 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> 基础语法 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../BasicSyntax/builtin_class/ class=md-nav__link> <span class=md-ellipsis> 内置类 </span> </a> </li> <li class=md-nav__item> <a href=../../BasicSyntax/builtin_keyword/ class=md-nav__link> <span class=md-ellipsis> 内置关键字 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_6 type=checkbox> <label class=md-nav__link for=__nav_4_6 id=__nav_4_6_label tabindex=0> <span class=md-ellipsis> 高级语法 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_6_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> 高级语法 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../SeniorSyntax/functional_programming/ class=md-nav__link> <span class=md-ellipsis> 函数式编程 </span> </a> </li> <li class=md-nav__item> <a href=../../SeniorSyntax/OOP/ class=md-nav__link> <span class=md-ellipsis> 面向对象编程 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_4_7 type=checkbox> <label class=md-nav__link for=__nav_4_7 id=__nav_4_7_label tabindex=0> <span class=md-ellipsis> 标准库 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=true aria-labelledby=__nav_4_7_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_7> <span class="md-nav__icon md-icon"></span> 标准库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../doctest/ class=md-nav__link> <span class=md-ellipsis> doctest </span> </a> </li> <li class=md-nav__item> <a href=../os/ class=md-nav__link> <span class=md-ellipsis> os </span> </a> </li> <li class=md-nav__item> <a href=../re/ class=md-nav__link> <span class=md-ellipsis> re </span> </a> </li> <li class=md-nav__item> <a href=../time/ class=md-nav__link> <span class=md-ellipsis> time </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> fractions </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> fractions </span> </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#_1> <span class=md-ellipsis> 第一节：框架的搭建 </span> </a> <nav aria-label=第一节：框架的搭建 class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#fractions_1> <span class=md-ellipsis> fractions是干什么的 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_2> <span class=md-ellipsis> 作者、简介以及依赖 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_3> <span class=md-ellipsis> 常量定义 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_4> <span class=md-ellipsis> 主类定义和实例化方法 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_5> <span class=md-ellipsis> 其他的实例化方法 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_6> <span class=md-ellipsis> 装饰器的使用 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_7> <span class=md-ellipsis> 第二节：连分数 </span> </a> <nav aria-label=第二节：连分数 class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#_8> <span class=md-ellipsis> 分子和分母 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_9> <span class=md-ellipsis> 连分数 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_10> <span class=md-ellipsis> 实数的连分数表示方法 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_11> <span class=md-ellipsis> 渐进分数 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_12> <span class=md-ellipsis> 实数的最佳丢番图逼近 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_13> <span class=md-ellipsis> 第三节：分数的运算 </span> </a> <nav aria-label=第三节：分数的运算 class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#py> <span class=md-ellipsis> 用类的语言来理解py的一切 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_14> <span class=md-ellipsis> 运算符 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_15> <span class=md-ellipsis> 魔法方法 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_16> <span class=md-ellipsis> 分数的格式化输出 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_17> <span class=md-ellipsis> 分数的四则运算 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_25> <span class=md-ellipsis> 结语 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_8 type=checkbox> <label class=md-nav__link for=__nav_4_8 id=__nav_4_8_label tabindex=0> <span class=md-ellipsis> 第三方库 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_8_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_8> <span class="md-nav__icon md-icon"></span> 第三方库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/package_management/ class=md-nav__link> <span class=md-ellipsis> 包管理 </span> </a> </li> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/DIY/ class=md-nav__link> <span class=md-ellipsis> 自己写一个包 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_8_3 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../ThirdPartyLibrary/numpy/ class=md-nav__link> <span class=md-ellipsis> numpy </span> </a> <label class=md-nav__link for=__nav_4_8_3 id=__nav_4_8_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_8_3_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_4_8_3> <span class="md-nav__icon md-icon"></span> numpy </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/numpy/ndarray/ class=md-nav__link> <span class=md-ellipsis> 多维数组 </span> </a> </li> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/numpy/linalg/ class=md-nav__link> <span class=md-ellipsis> 线性代数 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_8_4 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../ThirdPartyLibrary/matplotlib/ class=md-nav__link> <span class=md-ellipsis> matplotlib </span> </a> <label class=md-nav__link for=__nav_4_8_4 id=__nav_4_8_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_8_4_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_4_8_4> <span class="md-nav__icon md-icon"></span> matplotlib </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/matplotlib/plt/ class=md-nav__link> <span class=md-ellipsis> 函数式 </span> </a> </li> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/matplotlib/subplots/ class=md-nav__link> <span class=md-ellipsis> 面向对象式 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_8_5 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../ThirdPartyLibrary/pandas/ class=md-nav__link> <span class=md-ellipsis> pandas </span> </a> <label class=md-nav__link for=__nav_4_8_5 id=__nav_4_8_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_8_5_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_4_8_5> <span class="md-nav__icon md-icon"></span> pandas </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/pandas/dataframe/ class=md-nav__link> <span class=md-ellipsis> 数据操作 </span> </a> </li> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/pandas/calculation/ class=md-nav__link> <span class=md-ellipsis> 数据约减 </span> </a> </li> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/pandas/plotting/ class=md-nav__link> <span class=md-ellipsis> 作图 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_8_6 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../ThirdPartyLibrary/pytorch/ class=md-nav__link> <span class=md-ellipsis> pytorch </span> </a> <label class=md-nav__link for=__nav_4_8_6 id=__nav_4_8_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_4_8_6_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_4_8_6> <span class="md-nav__icon md-icon"></span> pytorch </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/pytorch/quick_start/ class=md-nav__link> <span class=md-ellipsis> 快速入门 </span> </a> </li> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/pytorch/tensor/ class=md-nav__link> <span class=md-ellipsis> 张量基础 </span> </a> </li> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/pytorch/data/ class=md-nav__link> <span class=md-ellipsis> 数据加载 </span> </a> </li> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/pytorch/model/ class=md-nav__link> <span class=md-ellipsis> 搭建模型 </span> </a> </li> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/pytorch/optimizer/ class=md-nav__link> <span class=md-ellipsis> 训练模型 </span> </a> </li> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/pytorch/multi_gpu/ class=md-nav__link> <span class=md-ellipsis> 多卡训练 </span> </a> </li> <li class=md-nav__item> <a href=../../ThirdPartyLibrary/pytorch/compile/ class=md-nav__link> <span class=md-ellipsis> 编译优化 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_8_7 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../ThirdPartyLibrary/sklearn/ class=md-nav__link> <span class=md-ellipsis> sklearn </span> </a> </div> <nav aria-expanded=false aria-labelledby=__nav_4_8_7_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_4_8_7> <span class="md-nav__icon md-icon"></span> sklearn </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_9 type=checkbox> <label class=md-nav__link for=__nav_4_9 id=__nav_4_9_label tabindex=0> <span class=md-ellipsis> 应用案例（MISC） </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_9_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_9> <span class="md-nav__icon md-icon"></span> 应用案例（MISC） </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Example/email/ class=md-nav__link> <span class=md-ellipsis> 收发邮件 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_10 type=checkbox> <label class=md-nav__link for=__nav_4_10 id=__nav_4_10_label tabindex=0> <span class=md-ellipsis> 应用案例（爬虫） </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_10_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_10> <span class="md-nav__icon md-icon"></span> 应用案例（爬虫） </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Example/Spider/national_FDA/ class=md-nav__link> <span class=md-ellipsis> 国家药监局GSP认证信息 </span> </a> </li> <li class=md-nav__item> <a href=../../Example/Spider/local_FDA/ class=md-nav__link> <span class=md-ellipsis> 地方药监局GSP认证信息 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_11 type=checkbox> <label class=md-nav__link for=__nav_4_11 id=__nav_4_11_label tabindex=0> <span class=md-ellipsis> 应用案例（微软三件套） </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_11_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_11> <span class="md-nav__icon md-icon"></span> 应用案例（微软三件套） </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Example/Excel/csv2xlsx/ class=md-nav__link> <span class=md-ellipsis> 超大csv文件转xlsx文件 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Go/ class=md-nav__link> <span class=md-ellipsis> Go </span> </a> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_5_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Go </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Go/why_go/ class=md-nav__link> <span class=md-ellipsis> 为什么要学go？ </span> </a> </li> <li class=md-nav__item> <a href=../../../Go/go_project/ class=md-nav__link> <span class=md-ellipsis> go项目的组织形式 </span> </a> </li> <li class=md-nav__item> <a href=../../../Go/go_semicolons/ class=md-nav__link> <span class=md-ellipsis> go中的分号 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_6 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Project/ class=md-nav__link> <span class=md-ellipsis> Project </span> </a> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_6_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Project </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Project/dzd/ class=md-nav__link> <span class=md-ellipsis> dzd </span> </a> </li> <li class=md-nav__item> <a href=../../../Project/qrq/ class=md-nav__link> <span class=md-ellipsis> qrq </span> </a> </li> <li class=md-nav__item> <a href=../../../Project/npnn/ class=md-nav__link> <span class=md-ellipsis> npnn </span> </a> </li> <li class=md-nav__item> <a href=../../../Project/pymd/ class=md-nav__link> <span class=md-ellipsis> pymd </span> </a> </li> <li class=md-nav__item> <a href=../../../Project/plt-gallery/ class=md-nav__link> <span class=md-ellipsis> plt-gallery </span> </a> </li> <li class=md-nav__item> <a href=../../../Project/bilibili_poster/ class=md-nav__link> <span class=md-ellipsis> bilibili_poster </span> </a> </li> <li class=md-nav__item> <a href=../../../Project/high_school_math/ class=md-nav__link> <span class=md-ellipsis> 高中数学讲义 </span> </a> </li> <li class=md-nav__item> <a href=../../../Project/mkdocs-ai-summary/ class=md-nav__link> <span class=md-ellipsis> mkdocs-ai-summary </span> </a> </li> <li class=md-nav__item> <a href=../../../Project/AirPrint-with-Python/ class=md-nav__link> <span class=md-ellipsis> AirPrint-with-Python </span> </a> </li> <li class=md-nav__item> <a href=../../../Project/Course-Selection-System/ class=md-nav__link> <span class=md-ellipsis> Course-Selection-System </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_7 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Statistics/ class=md-nav__link> <span class=md-ellipsis> Statistics </span> </a> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_7_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Statistics </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_7_2 type=checkbox> <label class=md-nav__link for=__nav_7_2 id=__nav_7_2_label tabindex=0> <span class=md-ellipsis> 基础课 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_7_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_7_2> <span class="md-nav__icon md-icon"></span> 基础课 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Statistics/basic/Calculus/ class=md-nav__link> <span class=md-ellipsis> 数学分析 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/basic/Linear_Algebra/ class=md-nav__link> <span class=md-ellipsis> 线性代数 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/basic/Operations_Research/ class=md-nav__link> <span class=md-ellipsis> 运筹学 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/basic/Probability_Theory_and_Mathematical_Statistics/ class=md-nav__link> <span class=md-ellipsis> 概率论与数理统计 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/basic/Statistical_Software/ class=md-nav__link> <span class=md-ellipsis> 统计软件 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_7_3 type=checkbox> <label class=md-nav__link for=__nav_7_3 id=__nav_7_3_label tabindex=0> <span class=md-ellipsis> 专业课 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_7_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_7_3> <span class="md-nav__icon md-icon"></span> 专业课 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_7_3_1 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Statistics/specialized/statistical_inference/ class=md-nav__link> <span class=md-ellipsis> 统计推断 </span> </a> <label class=md-nav__link for=__nav_7_3_1 id=__nav_7_3_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_7_3_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_7_3_1> <span class="md-nav__icon md-icon"></span> 统计推断 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Statistics/specialized/statistical_inference/point_estimator/ class=md-nav__link> <span class=md-ellipsis> 点估计 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/specialized/statistical_inference/hypothesis_testing/ class=md-nav__link> <span class=md-ellipsis> 假设检验 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Statistics/specialized/Regression_Analysis/ class=md-nav__link> <span class=md-ellipsis> 回归分析 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/specialized/Time_Series_Analysis/ class=md-nav__link> <span class=md-ellipsis> 时间序列分析 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/specialized/Sampling/ class=md-nav__link> <span class=md-ellipsis> 抽样调查 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_7_3_5 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Statistics/specialized/multivariate_analysis/ class=md-nav__link> <span class=md-ellipsis> 多元分析 </span> </a> <label class=md-nav__link for=__nav_7_3_5 id=__nav_7_3_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_7_3_5_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_7_3_5> <span class="md-nav__icon md-icon"></span> 多元分析 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Statistics/specialized/multivariate_analysis/dim_reduction/ class=md-nav__link> <span class=md-ellipsis> 数据降维 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Statistics/specialized/Stochastic_Process/ class=md-nav__link> <span class=md-ellipsis> 随机过程 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/specialized/Categorical_Data_Analysis/ class=md-nav__link> <span class=md-ellipsis> 属性数据分析 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/specialized/Nonparametric_Statistics/ class=md-nav__link> <span class=md-ellipsis> 非参数统计 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_7_4 type=checkbox> <label class=md-nav__link for=__nav_7_4 id=__nav_7_4_label tabindex=0> <span class=md-ellipsis> 选修课 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_7_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_7_4> <span class="md-nav__icon md-icon"></span> 选修课 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Statistics/elective/Computational_Statistics/ class=md-nav__link> <span class=md-ellipsis> 统计计算 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_7_4_2 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Statistics/elective/Data_Mining/ class=md-nav__link> <span class=md-ellipsis> 数据挖掘 </span> </a> <label class=md-nav__link for=__nav_7_4_2 id=__nav_7_4_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_7_4_2_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_7_4_2> <span class="md-nav__icon md-icon"></span> 数据挖掘 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Statistics/elective/Data_Mining/bagging_and_boosting/ class=md-nav__link> <span class=md-ellipsis> Bagging &amp; Boosting </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Statistics/elective/Algorithm/ class=md-nav__link> <span class=md-ellipsis> 算法导论 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/elective/DSPython/ class=md-nav__link> <span class=md-ellipsis> 数据科学编程基础 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/elective/Database/ class=md-nav__link> <span class=md-ellipsis> 数据库与企业数据管理 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/elective/Pattern_Recognition_and_Machine_Learning/ class=md-nav__link> <span class=md-ellipsis> 模式识别和机器学习 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/elective/SeniorPython/ class=md-nav__link> <span class=md-ellipsis> 人工智能编程框架 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/elective/OpenMMLab/ class=md-nav__link> <span class=md-ellipsis> OpenMMLab实践 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_7_5 type=checkbox> <label class=md-nav__link for=__nav_7_5 id=__nav_7_5_label tabindex=0> <span class=md-ellipsis> 研究生课 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_7_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_7_5> <span class="md-nav__icon md-icon"></span> 研究生课 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Statistics/postgrad/Probability_Theory/ class=md-nav__link> <span class=md-ellipsis> 高等概率论 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/postgrad/Convex_Optimization/ class=md-nav__link> <span class=md-ellipsis> 凸优化 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/postgrad/Numerical_Analysis/ class=md-nav__link> <span class=md-ellipsis> 数值计算 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_7_5_4 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Statistics/postgrad/time_series/ class=md-nav__link> <span class=md-ellipsis> 时间序列 </span> </a> <label class=md-nav__link for=__nav_7_5_4 id=__nav_7_5_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_7_5_4_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_7_5_4> <span class="md-nav__icon md-icon"></span> 时间序列 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Statistics/postgrad/time_series/conditional_expectation/ class=md-nav__link> <span class=md-ellipsis> 条件期望 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/postgrad/time_series/kalman_filter/ class=md-nav__link> <span class=md-ellipsis> Kalman滤波 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Statistics/postgrad/Deep_Learning/ class=md-nav__link> <span class=md-ellipsis> 神经网络和深度学习 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/postgrad/Reinforcement_Learning/ class=md-nav__link> <span class=md-ellipsis> 人工智能与机器学习 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_7_5_7 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../Statistics/postgrad/computational_statistics/ class=md-nav__link> <span class=md-ellipsis> 统计计算 </span> </a> <label class=md-nav__link for=__nav_7_5_7 id=__nav_7_5_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_7_5_7_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_7_5_7> <span class="md-nav__icon md-icon"></span> 统计计算 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Statistics/postgrad/computational_statistics/varitional_inference/ class=md-nav__link> <span class=md-ellipsis> 变分推断 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/postgrad/computational_statistics/mcmc/ class=md-nav__link> <span class=md-ellipsis> MCMC </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Statistics/postgrad/risk_management/ class=md-nav__link> <span class=md-ellipsis> 金融风险 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/postgrad/journal_club/ class=md-nav__link> <span class=md-ellipsis> Journal Club </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_7_6 type=checkbox> <label class=md-nav__link for=__nav_7_6 id=__nav_7_6_label tabindex=0> <span class=md-ellipsis> 个人兴趣 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_7_6_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_7_6> <span class="md-nav__icon md-icon"></span> 个人兴趣 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Statistics/opencourse/cs61/ class=md-nav__link> <span class=md-ellipsis> UCB CS61 Series </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/opencourse/csapp/ class=md-nav__link> <span class=md-ellipsis> 深入理解计算机系统 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/opencourse/os/ class=md-nav__link> <span class=md-ellipsis> 操作系统 </span> </a> </li> <li class=md-nav__item> <a href=../../../Statistics/opencourse/computer_networking/ class=md-nav__link> <span class=md-ellipsis> 计算机网络 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_8 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../SomeMath/ class=md-nav__link> <span class=md-ellipsis> SomeMath </span> </a> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_8_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> SomeMath </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_8_2 type=checkbox> <label class=md-nav__link for=__nav_8_2 id=__nav_8_2_label tabindex=0> <span class=md-ellipsis> 数学分析 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_8_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_8_2> <span class="md-nav__icon md-icon"></span> 数学分析 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../SomeMath/real/pi/ class=md-nav__link> <span class=md-ellipsis> pi的无理性 </span> </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/real/rational_numbers_countable/ class=md-nav__link> <span class=md-ellipsis> 有理数集是可数的 </span> </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/real/taylor_expand/taylor_expand/ class=md-nav__link> <span class=md-ellipsis> 泰勒展开 </span> </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/real/derivatives/ class=md-nav__link> <span class=md-ellipsis> 导数漫谈 </span> </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/real/hyperbolic_function/ class=md-nav__link> <span class=md-ellipsis> 双曲函数 </span> </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/real/gamma_func/ class=md-nav__link> <span class=md-ellipsis> Gamma函数 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_8_2_7 type=checkbox> <label class=md-nav__link for=__nav_8_2_7 id=__nav_8_2_7_label tabindex=0> <span class=md-ellipsis> 习题 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_8_2_7_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_8_2_7> <span class="md-nav__icon md-icon"></span> 习题 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../SomeMath/real/problems/a_limit/ class=md-nav__link> <span class=md-ellipsis> 一道极限题 </span> </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/real/problems/recall_high_school_math/ class=md-nav__link> <span class=md-ellipsis> 中等数学复健 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_8_3 type=checkbox> <label class=md-nav__link for=__nav_8_3 id=__nav_8_3_label tabindex=0> <span class=md-ellipsis> 复分析 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_8_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_8_3> <span class="md-nav__icon md-icon"></span> 复分析 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../SomeMath/complex/why_complex/ class=md-nav__link> <span class=md-ellipsis> 我们为什么需要复数 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_8_4 type=checkbox> <label class=md-nav__link for=__nav_8_4 id=__nav_8_4_label tabindex=0> <span class=md-ellipsis> 线性代数 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_8_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_8_4> <span class="md-nav__icon md-icon"></span> 线性代数 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../SomeMath/algebra/linear_differential_equation/ class=md-nav__link> <span class=md-ellipsis> 线性齐次差分方程 </span> </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/algebra/rot/ class=md-nav__link> <span class=md-ellipsis> 旋转变换矩阵 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_8_5 type=checkbox> <label class=md-nav__link for=__nav_8_5 id=__nav_8_5_label tabindex=0> <span class=md-ellipsis> 初等数论 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_8_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_8_5> <span class="md-nav__icon md-icon"></span> 初等数论 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../SomeMath/number_theory/divisible/ class=md-nav__link> <span class=md-ellipsis> 整除理论 </span> </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/number_theory/modulo/ class=md-nav__link> <span class=md-ellipsis> 同余理论 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_8_6 type=checkbox> <label class=md-nav__link for=__nav_8_6 id=__nav_8_6_label tabindex=0> <span class=md-ellipsis> 抽象代数 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_8_6_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_8_6> <span class="md-nav__icon md-icon"></span> 抽象代数 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../SomeMath/algebra/field/ class=md-nav__link> <span class=md-ellipsis> 域和线性空间 </span> </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/algebra/constructible_number/ class=md-nav__link> <span class=md-ellipsis> 规矩数 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_8_7 type=checkbox> <label class=md-nav__link for=__nav_8_7 id=__nav_8_7_label tabindex=0> <span class=md-ellipsis> 概率论 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_8_7_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_8_7> <span class="md-nav__icon md-icon"></span> 概率论 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../SomeMath/prob/37rule/ class=md-nav__link> <span class=md-ellipsis> 秘书问题 </span> </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/prob/crit/ class=md-nav__link> <span class=md-ellipsis> 暴击率补偿问题 </span> </a> </li> <li class=md-nav__item> <a href=../../../SomeMath/prob/Montmort/ class=md-nav__link> <span class=md-ellipsis> Montmort问题 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../Tags/ class=md-nav__link> <span class=md-ellipsis> Tags </span> </a> </li> <li class=md-nav__item> <a href=../../../Playground/ class=md-nav__link> <span class=md-ellipsis> Playground </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=https://www.travellings.cn/go.html> <span class=md-ellipsis> 开往 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#_1> <span class=md-ellipsis> 第一节：框架的搭建 </span> </a> <nav aria-label=第一节：框架的搭建 class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#fractions_1> <span class=md-ellipsis> fractions是干什么的 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_2> <span class=md-ellipsis> 作者、简介以及依赖 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_3> <span class=md-ellipsis> 常量定义 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_4> <span class=md-ellipsis> 主类定义和实例化方法 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_5> <span class=md-ellipsis> 其他的实例化方法 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_6> <span class=md-ellipsis> 装饰器的使用 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_7> <span class=md-ellipsis> 第二节：连分数 </span> </a> <nav aria-label=第二节：连分数 class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#_8> <span class=md-ellipsis> 分子和分母 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_9> <span class=md-ellipsis> 连分数 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_10> <span class=md-ellipsis> 实数的连分数表示方法 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_11> <span class=md-ellipsis> 渐进分数 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_12> <span class=md-ellipsis> 实数的最佳丢番图逼近 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_13> <span class=md-ellipsis> 第三节：分数的运算 </span> </a> <nav aria-label=第三节：分数的运算 class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#py> <span class=md-ellipsis> 用类的语言来理解py的一切 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_14> <span class=md-ellipsis> 运算符 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_15> <span class=md-ellipsis> 魔法方法 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_16> <span class=md-ellipsis> 分数的格式化输出 </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#_17> <span class=md-ellipsis> 分数的四则运算 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#_25> <span class=md-ellipsis> 结语 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <!-- Source file button --> <!-- 现在不再展示编辑按钮，因为根本用不到 --> <!-- <a href="https://github.dev/AIboy996/AIboy996.github.io/blob/main/docs/Python/StandardLibrary/fractions.md" title="Edit this page" class="md-content__button md-icon" >
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
</a> --> <a class="md-content__button md-icon" href=https://github.com/AIboy996/AIboy996.github.io/blob/main/docs/Python/StandardLibrary/fractions.md title="View source of this page"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"></path></svg> </a> <!-- Tags --> <!-- Determine whether to show tags --> <nav class=md-tags> <a class=md-tag href=/Tags#PyLib>PyLib</a> <a class=md-tag href=/Tags#读源码>读源码</a> </nav> <!--
  Hack: check whether the content contains a h1 headline. If it
  doesn't, the page title (or respectively site name) is used
  as the main headline.
--> <!-- Markdown content --> <div><h1 id=fractions>fractions<a class=headerlink href=#fractions title="Permanent link">¶</a></h1> <blockquote> <p>本文最初发在我的微信公众号：悖论14，现转载至此。</p> </blockquote> <p>如果你想学一点python，那跟着谁学最好呢？我认为是设计python的人，读一读标准库的源代码（特指用python实现的库），<strong>看看设计这门语言的人是如何使用它的</strong>，一定会受益匪浅。</p> <p>本文内容分为以下三节：</p> <ol> <li>框架的搭建</li> <li>连分数</li> <li>分数的运算</li> </ol> <h2 id=_1>第一节：框架的搭建<a class=headerlink href=#_1 title="Permanent link">¶</a></h2> <p>千万别害怕，读源代码听起来高深莫测，其实也就那么一回事儿。fractions的<a href=https://github.com/python/cpython/blob/3.13/Lib/fractions.py target=_blank>源代码文件</a>在Cpython的GitHub repo里可以直接看到。其实相当短，去掉注释的话只有400多行。</p> <p>今天我们将通过对<code>python 3.10.4</code>内置分数库<code>fractions</code>源代码的解读来介绍下列内容的相关知识</p> <ul> <li>python编程规范</li> <li>OOP基础知识</li> <li>类的魔法方法(magic method)</li> <li>类的实例化</li> <li>运算符重载</li> <li>装饰器(decorator)</li> </ul> <h3 id=fractions_1>fractions是干什么的<a class=headerlink href=#fractions_1 title="Permanent link">¶</a></h3> <blockquote> <p>The fractions module provides support for rational number arithmetic.</p> </blockquote> <p>简单来说就是在Python中，实现了对分数表示和运算的支持。直接举几个例子感受一下：</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span><span class=w> </span><span class=nn>fractions</span><span class=w> </span><span class=kn>import</span> <span class=n>Fraction</span> <span class=k>as</span> <span class=n>f</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>f</span><span class=p>(</span><span class=s1>'3/7'</span><span class=p>)</span> <span class=c1># 分数表示</span>
<span class=n>Fraction</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>7</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>f</span><span class=p>(</span><span class=s1>'3/7'</span><span class=p>)</span><span class=o>+</span><span class=n>f</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span> <span class=c1># 分数运算</span>
<span class=n>Fraction</span><span class=p>(</span><span class=mi>13</span><span class=p>,</span> <span class=mi>14</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>f</span><span class=p>(</span><span class=mf>0.71428571</span><span class=p>)</span><span class=o>.</span><span class=n>limit_denominator</span><span class=p>()</span> <span class=c1># 分数近似</span>
<span class=n>Fraction</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>7</span><span class=p>)</span>
</code></pre></div> <p>下面我们来看源代码，在你的python安装路径找到<code>Lib</code>文件夹下的<code>fractions.py</code>文件，这就是我们要找的源代码啦。</p> <p>值得注意的是我这里使用最新版的python也就是<code>python 3.10.4</code>内置的<code>fractions</code>源码，不同版本略有区别，总体上差别不大：</p> <blockquote> <p>Changed in version 3.2: The Fraction constructor now accepts float and decimal.Decimal instances.</p> <p>Changed in version 3.9: The math.gcd() function is now used to normalize the numerator and denominator. math.gcd() always return a int type. Previously, the GCD type depended on numerator and denominator.</p> </blockquote> <h3 id=_2>作者、简介以及依赖<a class=headerlink href=#_2 title="Permanent link">¶</a></h3> <div class=highlight><span class=filename>源代码片段1</span><pre><span></span><code><span class=c1># Originally contributed by Sjoerd Mullender.</span>
<span class=c1># Significantly modified by Jeffrey Yasskin &lt;jyasskin at gmail.com&gt;.</span>

<span class=sd>"""Fraction, infinite-precision, real numbers."""</span>
<span class=kn>from</span><span class=w> </span><span class=nn>decimal</span><span class=w> </span><span class=kn>import</span> <span class=n>Decimal</span>
<span class=kn>import</span><span class=w> </span><span class=nn>math</span>
<span class=kn>import</span><span class=w> </span><span class=nn>numbers</span>
<span class=kn>import</span><span class=w> </span><span class=nn>operator</span>
<span class=kn>import</span><span class=w> </span><span class=nn>re</span>
<span class=kn>import</span><span class=w> </span><span class=nn>sys</span>
</code></pre></div> <p>前两行标注了这个项目的发起人<code>Sjoerd Mullender</code>以及做出很大修改的人<code>Jeffrey Yasskin</code>.</p> <p>值得注意的是下面<code>三引号</code>里面的内容, 这部分内容有其特殊含义. 它是一个<code>.py</code>文件的<code>__doc__</code>, 一般是文件内容的说明文档(document).</p> <p>类似的, 在定义函数或者类的时候, 也可以在<code>def</code>和<code>class</code>关键字的下一行使用三引号为该对象添加<code>document</code>, 我们在写程序的时候也可以使用这种方式来添加说明文档, 增加程序的可读性.</p> <p>我们可以使用<code>__doc__</code>来访问一个对象的<code>document</code>.</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=kn>import</span><span class=w> </span><span class=nn>fractions</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>fractions</span><span class=o>.</span><span class=vm>__doc__</span>
<span class=s1>'Fraction, infinite-precision, real numbers.'</span>
</code></pre></div> <p>依赖的几个库大概功能介绍如下</p> <ul> <li><code>decimal</code>库是python的一个处理小数的库</li> <li><code>math</code>,<code>re</code>,<code>sys</code>比较常见,分别是数学库, 正则库以及系统库</li> <li><code>numbers</code>官方说法是<code>The abstract base classes making up the numeric tower.</code>一个比较底层的库.</li> <li><code>operator</code>是一个运算符库. <code>+</code>,<code>-</code>,<code>%</code>这类运算符都在该库中有定义.</li> </ul> <h3 id=_3>常量定义<a class=headerlink href=#_3 title="Permanent link">¶</a></h3> <p>为了方便查看, 我们去掉了所有的注释. 但是多写注释是一个必要的好习惯!</p> <p>源码中注释的比例往往是很高的, <code>fractions.py</code>源码748行, 去掉所有的注释后仅有423行, 注释量恐怖如斯.</p> <div class=highlight><span class=filename>源代码片段2</span><pre><span></span><code><span class=n>__all__</span> <span class=o>=</span> <span class=p>[</span><span class=s1>'Fraction'</span><span class=p>]</span>
<span class=n>_PyHASH_MODULUS</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>hash_info</span><span class=o>.</span><span class=n>modulus</span>
<span class=n>_PyHASH_INF</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>hash_info</span><span class=o>.</span><span class=n>inf</span>
<span class=n>_RATIONAL_FORMAT</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>r</span><span class=s2>"""</span>
<span class=s2>    \A\s*                      </span>
<span class=s2>    (?P&lt;sign&gt;[-+]?)            </span>
<span class=s2>    (?=\d|\.\d)                </span>
<span class=s2>    (?P&lt;num&gt;\d*)               </span>
<span class=s2>    (?:                        </span>
<span class=s2>       (?:/(?P&lt;denom&gt;\d+))?    </span>
<span class=s2>    |                          </span>
<span class=s2>       (?:\.(?P&lt;decimal&gt;\d*))? </span>
<span class=s2>       (?:E(?P&lt;exp&gt;[-+]?\d+))? </span>
<span class=s2>    )</span>
<span class=s2>    \s*\Z</span>
<span class=s2>"""</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>VERBOSE</span> <span class=o>|</span> <span class=n>re</span><span class=o>.</span><span class=n>IGNORECASE</span><span class=p>)</span>
</code></pre></div> <p>首先是<code>__all__</code>这个变量, 这是声明此文件中可调用的所有对象(更多时候这是为了声明一个库的所有子模块<code>submodule</code>). 可以理解为<code>from fractions import *</code>之后, 命名空间多出来的所有东西. 定义这一变量可以隐藏某些接口, 例如下面的用法</p> <div class=highlight><pre><span></span><code><span class=c1># tmp.py</span>
<span class=k>def</span><span class=w> </span><span class=nf>A</span><span class=p>():</span>
    <span class=k>pass</span>
<span class=k>class</span><span class=w> </span><span class=nc>B</span><span class=p>():</span>
    <span class=k>pass</span>
<span class=n>__all__</span> <span class=o>=</span> <span class=p>[</span><span class=s2>"B"</span><span class=p>]</span>
</code></pre></div> <p>该文件中定义了两个对象, 分别是函数<code>A</code>和类<code>B</code>, 但是我用<code>__all__</code>声明了只有<code>B</code>, 于是我在另外一个文件中<code>from tmp import *</code>的时候只会载入<code>B</code>:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span><span class=w> </span><span class=nn>tmp</span><span class=w> </span><span class=kn>import</span> <span class=o>*</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>print</span><span class=p>(</span><span class=nb>dir</span><span class=p>())</span>
<span class=p>[</span><span class=s1>'B'</span><span class=p>,</span> <span class=s1>'__annotations__'</span><span class=p>,</span> <span class=s1>'__builtins__'</span><span class=p>,</span> <span class=s1>'__cached__'</span><span class=p>,</span> <span class=s1>'__doc__'</span><span class=p>,</span> <span class=s1>'__file__'</span><span class=p>,</span> <span class=s1>'__loader__'</span><span class=p>,</span> <span class=s1>'__name__'</span><span class=p>,</span> <span class=s1>'__package__'</span><span class=p>,</span> <span class=s1>'__spec__'</span><span class=p>]</span>
</code></pre></div> <p>注意用双下划线开始和结束的变量一般都是有特殊用途的保留变量, 例如最常见的<code>__name__</code>, 就声明了该文件是以导入的方式运行还是以主文件运行.</p> <p>其次是<code>_PyHASH_MODULUS</code>和<code>_PyHASH_INF</code>, 分别是<code>hash</code>函数和<code>inf</code>的定义. 后续我们会看到它们的用法.</p> <p>最后是<code>_RATIONAL_FORMAT</code>这就是一个正则表达式, 它对应着各种分数的合法表达形式. 例如<code>2/3</code>, <code>0.5</code>等.</p> <h3 id=_4>主类定义和实例化方法<a class=headerlink href=#_4 title="Permanent link">¶</a></h3> <div class=highlight><span class=filename>源代码片段3</span><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>Fraction</span><span class=p>(</span><span class=n>numbers</span><span class=o>.</span><span class=n>Rational</span><span class=p>):</span>
    <span class=vm>__slots__</span> <span class=o>=</span> <span class=p>(</span><span class=s1>'_numerator'</span><span class=p>,</span> <span class=s1>'_denominator'</span><span class=p>)</span>
</code></pre></div> <p>这段代码使用<code>class</code>关键字声明了 Fraction的定义, 它继承于<code>numbers.Rational</code>. 也就是说它有<code>Rational</code>的属性和方法.</p> <p>然后我们又碰到了一个双下划线开头的变量<code>__slots__</code>, slot在英文里的意思是插槽之类的东西, 在这里的作用是声明<code>Fraction</code>类拥有的属性, 也就是分子(numerator)和分母(denominator).</p> <p>下面所有的源代码引用都是<code>Fraction</code>类中定义的方法, 本应该缩进一下, 但是为了美观就不做缩进了.</p> <div class=highlight><span class=filename>源代码片段4</span><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>numerator</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>denominator</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>*</span><span class=p>,</span> <span class=n>_normalize</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
    <span class=bp>self</span> <span class=o>=</span> <span class=nb>super</span><span class=p>(</span><span class=n>Fraction</span><span class=p>,</span> <span class=bp>cls</span><span class=p>)</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>denominator</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>巴拉巴拉</span>
    <span class=k>if</span> <span class=n>denominator</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ZeroDivisionError</span><span class=p>(</span><span class=s1>'Fraction(</span><span class=si>%s</span><span class=s1>, 0)'</span> <span class=o>%</span> <span class=n>numerator</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>_normalize</span><span class=p>:</span>
        <span class=n>g</span> <span class=o>=</span> <span class=n>math</span><span class=o>.</span><span class=n>gcd</span><span class=p>(</span><span class=n>numerator</span><span class=p>,</span> <span class=n>denominator</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>denominator</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
            <span class=n>g</span> <span class=o>=</span> <span class=o>-</span><span class=n>g</span>
        <span class=n>numerator</span> <span class=o>//=</span> <span class=n>g</span>
        <span class=n>denominator</span> <span class=o>//=</span> <span class=n>g</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_numerator</span> <span class=o>=</span> <span class=n>numerator</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_denominator</span> <span class=o>=</span> <span class=n>denominator</span>
    <span class=k>return</span> <span class=bp>self</span>
</code></pre></div> <p>这是类中第一个方法<code>__new__</code>, 和我们一般见到的<code>__init__</code>方法略有不同.</p> <p>这里我们需要理解类实例化的逻辑. 如果我们有一个<code>class</code>:</p> <div class=highlight><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>A</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
    <span class=k>pass</span>
</code></pre></div> <p>当我们实例化的时候:</p> <div class=highlight><pre><span></span><code><span class=n>a</span> <span class=o>=</span> <span class=n>A</span><span class=p>()</span>
</code></pre></div> <p>实际上背后的逻辑是:</p> <div class=highlight><pre><span></span><code><span class=n>a</span> <span class=o>=</span> <span class=n>A</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=o>...</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>...</span><span class=p>)</span>
</code></pre></div> <p>也就是说, 我们先使用<code>__new__</code>方法创建对象, 然后使用<code>__init__</code>初始化对象.</p> <p>注意所有python的类默认继承<code>object</code>, 如果我们没有重载相应的方法, 就默认使用<code>object</code>中定义的方法, 这也是为什么我们平时只定义<code>__init__</code>也可以成功创建实例.</p> <p>之所以这里使用<code>__new__</code>而不用<code>__init__</code>是因为我们想要实现一个不可变(<code>inmutable</code>)的类.</p> <p>该方法的其他内容就是处理不同的输入情况, 并且若有必要进行一定的正则化: 保持分母为正, 分子分母没有公约数.</p> <p>最终返回了<code>self</code>(self一词在class的内部一般代指类的实例), 从这一点也可以看出<code>__new__</code>的作用就是创建类的实例.</p> <h3 id=_5>其他的实例化方法<a class=headerlink href=#_5 title="Permanent link">¶</a></h3> <div class=highlight><span class=filename>源代码片段5</span><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>from_float</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>f</span><span class=p>):</span>
    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>f</span><span class=p>,</span> <span class=n>numbers</span><span class=o>.</span><span class=n>Integral</span><span class=p>):</span>
        <span class=o>...</span>
    <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span><span class=o>*</span><span class=n>f</span><span class=o>.</span><span class=n>as_integer_ratio</span><span class=p>())</span>
<span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>from_decimal</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>dec</span><span class=p>):</span>
    <span class=o>...</span>
    <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span><span class=o>*</span><span class=n>dec</span><span class=o>.</span><span class=n>as_integer_ratio</span><span class=p>())</span>
</code></pre></div> <p>这是<code>Fractions</code>类的第2,3个方法, 注意到它有一个修饰器<code>@classmethod</code>, 这表示他是一个实例化方法(可以用此方法创建类的实例).</p> <p>用法如下</p> <div class=highlight><pre><span></span><code><span class=n>f</span> <span class=o>=</span> <span class=n>Fractions</span><span class=o>.</span><span class=n>from_float</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>
</code></pre></div> <p>如果你理解了<code>__new__</code>方法, 那么这个方法本身不难理解, 这里补充一些装饰器的概念.</p> <h3 id=_6>装饰器的使用<a class=headerlink href=#_6 title="Permanent link">¶</a></h3> <p>装饰器在OOP中经常碰到, 例如</p> <ul> <li><code>@classmethod</code></li> <li><code>@staticmethod</code></li> <li><code>@property</code></li> <li><code>@property.setter</code></li> <li><code>@property.getter</code>等.</li> </ul> <p>我列举这五个分别是</p> <ul> <li>实例化方法</li> <li>静态方法</li> <li>属性方法</li> <li>属性的设置方法</li> <li>属性的获取方法</li> </ul> <p>它们各自怎么用这里不多说, 我们只要理解装饰器是如何工作的.</p> <p>当你<code>@decorator</code>的时候, 例如:</p> <div class=highlight><pre><span></span><code><span class=nd>@decorator</span>
<span class=k>def</span><span class=w> </span><span class=nf>func</span><span class=p>():</span>
    <span class=k>pass</span>
</code></pre></div> <p>完全等价于</p> <div class=highlight><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>func</span><span class=p>():</span>
    <span class=k>pass</span>
<span class=n>func</span> <span class=o>=</span> <span class=n>decorator</span><span class=p>(</span><span class=n>func</span><span class=p>())</span>
</code></pre></div> <p>注意我说完全等价于, 的的确确是完全等价于. 因为<code>@</code>这个用法只是一个语法糖(第一次听到这个词的时候觉得超级可爱), 是程序猿为了节约时间发明的一种简写方法.</p> <p>看到这样下面一个形式, 或许你已经猜到它的原理了</p> <div class=highlight><pre><span></span><code><span class=n>func</span> <span class=o>=</span> <span class=n>decorator</span><span class=p>(</span><span class=n>func</span><span class=p>)</span>
</code></pre></div> <p>装饰器, 器如其名, 就是在函数外层添加一个包装, 在数学中相当于复合函数.</p> <p>举个例子:</p> <div class=highlight><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>warn</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> is decorated"</span><span class=p>)</span>
    <span class=k>def</span><span class=w> </span><span class=nf>inner</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span><span class=o>**</span><span class=n>kargs</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>"位置参数:"</span><span class=p>,</span><span class=n>args</span><span class=p>)</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>"关键字参数:"</span><span class=p>,</span><span class=n>kargs</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span><span class=o>**</span><span class=n>kargs</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>inner</span>
<span class=nd>@warn</span>
<span class=k>def</span><span class=w> </span><span class=nf>calculate</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>,</span><span class=n>op</span><span class=p>):</span>
    <span class=k>return</span> <span class=nb>eval</span><span class=p>(</span><span class=sa>f</span><span class=s2>"</span><span class=si>{</span><span class=n>x</span><span class=si>}{</span><span class=n>op</span><span class=si>}{</span><span class=n>y</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</code></pre></div> <p>上述函数定义完之后, 会输出<code>calculate is decorated</code>, 这不难理解, 因为我们相当于运行了<code>calculate = warn(calculate)</code></p> <p>调用:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>calculate</span><span class=p>(</span><span class=s2>"4"</span><span class=p>,</span><span class=s2>"5"</span><span class=p>,</span><span class=n>op</span><span class=o>=</span><span class=s2>"+"</span><span class=p>)</span>
<span class=n>位置参数</span><span class=p>:</span> <span class=p>(</span><span class=s1>'4'</span><span class=p>,</span> <span class=s1>'5'</span><span class=p>)</span>
<span class=n>关键字参数</span><span class=p>:</span> <span class=p>{</span><span class=s1>'op'</span><span class=p>:</span> <span class=s1>'+'</span><span class=p>}</span>
<span class=mi>9</span>
</code></pre></div> <p>解析:</p> <p>这时候<code>calculate</code>已经被<code>warn</code>函数装饰成<code>inner</code>了, 我们调用它相当于在做下面的事情</p> <div class=highlight><pre><span></span><code><span class=n>inner</span><span class=p>(</span><span class=s2>"4"</span><span class=p>,</span><span class=s2>"5"</span><span class=p>,</span><span class=n>op</span><span class=o>=</span><span class=s2>"+"</span><span class=p>)</span>
</code></pre></div> <p>根据这个函数的定义, 这句话等价为:</p> <div class=highlight><pre><span></span><code><span class=nb>print</span><span class=p>(</span><span class=s2>"位置参数:"</span><span class=p>,[</span><span class=s2>"4"</span><span class=p>,</span><span class=s2>"5"</span><span class=p>])</span>
<span class=nb>print</span><span class=p>(</span><span class=s2>"关键字参数:"</span><span class=p>,{</span><span class=s2>"op"</span><span class=p>:</span><span class=s2>"+"</span><span class=p>})</span>
<span class=k>return</span> <span class=n>calculate</span><span class=p>(</span><span class=o>*</span><span class=p>[</span><span class=s2>"4"</span><span class=p>,</span><span class=s2>"5"</span><span class=p>],</span><span class=o>**</span><span class=p>{</span><span class=s2>"op"</span><span class=p>:</span><span class=s2>"+"</span><span class=p>})</span>
</code></pre></div> <p>使用装饰器我们可以做很多事情, 例如生成日志信息, 管理函数的输入等等. 熟悉之后非常好用!</p> <p>至此<code>Fractions</code>的框架已经搭建好了, 下面就需要实现实例间各种运算以及一些特殊的方法, 这些内容较为独立我们放到下一篇推文, 敬请期待.</p> <h2 id=_7>第二节：连分数<a class=headerlink href=#_7 title="Permanent link">¶</a></h2> <p>今天咱们接着来看fractions的源代码.</p> <p>上一篇推文已经看完了框架部分, 包括下面的部分</p> <ul> <li>docstring</li> <li>依赖库</li> <li>常量定义</li> <li><code>class</code>语句</li> <li><code>__new__</code>方法</li> <li>其他使用<code>@classmethod</code>装饰器的方法</li> </ul> <p>至此我们实际上已经可以<strong>用各种方法</strong>创建一个分数对象了:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span><span class=w> </span><span class=nn>fractions</span><span class=w> </span><span class=kn>import</span> <span class=n>Fraction</span> <span class=k>as</span> <span class=n>f</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>f</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>
<span class=n>Fraction</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
</code></pre></div> <p>下面我们来给这个分数类实现一些特性.</p> <blockquote> <p>为了方便归类展示, 后面引用源码的时候会做一定的顺序调整, 不影响程序的结构和功能.</p> </blockquote> <h3 id=_8>分子和分母<a class=headerlink href=#_8 title="Permanent link">¶</a></h3> <div class=highlight><span class=filename>源代码片段6</span><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>as_integer_ratio</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
    <span class=k>return</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_numerator</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_denominator</span><span class=p>)</span>
<span class=nd>@property</span>
<span class=k>def</span><span class=w> </span><span class=nf>numerator</span><span class=p>(</span><span class=n>a</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>a</span><span class=o>.</span><span class=n>_numerator</span>
<span class=nd>@property</span>
<span class=k>def</span><span class=w> </span><span class=nf>denominator</span><span class=p>(</span><span class=n>a</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>a</span><span class=o>.</span><span class=n>_denominator</span>
</code></pre></div> <p>这三个方法都是分子分母的接口, 第一个方法<code>as_integer_ratio</code>, 它返回元组<code>(numerator, denominator)</code>. 另外两个方法则分别返回分子和分母.</p> <p>注意<code>@property</code>装饰器, 这表明此方法是一个<code>属性</code>方法,在调用的时候不需要加<code>()</code>, 而一般的方法若不加括号则不能调用:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>f</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span><span class=o>.</span><span class=n>numerator</span> <span class=c1># 属性</span>
<span class=mi>1</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>f</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span><span class=o>.</span><span class=n>as_integer_ratio</span> <span class=c1># 一般方法</span>
<span class=o>&lt;</span><span class=n>bound</span> <span class=n>method</span> <span class=n>Fraction</span><span class=o>.</span><span class=n>as_integer_ratio</span> <span class=n>of</span> <span class=n>Fraction</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span><span class=o>&gt;</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>f</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span><span class=o>.</span><span class=n>as_integer_ratio</span><span class=p>()</span> <span class=c1># 一般方法()</span>
<span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
</code></pre></div> <p>下面还有另外一个重要的方法和分子分母相关</p> <div class=highlight><span class=filename>源代码片段7</span><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>limit_denominator</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>max_denominator</span><span class=o>=</span><span class=mi>1000000</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>max_denominator</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_denominator</span> <span class=o>&lt;=</span> <span class=n>max_denominator</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>Fraction</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
    <span class=n>p0</span><span class=p>,</span> <span class=n>q0</span><span class=p>,</span> <span class=n>p1</span><span class=p>,</span> <span class=n>q1</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span>
    <span class=n>n</span><span class=p>,</span> <span class=n>d</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_numerator</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_denominator</span>
    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
        <span class=n>a</span> <span class=o>=</span> <span class=n>n</span><span class=o>//</span><span class=n>d</span>
        <span class=n>q2</span> <span class=o>=</span> <span class=n>q0</span><span class=o>+</span><span class=n>a</span><span class=o>*</span><span class=n>q1</span>
        <span class=k>if</span> <span class=n>q2</span> <span class=o>&gt;</span> <span class=n>max_denominator</span><span class=p>:</span>
            <span class=k>break</span>
        <span class=n>p0</span><span class=p>,</span> <span class=n>q0</span><span class=p>,</span> <span class=n>p1</span><span class=p>,</span> <span class=n>q1</span> <span class=o>=</span> <span class=n>p1</span><span class=p>,</span> <span class=n>q1</span><span class=p>,</span> <span class=n>p0</span><span class=o>+</span><span class=n>a</span><span class=o>*</span><span class=n>p1</span><span class=p>,</span> <span class=n>q2</span>
        <span class=n>n</span><span class=p>,</span> <span class=n>d</span> <span class=o>=</span> <span class=n>d</span><span class=p>,</span> <span class=n>n</span><span class=o>-</span><span class=n>a</span><span class=o>*</span><span class=n>d</span>
    <span class=n>k</span> <span class=o>=</span> <span class=p>(</span><span class=n>max_denominator</span><span class=o>-</span><span class=n>q0</span><span class=p>)</span><span class=o>//</span><span class=n>q1</span>
    <span class=n>bound1</span> <span class=o>=</span> <span class=n>Fraction</span><span class=p>(</span><span class=n>p0</span><span class=o>+</span><span class=n>k</span><span class=o>*</span><span class=n>p1</span><span class=p>,</span> <span class=n>q0</span><span class=o>+</span><span class=n>k</span><span class=o>*</span><span class=n>q1</span><span class=p>)</span>
    <span class=n>bound2</span> <span class=o>=</span> <span class=n>Fraction</span><span class=p>(</span><span class=n>p1</span><span class=p>,</span> <span class=n>q1</span><span class=p>)</span>
    <span class=k>if</span> <span class=nb>abs</span><span class=p>(</span><span class=n>bound2</span> <span class=o>-</span> <span class=bp>self</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=nb>abs</span><span class=p>(</span><span class=n>bound1</span><span class=o>-</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>bound2</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>bound1</span>
</code></pre></div> <h3 id=_9>连分数<a class=headerlink href=#_9 title="Permanent link">¶</a></h3> <p>这个方法是全篇唯一涉及一点点数学以及算法的地方, 恰是我的兴趣点, 我们仔细唠一唠.</p> <p><strong>连分数理论</strong>是该算法的基础, 下文略作介绍, 主体内容参考苏联数学家辛钦的著作《连分数》, 也结合了WiKi的相关词条(<a href=https://zh.wikipedia.org/zh-hans/%E8%BF%9E%E5%88%86%E6%95%B0 target=_blank>连分数</a>, <a href=https://zh.wikipedia.org/zh-hans/%E4%B8%9F%E7%95%AA%E5%9C%96%E9%80%BC%E8%BF%91 target=_blank>丢番图逼近</a>).</p> <p>从数学史的角度来说, 研究连分数的动机源于想要有<strong>实数</strong>在“数学上纯粹”的表示, 可以说是一个数学家追求美的产物. 下面看完下面的论述, 想必你也能体会到它优雅的美.</p> <p>形如 $$ a=a_0+\frac{1}{a_1+\frac{1}{a_2+\frac{1}{a_3+...}}} $$ 这样的算式称为连分数. 一般简记为$[a_0;a_1,a_2,a_3,\cdots]$. 如果最终只有有限项分式, 那么称为有限连分数. 若有无限项, 则称之为无限连分数.</p> <p>一般我们都取$a_i\in \mathrm{N}$, 当然也可以取任意合法的实数. 无限连分数的收敛性由下列定理描述.</p> <div class="admonition theorem"> <p class=admonition-title>定理10</p> <p>连分数$[a_0;a_1,a_2,a_3,\cdots]$收敛的充分必要条件为 $$\sum_{n=0}^{\infty}a_n $$ 发散. </p> <p>摘自《连分数》苏联.辛钦.上海科学技术出版社.</p> </div> <h3 id=_10>实数的连分数表示方法<a class=headerlink href=#_10 title="Permanent link">¶</a></h3> <p>可以证明</p> <div class="admonition theorem"> <p class=admonition-title>定理14</p> <p>每一个实数a都对应着<strong>唯一</strong>的以这个数为值的连分数.如果数a是有理的, 那么这个连分数是有限的;如果它是无理的, 则是无限的. </p> <p>摘自《连分数》苏联.辛钦.上海科学技术出版社.</p> </div> <p>对于有理数来说, 此定理显然. 例如$\frac{10}{7}$</p> <ul> <li>首先分离整数部分$1+\frac{3}{7}$</li> <li>再对小数部分取倒数$\frac{7}{3}=2+\frac{1}{3}$</li> <li>回代得到</li> </ul> <p>$$ \frac{10}{7}=1+\frac{1}{2+\frac{1}{3}} $$ 实际上就是不断取倒数, 分离整数部分的迭代过程.</p> <p>无理数则对应一个无限连分数, 涉及到数列的极限. 我们举一例说明, 黄金分割比: $$ 1.618\cdots=\frac{1+\sqrt{5}}{2}=1+\frac{1}{1+\frac{1}{1+\frac{1}{1+\cdots}}} $$ </p><center><font><i>黄金分割用连分数来表达十分优雅!</i></font></center> <p>这个式子的证明也很简单, 我们给出连分数的递推式: $$ A_0=1,A_{n+1} = \frac{1}{A_n}+1 $$ 两边取极限得到: $$ A=\frac{1}{A}+1 $$ 即是 $$ A^2-A-1=0 $$ $A$显然大于1, 故$A=\frac{1+\sqrt{5}}{2}=a$.</p> <p>可以看到, 实际上我们是在用一个数列$A_k$来逼近$a$ $$ \left\{1,2,\frac{3}{2},\frac{5}{3},\frac{8}{5},\frac{13}{8},\frac{21}{13}\cdots\right\} $$ 逼近过程如图</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-width=100% href=../../../../Python/StandardLibrary/assets/fraction.png><img alt src=../../../../Python/StandardLibrary/assets/fraction.png></a></p> <p>这个定理可以说是"数学上纯粹"的核心体现. 连分数十分优雅地统一了有理数和无理数的表示方法, 和传统的小数表示思路截然不同但又有些共通之处.</p> <h3 id=_11>渐进分数<a class=headerlink href=#_11 title="Permanent link">¶</a></h3> <p>任意一个实数$[a_0;a_1,a_2,\cdots]$, 可以用$k$阶截断连分数$A_k = [a_0;a_1,a_2,\cdots,a_k]$来逼近, $A_k$称为$k$阶渐进分数. 如果用 $$ A_k=\frac{p_k}{q_k} $$ 来描述, 那么可以证明渐进分数的构成规律如下:</p> <div class="admonition theorem"> <p class=admonition-title>定理1</p> <p>对于任何$k\ge 1$ $$ p_k = a_kp_{k-1}+p_{k-2}\ q_k = a_kq_{k-1}+q_{k-2} $$ 其中$A_{-1}=1/0=p_{-1}/q_{-1}$ </p> <p>摘自《连分数》苏联.辛钦.上海科学技术出版社.</p> </div> <p>上述定理给出了如何从根据连分数写出渐进分数, 下面我们介绍$a_k$也就是连分数形式的求法(实际上求法已经在前文的例子$\frac{10}{7}$中出现了, 这里给出更加一般的描述).</p> <p>我们定义$[a_0;a_1,a_2,\cdots]$的余式为$$r_k=[a_k;a_{k+1},a_{k+2},\cdots]$$ 显然$r_0=a=[a_0;a_1,a_2,\cdots]$</p> <p>并且根据定义有 $$ \begin{aligned} &amp;r_{k}\\ =&amp;[a_k;a_{k+1},a_{k+2},\cdots]\\ =&amp;a_k+\frac{1}{a_{k+1}+\frac{1}{a_{k+2}\cdots}}\\ =&amp;a_k+\frac{1}{r_{k+1}}&gt; 1 \end{aligned} $$ 也就是$$r_{k}=a_k+\frac{1}{r_{k+1}}(k\ge0)$$ 上式向下取整得到 $$ a_{k}=\left\lfloor r_k \right\rfloor(k\ge0) $$ 那么对于任一实数$a$, 可以根据$a_0=\lfloor r_0\rfloor=\lfloor a\rfloor$求出连分数的首项, 进而可以求得$r_1=\frac{1}{a-a_0}$, 再由$a_1=\lfloor r_1\rfloor$可以求得$r_2=\frac{1}{r_1-a_1}$</p> <p>依此类推, 可以求得$a$的连分数表示$[a_0;a_1,a_2,\cdots]$. 这可以作为定理14一个粗略的证明.</p> <p>我们前面直接给出了黄金分割数的连分数形式, 但是没有推导, 下面则给出连分式的推导过程.</p> <p>$$ a=1.618\cdots=\frac{1+\sqrt{5}}{2} $$ </p><center> <table border=1> <tr> <th>k</th> <th>r_k</th> <th>a_k</th> </tr> <tr> <td>0</td> <td>1.61803</td> <td>1</td> </tr> <tr> <td>1</td> <td>1.61803</td> <td>1</td> </tr> <tr> <td>2</td> <td>1.61803</td> <td>1</td> </tr> </table> <p></p></center> <p>此后的$a_k$始终为$1$, 出现这种情况是由于余式递推过程中,$r_1=1/(1-r_0)=1/(1-a)=a$, 最后一个等式是由于黄金分割比是下式的一个根 $$ a=\frac{1}{a-1} $$ 所以$r_k\equiv a$, 从而$a_k\equiv 1$. 我们这里同时也给出黄金分割数的各阶渐进分数: $$ \left\{\frac{0}{1},\frac{1}{0},\frac{1}{1},\frac{2}{1},\frac{3}{2},\frac{5}{3},\frac{8}{5}\cdots\right\} $$ 不难发现, 分子分母各成一个斐波拉契数列, 实在是美轮美奂.</p> <p>渐进分数的定义可以类比小数 $$ a=\sum_{n=0}^{+\infty}\tilde{a}_n10^{-n} $$ 进行级数的截断可以得到保留$k$位有效数字的小数.</p> <p>值得一提的是:</p> <div class="admonition theorem"> <p class=admonition-title>定理11</p> <p>一切渐进分数都是既约分数. </p> <p>摘自《连分数》苏联.辛钦.上海科学技术出版社.</p> </div> <p>这也是连分数表示一个优良的性质.</p> <h3 id=_12>实数的最佳丢番图逼近<a class=headerlink href=#_12 title="Permanent link">¶</a></h3> <p>可以证明</p> <div class="admonition theorem"> <p class=admonition-title>定理15</p> <p>实数a的任何第一类最佳逼近都是这个数的连分数的渐进分数或者中位数. </p> <p>摘自《连分数》苏联.辛钦.上海科学技术出版社.</p> </div> <p>显然最佳逼近不是一个单独的数, 而是一系列数. 上述定理中第一类最佳逼近的定义如下:</p> <p>我们称$\frac{a}{b}(b&gt;0)$是$\alpha$的第一类最佳逼近, 若</p> <p>$$ 0\lt d\le b, \quad \frac{a}{b}\ne \frac{c}{d}\Rightarrow \left|\alpha - \frac{c}{d}\right|\gt \left|\alpha - \frac{a}{b}\right| $$</p> <p>也就是任何分母不超过$b$的分数都比$a/b$的逼近效果差.</p> <p>而中位数指的是 $$ \mathrm{mid}(\frac{a}{b},\frac{c}{d})=\frac{a+c}{b+d} $$ 它位于两个分数之间, 显然有 $$ \frac{a}{b}\le\frac{c}{d}\Rightarrow\frac{a}{b}\le\frac{a+c}{b+d}\le\frac{c}{d} $$ 这样总有点膈应, 我们废了那么大劲搞出来的连分数竟然有的时候不是最佳逼近, 但如果在第二类最佳逼近的意义下就可以得出<strong>更加完美的结论</strong>:</p> <div class="admonition theorem"> <p class=admonition-title>定理16</p> <p>实数的任何第二类最佳逼近是渐进分数. </p> <p>摘自《连分数》苏联.辛钦.上海科学技术出版社.</p> </div> <p>不过第二类最佳逼近的定义相对第一类就不那么直观:</p> <p>我们称$\frac{a}{b}(b&gt;0)$是$\alpha$的最佳逼近, 若 $$0\lt d\le b, \quad \frac{a}{b}\ne \frac{c}{d}\Rightarrow \left|d\alpha - c\right|\gt \left|b\alpha - a\right|$$</p> <p>我们举一个例子来说明第一类最佳逼近和第二类最佳逼近的区别与联系, 考虑自然对数底数$e$的最佳逼近: $$ \begin{aligned} &amp;e \approx 2.718281828459045\\ &amp;\mathrm{Type 1}\quad\left\{\frac{3}{1}, \frac{5}{2},\frac{8}{3}, \frac{11}{4}, \frac{49}{18}, \frac{68}{25}, \frac{87}{32},\frac{106}{39}\cdots\right\}\\ &amp;\mathrm{Type 2}\quad\left\{\frac{3}{1}, \frac{8}{3}, \frac{11}{4}, \frac{19}{7}, \frac{87}{32}, \frac{106}{39}\cdots\right\} \end{aligned} $$ 显然可见, 第二类最佳逼近更加"稀疏", 第二类最佳逼近必然是第一类最佳逼近, 但是第一类最佳逼近不必是第二类最佳逼近.</p> <p>我们这里的<code>limit_denominator()</code>方法采用的是第一类最佳逼近. 那么根据定理15, 最佳逼近要么在$A_{k+1}$取到, 要么在$A_{k}和A_{k+1}$的某个中位数取到.</p> <p>源码的注释中把那个中位数称为最佳下界逼近, 把$A_{k+1}$称为最佳上界逼近, 若$A_k\le a\le A_{k+1}$, 想来也是很合理的.</p> <p>具体实现方法是</p> <ul> <li>输入一个分式 <code>f = n/d</code></li> <li>初始化 ==&gt; 一阶为1/0, 二阶为0/1</li> <li>在一个while循环中不断递推求渐进分数<ul> <li>a = int(r) 实际上为 <code>a = n//d</code></li> <li>判断下一阶渐进分数的分母是否超出了用户设置的上限, 若超出了则跳出循环, 否则进入下一步</li> <li>利用<strong>定理1</strong>的内容更新逼近, 新的渐进分数为 $$ \frac{p_0+ap_1}{q_0+aq_1} $$</li> <li>更新余式r = 1/(r-a)也就是<code>n,d = d, n-a*d</code>.</li> <li>注意前面的代码把 n//d当作是int(r)所以需要在这里<strong>交换</strong>n和d</li> </ul> </li> <li>循环结束, 我们已经获得了合法分母的<strong>次高阶</strong>和<strong>最高阶</strong>渐进分数<code>p0/q0</code>和<code>p1/q1</code></li> <li>根据<strong>定理15</strong>, 下面考虑中位数<code>(p0+k*p1)/(q0+k*q1)</code>其中k取使得分母合法的最大整数, 也即使得分母尽量大(我的理解是分母越大近似能力越强, 故这么取中位数)</li> </ul> <p></p><center><s>实话说我想不出如何严格证明中位数这么取,实在才疏学浅</s></center> <ul> <li>比较下界(中位数)和上界(p1/q1)谁逼近得更好返回谁.</li> </ul> <p>可以验证上述算法, 对负值也成立, 因为符号仅影响$a_0$: $$ \frac{n}{d} = \lfloor \frac{n}{d} \rfloor+\frac{1}{r} $$ 当$n/d&lt;0$的时候, 向下取整$\lfloor \frac{n}{d} \rfloor=1+\lfloor -\frac{n}{d} \rfloor$, 也就是说$r&gt;0$, 例如$-1.5=-2+0.5$.</p> <p>至此, 整个<code>fractions</code>最有技术含量的一个函数就讲完了. 虽然讲了很多数学, 但是本质上的想法非常简单. 任何人都可以上手, 都可以从中深刻体会到数学的美感.</p> <p>非常推荐大家去读一下辛钦写的这本连分数, 书很薄差不多刚到100页, 读起来很爽:</p> <figure> <p><a class=glightbox data-desc-position=bottom data-height=auto data-width=100% href=../../../../Python/StandardLibrary/assets/%E8%BE%9B%E9%92%A6.jpg><img alt src=../../../../Python/StandardLibrary/assets/%E8%BE%9B%E9%92%A6.jpg width=400></a></p> <p><figurecaption>这是我从网上找的封面</figurecaption></p> </figure> <p>我手里有一个扫描版, 和图里的版本一致都是上海科学出版社的.</p> <p>书翻到最后一页, 还有一个小彩蛋:</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-width=100% href=../../../../Python/StandardLibrary/assets/price.png><img alt src=../../../../Python/StandardLibrary/assets/price.png></a></p> <p>这样一本好书, 原价0.46元, 现在直接免费了, 在公众号后台回复<strong>连分数</strong>获取全本, 还不快冲??</p> <p>啊, 营销的口吻真ex</p> <p>不过我们似乎还忘了点什么...源代码还没看完呢! 洋洋洒洒写了那么多, 推文又很长了, 还是放到下篇文章吧. 余下的内容都是一些常见魔法方法的定义, 讲起来很快. 还是敬请期待下周的推送!</p> <h2 id=_13>第三节：分数的运算<a class=headerlink href=#_13 title="Permanent link">¶</a></h2> <p>前两篇推文我们已经介绍了fractions库整个框架的搭建</p> <p><a href=./#_1>这里放链接</a></p> <p>以及一个重要的函数<code>limit_denominator</code></p> <p><a href=./#_7>这里放链接</a></p> <p>至此我们以及可以用各种方式创建<code>Fraction</code>类了, 还可以找到任一实数的最佳逼近分数. 接下来我们要实现分数之间的运算, 例如<code>a+b</code>,<code>a*b</code>,<code>a/b</code>等.</p> <p>我们先讲一点OOP的基础知识作为铺垫</p> <h3 id=py>用类的语言来理解py的一切<a class=headerlink href=#py title="Permanent link">¶</a></h3> <p>从最简单的一个例子说起</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=nb>print</span><span class=p>(</span><span class=s2>"Hello World!"</span><span class=p>)</span>
<span class=n>Hello</span> <span class=n>World</span><span class=err>!</span>
</code></pre></div> <p>从类的角度来看, <code>print</code>是一个<code>callable</code>的对象, 在<code>print</code>后面接着<code>()</code>就是在调用它的<code>__call__</code>方法, 传入的参数也就是该方法定义的参数.</p> <p>也就是说, 上面这段代码等价于</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=nb>print</span><span class=o>.</span><span class=fm>__call__</span><span class=p>(</span><span class=s2>"Hello World!"</span><span class=p>)</span>
<span class=n>Hello</span> <span class=n>World</span><span class=err>!</span>
</code></pre></div> <p>理解了这个你就可以实现一个<code>callable</code>的类了, 例如</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=k>class</span><span class=w> </span><span class=nc>ins</span><span class=p>:</span>
<span class=o>...</span>     <span class=k>def</span><span class=w> </span><span class=fm>__call__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=o>...</span>         <span class=nb>print</span><span class=p>(</span><span class=s2>"I am called."</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s1>''</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>ins</span><span class=p>()()</span>
<span class=n>I</span> <span class=n>am</span> <span class=n>called</span><span class=o>.</span>
</code></pre></div> <p>不过新的疑惑出现了, 为什么这里有两个<code>()</code>呢?</p> <p>实际上第一组<code>()</code>调用<code>__new__</code>方法, 返回了<code>ins</code>类的一个实例, 第二组<code>()</code>则调用了该实例的<code>__call__</code>方法.</p> <p>也就是说<code>ins()()</code>等价于下面的代码</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>ins</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=n>ins</span><span class=p>)</span><span class=o>.</span><span class=fm>__call__</span><span class=p>()</span>
<span class=n>I</span> <span class=n>am</span> <span class=n>called</span><span class=o>.</span>
</code></pre></div> <p><em>不过这样的解释还是不够底层, 不过我能力有限也就只能理解到这一层.</em></p> <h3 id=_14>运算符<a class=headerlink href=#_14 title="Permanent link">¶</a></h3> <p>上面这个例子和我们的分数类其实没太大的关系, 因为我们并不打算让分数<code>callable</code>. 我们要实现的是一系列的数学运算.</p> <p>最简单的就是加法了</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span>
<span class=mi>3</span>
</code></pre></div> <p>这等价于a左加b</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>a</span><span class=o>.</span><span class=fm>__add__</span><span class=p>(</span><span class=n>b</span><span class=p>)</span>
<span class=mi>3</span>
</code></pre></div> <p>或者是b右加a</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>b</span><span class=o>.</span><span class=fm>__radd__</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
<span class=mi>3</span>
</code></pre></div> <p>类似的有</p> <ul> <li><code>__sub__</code>定义减法(subtract), <code>a-b</code></li> <li><code>__mul__</code>定义乘法(multiply), <code>a*b</code></li> <li><code>__truediv__</code>定于除法(divide), <code>a/b</code></li> <li><code>__floordiv__</code>定义地板除(floor divide), <code>a//b</code></li> <li><code>__mod__</code>定义模余(modulo), <code>a%b</code></li> <li><code>__pow__</code>定义次幂(power), <code>a**b</code></li> </ul> <p>以上都是常见的算术二元运算符, 有的时候我们定义诸如<code>__rmul__</code>使得左侧运算和右侧运算具有不同的性质, 例如矩阵乘法就需要分别定义左乘和右乘.</p> <p>类似的还有逻辑运算符, 一元的运算符, 位运算符以及增强赋值, 列举如下:</p> <ul> <li>逻辑运算符</li> <li><code>__eq__</code>定义等于(equal to)<code>a==b</code></li> <li><code>__ne__</code>定义不等于(not equal to)<code>a!=b</code></li> <li><code>__le__</code>定义小于等于(less than or equal to)<code>a&lt;=b</code></li> <li><code>__ge__</code>定义大于等于(greater than or equal to)<code>a&gt;=b</code></li> <li><code>__lt__</code>定义小于(less than)<code>a&lt;b</code></li> <li><code>__gt__</code>定义大于(greater than)<code>a&gt;b</code></li> <li>一元运算符</li> <li><code>__pos__</code>定义取正(positive)<code>+a</code></li> <li><code>__neg__</code>定义取负(negative)<code>-a</code></li> <li>位运算符</li> <li><code>__invert__</code>定义取反(invert)<code>~a</code></li> <li><code>__or__</code>定义或<code>a | b</code></li> <li><code>__xor__</code>定义异或(exclusive or)<code>a ^ b</code></li> <li><code>__and__</code>定义与<code>a &amp; b</code></li> <li><code>__lshift__</code>定义左移<code>a &lt;&lt; b</code></li> <li><code>__rshift__</code>定义右移动<code>a &gt;&gt; b</code></li> <li>增强赋值</li> <li><code>__iadd__</code>定义加等于<code>a+=b</code></li> <li>类似的有<code>a-=b</code>,<code>a*=b</code>,<code>a/=b</code>,<code>a//=b</code>等</li> <li>以及一些位预算符<code>a&gt;&gt;=b</code>,<code>a&lt;&lt;=b</code>,<code>a&amp;=b</code></li> </ul> <p>其中位运算符是一个大坑, 千万要注意<code>&amp;</code>和<code>|</code>在python中是位运算符不是逻辑运算符, 1和2的与是0啊, 千万不要用这个来做逻辑判断.</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=mi>1</span> <span class=o>&amp;</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>0</span>
<span class=kc>True</span>
</code></pre></div> <p>这些运算符虽然看起来多, 但是命名都贴合实际用途, 记住了英文还是很好记下来的!</p> <h3 id=_15>魔法方法<a class=headerlink href=#_15 title="Permanent link">¶</a></h3> <p>严格来说上面的<code>__mul__</code>之类的也是魔法方法, 这种用前后双下划线的特殊方法在OOP中称为魔法方法. 是python保留的方法, 通常用于实现特殊的功能. 我们再来介绍几个常见的!</p> <h4 id=__str__><code>__str__</code><a class=headerlink href=#__str__ title="Permanent link">¶</a></h4> <p>不难发现, python几乎万物皆可<code>str()</code>, 你把任何一个东西放到str函数中都会得到一个什么输出. 就是因为他们都定义了<code>__str__</code>魔法方法, 例如</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=k>class</span><span class=w> </span><span class=nc>example</span><span class=p>:</span>
<span class=o>...</span>     <span class=k>def</span><span class=w> </span><span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=o>...</span>         <span class=k>return</span> <span class=s2>"str magic method!"</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>str</span><span class=p>(</span><span class=n>example</span><span class=p>())</span>
<span class=s1>'str magic method!'</span>
</code></pre></div> <h4 id=__repr__><code>__repr__</code><a class=headerlink href=#__repr__ title="Permanent link">¶</a></h4> <p>类似的, python万物皆可<code>print()</code>, 它输出的内容定义在<code>__repr__</code>方法中, repr是representation的缩写, 意为描述:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=k>class</span><span class=w> </span><span class=nc>example</span><span class=p>:</span>
<span class=o>...</span>      <span class=k>def</span><span class=w> </span><span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=o>...</span>          <span class=k>return</span> <span class=s2>"print magic method!"</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>print</span><span class=p>(</span><span class=n>example</span><span class=p>())</span>
<span class=nb>print</span> <span class=n>magic</span> <span class=n>method</span><span class=err>!</span>
</code></pre></div> <p>我们也可以显示调用<code>repr()</code>函数来得到representation内容</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=nb>repr</span><span class=p>(</span><span class=n>example</span><span class=p>())</span>
<span class=s1>'print magic method!'</span>
</code></pre></div> <h4 id=__getitem____setitem__slice><code>__getitem__</code>和<code>__setitem__</code>和<code>slice</code><a class=headerlink href=#__getitem____setitem__slice title="Permanent link">¶</a></h4> <p>我们似乎忘记了python亲儿子<code>list</code>, 作为python最常用的数据类型, <code>list</code>有很多语法现象</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>l</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>l</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=c1># getitem</span>
<span class=mi>1</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>l</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=mi>10</span> <span class=c1># setitem</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>l</span><span class=p>[::</span><span class=mi>2</span><span class=p>]</span> <span class=c1># slicing</span>
<span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>]</span>
</code></pre></div> <p><code>[]</code>是一种常见的运算符, 单独使用的时候, 它的作用是<code>getitem</code>, 也就是拿出指定的元素.</p> <p>如果放在赋值号的左侧那么就是<code>setitem</code>. 如果使用了<code>:</code>, 那么就可以一起性取出多个元素, 也就是所谓的slicing.</p> <p>注意<code>slice</code>在python中是一种数据类型(一个三元组, 包括start, stop以及step), 本身也是一个类, 我们可以用下面的方式实现slicing</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=k>class</span><span class=w> </span><span class=nc>example</span><span class=p>:</span>
<span class=o>...</span>     <span class=c1># 实现列表从1开始计数</span>
<span class=o>...</span>     <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>l</span><span class=p>):</span>
<span class=o>...</span>         <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=n>l</span>
<span class=o>...</span>     <span class=k>def</span><span class=w> </span><span class=fm>__getitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=o>...</span>         <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=nb>int</span><span class=p>):</span>
<span class=o>...</span>             <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>value</span><span class=p>[</span><span class=n>key</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
<span class=o>...</span>         <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=nb>slice</span><span class=p>):</span>
<span class=o>...</span>             <span class=n>a</span> <span class=o>=</span> <span class=n>key</span><span class=o>.</span><span class=n>start</span><span class=o>-</span><span class=mi>1</span>
<span class=o>...</span>             <span class=n>b</span> <span class=o>=</span> <span class=n>key</span><span class=o>.</span><span class=n>stop</span><span class=o>-</span><span class=mi>1</span>
<span class=o>...</span>             <span class=n>c</span> <span class=o>=</span> <span class=n>key</span><span class=o>.</span><span class=n>step</span>
<span class=o>...</span>             <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>value</span><span class=p>[</span><span class=n>a</span><span class=p>:</span><span class=n>b</span><span class=p>:</span><span class=n>c</span><span class=p>]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>e</span> <span class=o>=</span> <span class=n>example</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>])</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>print</span><span class=p>(</span><span class=n>e</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>5</span><span class=p>:</span><span class=mi>2</span><span class=p>],</span> <span class=n>e</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>],</span> <span class=n>e</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span> <span class=n>end</span><span class=o>=</span><span class=s1>''</span><span class=p>)</span>
<span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]</span> <span class=mi>2</span>
</code></pre></div> <p>下面这个例子可以帮你理解slice</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>][</span><span class=nb>slice</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>2</span><span class=p>)]</span>
<span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>][</span><span class=mi>0</span><span class=p>:</span><span class=mi>4</span><span class=p>:</span><span class=mi>2</span><span class=p>]</span>
<span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span>
</code></pre></div> <p>可以说, <code>[0:4:2]</code>这种写法也是一种语法糖, 为了简写而生, 实质上与<code>[slice(0,4,2)]</code>无异.</p> <p>另外提一嘴, 与之类似的还有一个特殊的保留字在切片的时候经常遇到, <code>...</code>与<code>Ellipsis</code>无异, 也是一种简写, 这在numpy数组的切片中经常遇到.</p> <ul> <li><code>__getitem__</code>定义<code>a[]</code>, 同时可以实现切片</li> <li><code>__setitem__</code>定义<code>a[] = b</code></li> </ul> <h4 id=dir><code>dir</code><a class=headerlink href=#dir title="Permanent link">¶</a></h4> <p>诸如此类的魔法方法太多太多了, 我就不再一一列举, 后面见到了再说. 这里介绍一个有用的内置函数, 每当遇到一个对象你都可以用<code>dir()</code>函数查看它的全部方法.</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span><span class=w> </span><span class=nn>fractions</span><span class=w> </span><span class=kn>import</span> <span class=n>Fraction</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>dir</span><span class=p>(</span><span class=n>Fraction</span><span class=p>)</span>
<span class=p>[</span><span class=s1>'__abs__'</span><span class=p>,</span> <span class=s1>'__abstractmethods__'</span><span class=p>,</span> <span class=s1>'__add__'</span><span class=p>,</span>
<span class=s1>'__bool__'</span><span class=p>,</span> <span class=s1>'__ceil__'</span><span class=p>,</span> <span class=s1>'__class__'</span><span class=p>,</span>
<span class=s1>'__complex__'</span><span class=p>,</span> <span class=s1>'__copy__'</span><span class=p>,</span> <span class=s1>'__deepcopy__'</span><span class=p>,</span>
<span class=s1>'__delattr__'</span><span class=p>,</span> <span class=s1>'__dir__'</span><span class=p>,</span> <span class=s1>'__divmod__'</span><span class=p>,</span>
<span class=s1>'__doc__'</span><span class=p>,</span> <span class=s1>'__eq__'</span><span class=p>,</span> <span class=s1>'__float__'</span><span class=p>,</span>
<span class=s1>'__floor__'</span><span class=p>,</span> <span class=s1>'__floordiv__'</span><span class=p>,</span> <span class=s1>'__format__'</span><span class=p>,</span>
<span class=s1>'__ge__'</span><span class=p>,</span> <span class=s1>'__getattribute__'</span><span class=p>,</span> <span class=s1>'__gt__'</span><span class=p>,</span> 
<span class=s1>'__hash__'</span><span class=p>,</span> <span class=s1>'__init__'</span><span class=p>,</span> <span class=s1>'__init_subclass__'</span><span class=p>,</span> 
<span class=s1>'__le__'</span><span class=p>,</span> <span class=s1>'__lt__'</span><span class=p>,</span> <span class=s1>'__mod__'</span><span class=p>,</span>
<span class=s1>'__module__'</span><span class=p>,</span> <span class=s1>'__mul__'</span><span class=p>,</span> <span class=s1>'__ne__'</span><span class=p>,</span>
<span class=s1>'__neg__'</span><span class=p>,</span> <span class=s1>'__new__'</span><span class=p>,</span> <span class=s1>'__pos__'</span><span class=p>,</span>
<span class=s1>'__pow__'</span><span class=p>,</span> <span class=s1>'__radd__'</span><span class=p>,</span> <span class=s1>'__rdivmod__'</span><span class=p>,</span> 
<span class=s1>'__reduce__'</span><span class=p>,</span> <span class=s1>'__reduce_ex__'</span><span class=p>,</span> <span class=s1>'__repr__'</span><span class=p>,</span> 
<span class=s1>'__rfloordiv__'</span><span class=p>,</span> <span class=s1>'__rmod__'</span><span class=p>,</span> <span class=s1>'__rmul__'</span><span class=p>,</span> 
<span class=s1>'__round__'</span><span class=p>,</span> <span class=s1>'__rpow__'</span><span class=p>,</span> <span class=s1>'__rsub__'</span><span class=p>,</span>
<span class=s1>'__rtruediv__'</span><span class=p>,</span> <span class=s1>'__setattr__'</span><span class=p>,</span> <span class=s1>'__sizeof__'</span><span class=p>,</span>
<span class=s1>'__slots__'</span><span class=p>,</span> <span class=s1>'__str__'</span><span class=p>,</span> <span class=s1>'__sub__'</span><span class=p>,</span>
<span class=s1>'__subclasshook__'</span><span class=p>,</span> <span class=s1>'__truediv__'</span><span class=p>,</span>
<span class=s1>'__trunc__'</span><span class=p>,</span> <span class=s1>'_abc_impl'</span><span class=p>,</span> <span class=s1>'_add'</span><span class=p>,</span>
<span class=s1>'_denominator'</span><span class=p>,</span> <span class=s1>'_div'</span><span class=p>,</span> <span class=s1>'_divmod'</span><span class=p>,</span>
<span class=s1>'_floordiv'</span><span class=p>,</span> <span class=s1>'_mod'</span><span class=p>,</span> <span class=s1>'_mul'</span><span class=p>,</span>
<span class=s1>'_numerator'</span><span class=p>,</span> <span class=s1>'_operator_fallbacks'</span><span class=p>,</span>
<span class=s1>'_richcmp'</span><span class=p>,</span> <span class=s1>'_sub'</span><span class=p>,</span> <span class=s1>'as_integer_ratio'</span><span class=p>,</span>
<span class=s1>'conjugate'</span><span class=p>,</span> <span class=s1>'denominator'</span><span class=p>,</span> <span class=s1>'from_decimal'</span><span class=p>,</span>
<span class=s1>'from_float'</span><span class=p>,</span> <span class=s1>'imag'</span><span class=p>,</span> <span class=s1>'limit_denominator'</span><span class=p>,</span>
<span class=s1>'numerator'</span><span class=p>,</span> <span class=s1>'real'</span><span class=p>]</span>
</code></pre></div> <p>上述就是<code>Fraction</code>实现的全部方法, 其中有一部分继承自它的父类, 下面是<code>Fraction</code>的继承关系</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>Fraction</span><span class=o>.</span><span class=vm>__mro__</span>
<span class=p>(</span>
<span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=err>'</span><span class=nc>fractions</span><span class=o>.</span><span class=n>Fraction</span><span class=s1>'&gt;,</span>
<span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=err>'</span><span class=nc>numbers</span><span class=o>.</span><span class=n>Rational</span><span class=s1>'&gt;,</span>
<span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=err>'</span><span class=nc>numbers</span><span class=o>.</span><span class=n>Real</span><span class=s1>'&gt;,</span>
<span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=err>'</span><span class=nc>numbers</span><span class=o>.</span><span class=n>Complex</span><span class=s1>'&gt;,</span>
<span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=err>'</span><span class=nc>numbers</span><span class=o>.</span><span class=n>Number</span><span class=s1>'&gt;,</span>
<span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=err>'</span><span class=nc>object</span><span class=s1>'&gt;</span>
<span class=p>)</span>
</code></pre></div> <p>另外一部分方法在<code>Fraction</code>的源代码中定义或被重载, 下面我们来逐一解读.</p> <h3 id=_16>分数的格式化输出<a class=headerlink href=#_16 title="Permanent link">¶</a></h3> <ul> <li><code>__str__</code>定义<code>str(a)</code>的返回值</li> <li><code>__repr__</code>定义<code>repr(a)</code>的返回值, 同时也是<code>print(a)</code>的输出值</li> </ul> <div class=highlight><span class=filename>源代码片段8</span><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
    <span class=k>return</span> <span class=s1>'</span><span class=si>%s</span><span class=s1>(</span><span class=si>%s</span><span class=s1>, </span><span class=si>%s</span><span class=s1>)'</span> <span class=o>%</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span>
                            <span class=bp>self</span><span class=o>.</span><span class=n>_numerator</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_denominator</span><span class=p>)</span>
<span class=k>def</span><span class=w> </span><span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_denominator</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
        <span class=k>return</span> <span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_numerator</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=s1>'</span><span class=si>%s</span><span class=s1>/</span><span class=si>%s</span><span class=s1>'</span> <span class=o>%</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_numerator</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_denominator</span><span class=p>)</span>
</code></pre></div> <p>这两个魔法方法定义了<code>Fraction</code>输出时的样子, 没什么可讲的, 举几个例子看看.</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>f</span> <span class=o>=</span> <span class=n>Fraction</span><span class=p>(</span><span class=s2>"1/3"</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>f</span>
<span class=n>Fraction</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>)</span>
<span class=mi>1</span><span class=o>/</span><span class=mi>3</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>str</span><span class=p>(</span><span class=n>f</span><span class=p>)</span>
<span class=s1>'1/3'</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>repr</span><span class=p>(</span><span class=n>f</span><span class=p>)</span>
<span class=s1>'Fraction(1, 3)'</span>
</code></pre></div> <h3 id=_17>分数的四则运算<a class=headerlink href=#_17 title="Permanent link">¶</a></h3> <div class=highlight><span class=filename>源代码片段9</span><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_operator_fallbacks</span><span class=p>(</span><span class=n>monomorphic_operator</span><span class=p>,</span> <span class=n>fallback_operator</span><span class=p>):</span>
    <span class=k>def</span><span class=w> </span><span class=nf>forward</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>b</span><span class=p>,</span> <span class=p>(</span><span class=nb>int</span><span class=p>,</span> <span class=n>Fraction</span><span class=p>)):</span>
            <span class=k>return</span> <span class=n>monomorphic_operator</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span>
        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>b</span><span class=p>,</span> <span class=nb>float</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>fallback_operator</span><span class=p>(</span><span class=nb>float</span><span class=p>(</span><span class=n>a</span><span class=p>),</span> <span class=n>b</span><span class=p>)</span>
        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>b</span><span class=p>,</span> <span class=nb>complex</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>fallback_operator</span><span class=p>(</span><span class=nb>complex</span><span class=p>(</span><span class=n>a</span><span class=p>),</span> <span class=n>b</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>NotImplemented</span>
    <span class=n>forward</span><span class=o>.</span><span class=vm>__name__</span> <span class=o>=</span> <span class=s1>'__'</span> <span class=o>+</span> <span class=n>fallback_operator</span><span class=o>.</span><span class=vm>__name__</span> <span class=o>+</span> <span class=s1>'__'</span>
    <span class=n>forward</span><span class=o>.</span><span class=vm>__doc__</span> <span class=o>=</span> <span class=n>monomorphic_operator</span><span class=o>.</span><span class=vm>__doc__</span>
    <span class=k>def</span><span class=w> </span><span class=nf>reverse</span><span class=p>(</span><span class=n>b</span><span class=p>,</span> <span class=n>a</span><span class=p>):</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>numbers</span><span class=o>.</span><span class=n>Rational</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>monomorphic_operator</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span>
        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>numbers</span><span class=o>.</span><span class=n>Real</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>fallback_operator</span><span class=p>(</span><span class=nb>float</span><span class=p>(</span><span class=n>a</span><span class=p>),</span> <span class=nb>float</span><span class=p>(</span><span class=n>b</span><span class=p>))</span>
        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>numbers</span><span class=o>.</span><span class=n>Complex</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>fallback_operator</span><span class=p>(</span><span class=nb>complex</span><span class=p>(</span><span class=n>a</span><span class=p>),</span> <span class=nb>complex</span><span class=p>(</span><span class=n>b</span><span class=p>))</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>NotImplemented</span>
    <span class=n>reverse</span><span class=o>.</span><span class=vm>__name__</span> <span class=o>=</span> <span class=s1>'__r'</span> <span class=o>+</span> <span class=n>fallback_operator</span><span class=o>.</span><span class=vm>__name__</span> <span class=o>+</span> <span class=s1>'__'</span>
    <span class=n>reverse</span><span class=o>.</span><span class=vm>__doc__</span> <span class=o>=</span> <span class=n>monomorphic_operator</span><span class=o>.</span><span class=vm>__doc__</span>
    <span class=k>return</span> <span class=n>forward</span><span class=p>,</span> <span class=n>reverse</span>
</code></pre></div> <p>注意这个方法一<code>单下划线</code>开头, 说明这是一个私有方法, 不对外开放. (或者说是这是为了方便程序内部实现一些功能的, 在外部使用没有实际意义)</p> <p>这个方法的功能就是同时实现<code>双侧运算</code>.</p> <p>举个例子来说, 我们想要同时定义左侧加法和右侧加法, 也就是<code>a+f</code>和<code>f+a</code>. 其中f就是我们<code>Fraction</code>类的实例, a是<code>[int,float, complex, Fraction]</code>中的一个.</p> <p>一个方案是写两个方法<code>__add__</code>和<code>__radd__</code>, 但是这样有点呆, 因为两个函数的内容想必几乎一致, 并且可以想象后续其他的运算也是如此. 于是源码中写了一个函数来同时生成两个函数.</p> <p>它输入<code>monomorphic_operator</code>(左侧运算符),和<code>fallback_operator</code>(右侧运算符), 返回两个函数.</p> <p>例如</p> <div class=highlight><pre><span></span><code><span class=fm>__add__</span><span class=p>,</span> <span class=fm>__radd__</span> <span class=o>=</span> <span class=n>_operator_fallbacks</span><span class=p>(</span><span class=n>_add</span><span class=p>,</span> <span class=n>operator</span><span class=o>.</span><span class=n>add</span><span class=p>)</span>
</code></pre></div> <p>其中<code>_add</code>是我们定义好的<code>f+a</code>的函数.</p> <p>内部的逻辑就是, 左侧加法定义为</p> <ul> <li><code>f+a = f__add__(a) = forward(f, a)</code></li> <li><code>forward(f,a)</code>仅当a也是分数类型的时候, 返回<code>_add(f,a)</code></li> <li>其他情况, 把f转化为a的类型, 然后再相加.</li> </ul> <p>右侧加法定义为</p> <ul> <li><code>a+f = f__radd__(a) = reverse(a, f)</code>.</li> <li><code>reverse(a,f)</code>仅当a也是分数类型的时候, 返回<code>_add(f,a)</code></li> <li>其他情况, 把f转化为a的类型,然后再相加.</li> </ul> <blockquote> <p>说实话, 我觉得这种写法非常的麻烦!!!<br> 我宁可手动实现<code>__add__</code>和<code>__radd__</code>两个方法也不写这么迷惑的方法.</p> </blockquote> <h4 id=_18>加减法<a class=headerlink href=#_18 title="Permanent link">¶</a></h4> <ul> <li><code>__add__</code>定义左侧加法</li> <li><code>__sub__</code>定义左侧减法</li> <li><code>__radd__</code>定义右侧加法</li> <li><code>__rsub__</code>定义右侧减法</li> </ul> <div class=highlight><span class=filename>源代码片段10--加减</span><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_add</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
    <span class=n>na</span><span class=p>,</span> <span class=n>da</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=n>numerator</span><span class=p>,</span> <span class=n>a</span><span class=o>.</span><span class=n>denominator</span>
    <span class=n>nb</span><span class=p>,</span> <span class=n>db</span> <span class=o>=</span> <span class=n>b</span><span class=o>.</span><span class=n>numerator</span><span class=p>,</span> <span class=n>b</span><span class=o>.</span><span class=n>denominator</span>
    <span class=n>g</span> <span class=o>=</span> <span class=n>math</span><span class=o>.</span><span class=n>gcd</span><span class=p>(</span><span class=n>da</span><span class=p>,</span> <span class=n>db</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>g</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>Fraction</span><span class=p>(</span><span class=n>na</span> <span class=o>*</span> <span class=n>db</span> <span class=o>+</span> <span class=n>da</span> <span class=o>*</span> <span class=n>nb</span><span class=p>,</span> <span class=n>da</span> <span class=o>*</span> <span class=n>db</span><span class=p>,</span> <span class=n>_normalize</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
    <span class=n>s</span> <span class=o>=</span> <span class=n>da</span> <span class=o>//</span> <span class=n>g</span>
    <span class=n>t</span> <span class=o>=</span> <span class=n>na</span> <span class=o>*</span> <span class=p>(</span><span class=n>db</span> <span class=o>//</span> <span class=n>g</span><span class=p>)</span> <span class=o>+</span> <span class=n>nb</span> <span class=o>*</span> <span class=n>s</span>
    <span class=n>g2</span> <span class=o>=</span> <span class=n>math</span><span class=o>.</span><span class=n>gcd</span><span class=p>(</span><span class=n>t</span><span class=p>,</span> <span class=n>g</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>g2</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>Fraction</span><span class=p>(</span><span class=n>t</span><span class=p>,</span> <span class=n>s</span> <span class=o>*</span> <span class=n>db</span><span class=p>,</span> <span class=n>_normalize</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>Fraction</span><span class=p>(</span><span class=n>t</span> <span class=o>//</span> <span class=n>g2</span><span class=p>,</span> <span class=n>s</span> <span class=o>*</span> <span class=p>(</span><span class=n>db</span> <span class=o>//</span> <span class=n>g2</span><span class=p>),</span> <span class=n>_normalize</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<span class=fm>__add__</span><span class=p>,</span> <span class=fm>__radd__</span> <span class=o>=</span> <span class=n>_operator_fallbacks</span><span class=p>(</span><span class=n>_add</span><span class=p>,</span> <span class=n>operator</span><span class=o>.</span><span class=n>add</span><span class=p>)</span>

<span class=k>def</span><span class=w> </span><span class=nf>_sub</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
    <span class=o>...</span>
<span class=fm>__sub__</span><span class=p>,</span> <span class=fm>__rsub__</span> <span class=o>=</span> <span class=n>_operator_fallbacks</span><span class=p>(</span><span class=n>_sub</span><span class=p>,</span> <span class=n>operator</span><span class=o>.</span><span class=n>sub</span><span class=p>)</span>
</code></pre></div> <p>上面是加法的运算方法 $$ \frac{n_a}{d_a}+\frac{n_b}{d_b}=\frac{n_ad_b+n_bd_a}{d_ad_b} $$ 算法还进行了约分, 细节就不说了, 一看便知. 下面用同样的方法可以定义减法.</p> <blockquote> <p>另外一个让我匪夷所思的就是<code>a-b=a+(-b)</code>这种trick为什么不用, 有必要把几乎完全一样的算法重复写一次吗? 我在此大放厥词, 如果让我来写必然比这简洁的多!</p> </blockquote> <h4 id=_19>乘除法<a class=headerlink href=#_19 title="Permanent link">¶</a></h4> <ul> <li><code>__mul__</code>定义左侧乘法</li> <li><code>__truediv__</code>定义左侧除法</li> <li><code>__rmul__</code>定义右侧乘法</li> <li><code>__rtruediv__</code>定义右侧除法</li> </ul> <div class=highlight><span class=filename>源代码片段11--乘除</span><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_mul</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
    <span class=n>na</span><span class=p>,</span> <span class=n>da</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=n>numerator</span><span class=p>,</span> <span class=n>a</span><span class=o>.</span><span class=n>denominator</span>
    <span class=n>nb</span><span class=p>,</span> <span class=n>db</span> <span class=o>=</span> <span class=n>b</span><span class=o>.</span><span class=n>numerator</span><span class=p>,</span> <span class=n>b</span><span class=o>.</span><span class=n>denominator</span>
    <span class=n>g1</span> <span class=o>=</span> <span class=n>math</span><span class=o>.</span><span class=n>gcd</span><span class=p>(</span><span class=n>na</span><span class=p>,</span> <span class=n>db</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>g1</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
        <span class=n>na</span> <span class=o>//=</span> <span class=n>g1</span>
        <span class=n>db</span> <span class=o>//=</span> <span class=n>g1</span>
    <span class=n>g2</span> <span class=o>=</span> <span class=n>math</span><span class=o>.</span><span class=n>gcd</span><span class=p>(</span><span class=n>nb</span><span class=p>,</span> <span class=n>da</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>g2</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
        <span class=n>nb</span> <span class=o>//=</span> <span class=n>g2</span>
        <span class=n>da</span> <span class=o>//=</span> <span class=n>g2</span>
    <span class=k>return</span> <span class=n>Fraction</span><span class=p>(</span><span class=n>na</span> <span class=o>*</span> <span class=n>nb</span><span class=p>,</span> <span class=n>db</span> <span class=o>*</span> <span class=n>da</span><span class=p>,</span> <span class=n>_normalize</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<span class=fm>__mul__</span><span class=p>,</span> <span class=fm>__rmul__</span> <span class=o>=</span> <span class=n>_operator_fallbacks</span><span class=p>(</span><span class=n>_mul</span><span class=p>,</span> <span class=n>operator</span><span class=o>.</span><span class=n>mul</span><span class=p>)</span>

<span class=k>def</span><span class=w> </span><span class=nf>_div</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
    <span class=o>...</span>
<span class=fm>__truediv__</span><span class=p>,</span> <span class=fm>__rtruediv__</span> <span class=o>=</span> <span class=n>_operator_fallbacks</span><span class=p>(</span><span class=n>_div</span><span class=p>,</span> <span class=n>operator</span><span class=o>.</span><span class=n>truediv</span><span class=p>)</span>
</code></pre></div> <p>这也没什么好说的, 分数的乘除法非常简单.</p> <h4 id=_20>模余运算<a class=headerlink href=#_20 title="Permanent link">¶</a></h4> <ul> <li><code>__floordiv__</code>定义左侧地板除</li> <li><code>__rfloordiv__</code>定义右侧地板除</li> <li><code>__divmod__</code>定义<code>divmod(f,a)</code>的返回值</li> <li><code>__rdivmod__</code>定义<code>divmod(a,f)</code>的返回值</li> <li><code>__mod__</code>定义左侧模运算</li> <li><code>__rmod__</code>定义右侧模运算</li> </ul> <div class=highlight><span class=filename>源代码片段12--模余运算</span><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_floordiv</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
    <span class=k>return</span> <span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>numerator</span> <span class=o>*</span> <span class=n>b</span><span class=o>.</span><span class=n>denominator</span><span class=p>)</span> <span class=o>//</span> <span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>denominator</span> <span class=o>*</span> <span class=n>b</span><span class=o>.</span><span class=n>numerator</span><span class=p>)</span>
<span class=fm>__floordiv__</span><span class=p>,</span> <span class=fm>__rfloordiv__</span> <span class=o>=</span> <span class=n>_operator_fallbacks</span><span class=p>(</span><span class=n>_floordiv</span><span class=p>,</span> <span class=n>operator</span><span class=o>.</span><span class=n>floordiv</span><span class=p>)</span>

<span class=k>def</span><span class=w> </span><span class=nf>_divmod</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
    <span class=n>da</span><span class=p>,</span> <span class=n>db</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=n>denominator</span><span class=p>,</span> <span class=n>b</span><span class=o>.</span><span class=n>denominator</span>
    <span class=n>div</span><span class=p>,</span> <span class=n>n_mod</span> <span class=o>=</span> <span class=nb>divmod</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>numerator</span> <span class=o>*</span> <span class=n>db</span><span class=p>,</span> <span class=n>da</span> <span class=o>*</span> <span class=n>b</span><span class=o>.</span><span class=n>numerator</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>div</span><span class=p>,</span> <span class=n>Fraction</span><span class=p>(</span><span class=n>n_mod</span><span class=p>,</span> <span class=n>da</span> <span class=o>*</span> <span class=n>db</span><span class=p>)</span>
<span class=fm>__divmod__</span><span class=p>,</span> <span class=fm>__rdivmod__</span> <span class=o>=</span> <span class=n>_operator_fallbacks</span><span class=p>(</span><span class=n>_divmod</span><span class=p>,</span> <span class=nb>divmod</span><span class=p>)</span>

<span class=k>def</span><span class=w> </span><span class=nf>_mod</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
<span class=w>    </span><span class=sd>"""a % b"""</span>
    <span class=n>da</span><span class=p>,</span> <span class=n>db</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=n>denominator</span><span class=p>,</span> <span class=n>b</span><span class=o>.</span><span class=n>denominator</span>
    <span class=k>return</span> <span class=n>Fraction</span><span class=p>((</span><span class=n>a</span><span class=o>.</span><span class=n>numerator</span> <span class=o>*</span> <span class=n>db</span><span class=p>)</span> <span class=o>%</span> <span class=p>(</span><span class=n>b</span><span class=o>.</span><span class=n>numerator</span> <span class=o>*</span> <span class=n>da</span><span class=p>),</span> <span class=n>da</span> <span class=o>*</span> <span class=n>db</span><span class=p>)</span>
<span class=fm>__mod__</span><span class=p>,</span> <span class=fm>__rmod__</span> <span class=o>=</span> <span class=n>_operator_fallbacks</span><span class=p>(</span><span class=n>_mod</span><span class=p>,</span> <span class=n>operator</span><span class=o>.</span><span class=n>mod</span><span class=p>)</span>
</code></pre></div> <p>这几个运算也比较简单，值得一提的是<code>__divmod__</code>, 它定义了<code>divmod()</code>的返回值, 也就是需要返回一个<code>tuple</code>, 包括商和余数.</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>help</span><span class=p>(</span><span class=nb>divmod</span><span class=p>)</span>
<span class=n>Help</span> <span class=n>on</span> <span class=n>built</span><span class=o>-</span><span class=ow>in</span> <span class=n>function</span> <span class=nb>divmod</span> <span class=ow>in</span> <span class=n>module</span> <span class=n>builtins</span><span class=p>:</span>

<span class=nb>divmod</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=o>/</span><span class=p>)</span>
    <span class=n>Return</span> <span class=n>the</span> <span class=nb>tuple</span> <span class=p>(</span><span class=n>x</span><span class=o>//</span><span class=n>y</span><span class=p>,</span> <span class=n>x</span><span class=o>%</span><span class=n>y</span><span class=p>)</span><span class=o>.</span>  <span class=n>Invariant</span><span class=p>:</span> <span class=n>div</span><span class=o>*</span><span class=n>y</span> <span class=o>+</span> <span class=n>mod</span> <span class=o>==</span> <span class=n>x</span><span class=o>.</span>
</code></pre></div> <h4 id=_21>其他运算<a class=headerlink href=#_21 title="Permanent link">¶</a></h4> <ul> <li><code>__pow__</code>定义<code>f**a</code></li> <li><code>__rpow__</code>定义<code>a**f</code></li> <li><code>__pos__</code>定义<code>+f</code></li> <li><code>__neg__</code>定义<code>-f</code></li> <li><code>__abs__</code>定义<code>abs(f)</code></li> <li><code>__round__</code>定义<code>round(f,n)</code></li> </ul> <div class=highlight><span class=filename>源代码片段13</span><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=fm>__pow__</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
    <span class=o>...</span>

<span class=k>def</span><span class=w> </span><span class=fm>__rpow__</span><span class=p>(</span><span class=n>b</span><span class=p>,</span> <span class=n>a</span><span class=p>):</span>
    <span class=o>...</span>
<span class=k>def</span><span class=w> </span><span class=fm>__pos__</span><span class=p>(</span><span class=n>a</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>Fraction</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>_numerator</span><span class=p>,</span> <span class=n>a</span><span class=o>.</span><span class=n>_denominator</span><span class=p>,</span> <span class=n>_normalize</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>

<span class=k>def</span><span class=w> </span><span class=fm>__neg__</span><span class=p>(</span><span class=n>a</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>Fraction</span><span class=p>(</span><span class=o>-</span><span class=n>a</span><span class=o>.</span><span class=n>_numerator</span><span class=p>,</span> <span class=n>a</span><span class=o>.</span><span class=n>_denominator</span><span class=p>,</span> <span class=n>_normalize</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>

<span class=k>def</span><span class=w> </span><span class=fm>__abs__</span><span class=p>(</span><span class=n>a</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>Fraction</span><span class=p>(</span><span class=nb>abs</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>_numerator</span><span class=p>),</span> <span class=n>a</span><span class=o>.</span><span class=n>_denominator</span><span class=p>,</span> <span class=n>_normalize</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<span class=k>def</span><span class=w> </span><span class=nf>__trunc__</span><span class=p>(</span><span class=n>a</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>a</span><span class=o>.</span><span class=n>_numerator</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
        <span class=k>return</span> <span class=o>-</span><span class=p>(</span><span class=o>-</span><span class=n>a</span><span class=o>.</span><span class=n>_numerator</span> <span class=o>//</span> <span class=n>a</span><span class=o>.</span><span class=n>_denominator</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>a</span><span class=o>.</span><span class=n>_numerator</span> <span class=o>//</span> <span class=n>a</span><span class=o>.</span><span class=n>_denominator</span>

<span class=k>def</span><span class=w> </span><span class=nf>__floor__</span><span class=p>(</span><span class=n>a</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>a</span><span class=o>.</span><span class=n>numerator</span> <span class=o>//</span> <span class=n>a</span><span class=o>.</span><span class=n>denominator</span>

<span class=k>def</span><span class=w> </span><span class=nf>__ceil__</span><span class=p>(</span><span class=n>a</span><span class=p>):</span>
    <span class=k>return</span> <span class=o>-</span><span class=p>(</span><span class=o>-</span><span class=n>a</span><span class=o>.</span><span class=n>numerator</span> <span class=o>//</span> <span class=n>a</span><span class=o>.</span><span class=n>denominator</span><span class=p>)</span>
<span class=k>def</span><span class=w> </span><span class=fm>__round__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>ndigits</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
    <span class=o>...</span>
</code></pre></div> <p>乘方具体怎么算还是略去.</p> <p>值得一提的是</p> <ul> <li><code>__trunc__</code>定义<code>math.trunc(f)</code>的返回值</li> <li><code>__floor__</code>定义<code>math.floor(f)</code>的返回值</li> <li><code>__ceil__</code>定义<code>math.ceil(f)</code>的返回值</li> </ul> <p>以上都是为了支持内置<code>math</code>库中函数的运算.</p> <h4 id=hash>hash运算<a class=headerlink href=#hash title="Permanent link">¶</a></h4> <div class=highlight><span class=filename>源代码片段14--hash函数</span><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=fm>__hash__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>dinv</span> <span class=o>=</span> <span class=nb>pow</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_denominator</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=n>_PyHASH_MODULUS</span><span class=p>)</span>
    <span class=k>except</span> <span class=ne>ValueError</span><span class=p>:</span>
        <span class=n>hash_</span> <span class=o>=</span> <span class=n>_PyHASH_INF</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>hash_</span> <span class=o>=</span> <span class=nb>hash</span><span class=p>(</span><span class=nb>hash</span><span class=p>(</span><span class=nb>abs</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_numerator</span><span class=p>))</span> <span class=o>*</span> <span class=n>dinv</span><span class=p>)</span>
    <span class=n>result</span> <span class=o>=</span> <span class=n>hash_</span> <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_numerator</span> <span class=o>&gt;=</span> <span class=mi>0</span> <span class=k>else</span> <span class=o>-</span><span class=n>hash_</span>
    <span class=k>return</span> <span class=o>-</span><span class=mi>2</span> <span class=k>if</span> <span class=n>result</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span> <span class=k>else</span> <span class=n>result</span>
</code></pre></div> <p>这个方法很重要, 定义了<code>__hash__</code>的类称为<code>hashable</code>, 这样一来就可以作为字典的key等, 具有一些优良的性质. 具体hash值怎么算的, 我也看不懂. 知道这么件事情就行了.</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>f</span> <span class=o>=</span> <span class=n>Fraction</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>hash</span><span class=p>(</span><span class=n>f</span><span class=p>)</span>
<span class=mi>1152921504606846976</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>d</span> <span class=o>=</span> <span class=p>{</span><span class=n>f</span><span class=p>:</span><span class=mf>0.5</span><span class=p>}</span> <span class=c1># 作为字典的key</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>d</span>
<span class=p>{</span><span class=n>Fraction</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>):</span> <span class=mf>0.5</span><span class=p>}</span>
</code></pre></div> <h4 id=_22>逻辑运算<a class=headerlink href=#_22 title="Permanent link">¶</a></h4> <div class=highlight><span class=filename>源代码片段15--逻辑运算</span><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_richcmp</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>,</span> <span class=n>op</span><span class=p>):</span>
    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>other</span><span class=p>,</span> <span class=n>numbers</span><span class=o>.</span><span class=n>Rational</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>op</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_numerator</span> <span class=o>*</span> <span class=n>other</span><span class=o>.</span><span class=n>denominator</span><span class=p>,</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>_denominator</span> <span class=o>*</span> <span class=n>other</span><span class=o>.</span><span class=n>numerator</span><span class=p>)</span>
    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>other</span><span class=p>,</span> <span class=nb>float</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>math</span><span class=o>.</span><span class=n>isnan</span><span class=p>(</span><span class=n>other</span><span class=p>)</span> <span class=ow>or</span> <span class=n>math</span><span class=o>.</span><span class=n>isinf</span><span class=p>(</span><span class=n>other</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>op</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>other</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>op</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>from_float</span><span class=p>(</span><span class=n>other</span><span class=p>))</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>NotImplemented</span>
<span class=k>def</span><span class=w> </span><span class=fm>__lt__</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>a</span><span class=o>.</span><span class=n>_richcmp</span><span class=p>(</span><span class=n>b</span><span class=p>,</span> <span class=n>operator</span><span class=o>.</span><span class=n>lt</span><span class=p>)</span>
<span class=k>def</span><span class=w> </span><span class=fm>__gt__</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>a</span><span class=o>.</span><span class=n>_richcmp</span><span class=p>(</span><span class=n>b</span><span class=p>,</span> <span class=n>operator</span><span class=o>.</span><span class=n>gt</span><span class=p>)</span>
<span class=k>def</span><span class=w> </span><span class=fm>__le__</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>a</span><span class=o>.</span><span class=n>_richcmp</span><span class=p>(</span><span class=n>b</span><span class=p>,</span> <span class=n>operator</span><span class=o>.</span><span class=n>le</span><span class=p>)</span>
<span class=k>def</span><span class=w> </span><span class=fm>__ge__</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>a</span><span class=o>.</span><span class=n>_richcmp</span><span class=p>(</span><span class=n>b</span><span class=p>,</span> <span class=n>operator</span><span class=o>.</span><span class=n>ge</span><span class=p>)</span>
<span class=k>def</span><span class=w> </span><span class=fm>__bool__</span><span class=p>(</span><span class=n>a</span><span class=p>):</span>
    <span class=k>return</span> <span class=nb>bool</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>_numerator</span><span class=p>)</span>
</code></pre></div> <p>和之间的四则运算类似, 这里也采用了一种顶层设计的方法. <code>_richcmp</code>是一个通用的逻辑运算方法</p> <ul> <li>如果与之比较的是一个小数类型, 那么通分之后看比较分子.</li> <li>如果与之比较的是一个浮点<ul> <li>若为inf或nan, 则返回0和该值比较的结果.</li> <li>否则转化为小数类型, 进入第一种情况比较.</li> </ul> </li> </ul> <p>最后一个<code>__bool__</code>方法返回分母的布尔值, 它定义了一个分数的布尔值<code>bool(f)</code>.</p> <h4 id=_23>序列化<a class=headerlink href=#_23 title="Permanent link">¶</a></h4> <div class=highlight><span class=filename>源代码片段16</span><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>__reduce__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
    <span class=k>return</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=p>,</span> <span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=p>),))</span>
</code></pre></div> <p>这个方法比较特殊, 他和python对象序列化相关. 这个我懂得不多, 感兴趣可以参见</p> <blockquote> <p><a href=https://docs.python.org/zh-cn/3/library/pickle.html target=_blank>pickle</a> --- Python 对象序列化</p> </blockquote> <p>以及一个论坛问答</p> <blockquote> <p><a href=https://stackoverflow.com/questions/19855156/whats-the-exact-usage-of-reduce-in-pickler target=_blank>What's the exact usage of <code>__reduce__</code> in Pickler</a></p> </blockquote> <h4 id=_24>拷贝<a class=headerlink href=#_24 title="Permanent link">¶</a></h4> <div class=highlight><span class=filename>源代码片段17</span><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>__copy__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
    <span class=k>if</span> <span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>==</span> <span class=n>Fraction</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_numerator</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_denominator</span><span class=p>)</span>

<span class=k>def</span><span class=w> </span><span class=nf>__deepcopy__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>memo</span><span class=p>):</span>
    <span class=k>if</span> <span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>==</span> <span class=n>Fraction</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_numerator</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_denominator</span><span class=p>)</span>
</code></pre></div> <p>这两个方法</p> <ul> <li><code>__copy__</code>定义<code>copy.copy(f)</code></li> <li><code>__deepcopy__</code>定义<code>copy.deepcopy(f)</code></li> </ul> <p>这是为了支持内置库<code>copy</code>中的深浅拷贝函数.</p> <h2 id=_25>结语<a class=headerlink href=#_25 title="Permanent link">¶</a></h2> <p>至此, <code>Fraction</code>的源代码就看完了, 除了些许的高级内容(pickle序列化, hash算法等), 大体内容都提到了.</p> <p>不得不说, 就算是实现这样一个精简的小库, 也是十分需要耐心的</p> <p><s>还需要一点数学, 比如连分数</s></p> <p>看完整个代码之后学到了很多OOP的知识, 也更加佩服那些开发奇奇怪怪库的大佬们了, python这一胶水语言就是因为有了这些倾注心血的开发者们才焕发生机!!</p> <p>希望有朝一日我也能写一个小模块, 为这个社区做一些贡献!</p></div> <!-- Source file information --> <hr> <div class=md-source-file> <small> <!-- 优先使用meta信息 --> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2025-03-25 15:50:33</span> <br> Created: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2025-03-25 15:50:33</span> </small> </div> <!-- Was this page helpful? --> <form class=md-feedback hidden name=feedback> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" data-md-value=1 title="This page was helpful" type=submit> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"></path></svg> </button> <button class="md-feedback__icon md-icon" data-md-value=0 title="This page could be improved" type=submit> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"></path></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help me improve this page by using the <a href="https://github.com/AIboy996/AIboy996.GitHub.io/issues/new/?title=[Feedback]+fractions+-+/en/Python/StandardLibrary/fractions/" rel=noopener target=_blank>feedback form</a>. </div> </div> </div> </fieldset> </form> <!-- Comment system --> <h2 id=__comments>Comments</h2> <script async crossorigin=anonymous data-category=Announcements data-category-id=DIC_kwDOFgFkxM4CT4vh data-emit-metadata=1 data-input-position=top data-lang=zh-CN data-loading=lazy data-mapping=pathname data-reactions-enabled=0 data-repo=AIboy996/AIboy996.GitHub.io data-repo-id="MDEwOlJlcG9zaXRvcnkzNjkxOTAwODQ=" data-strict=1 data-theme=noborder_light src=https://giscus.app/client.js>
</script> <!-- Alert --> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> <a href=https://github.com/AIboy996/AIboy996.GitHub.io/blob/main/LICENSE>© 2022-2025 Yang Zhang</a><br><a href="https://icp.gov.moe/?keyword=20251021" target=_blank>萌ICP备20251021号</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a> </div> <div class=md-social> <a class=md-social__link href=mailto:mail@yangzhang.site rel=noopener target=_blank title=邮件> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Z"></path></svg> </a> <a class=md-social__link href=https://github.com/AIboy996 rel=noopener target=_blank title="GitHub | AIboy996"> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </a> <a class=md-social__link href=https://space.bilibili.com/85735334 rel=noopener target=_blank title="BiliBili | 豆汁泡纳豆"> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0s16.1 2.868 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0c8.8 0 16.1 2.868 21.9 8.603 5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1zm-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8 6.3-6.5 9.7-14.3 10.1-23.5V173.8zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5-9.6 0-17.5-3.2-23.6-9.5-6.1-6.3-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2 6.3-6.3 13.2-9.6 23.3-10 9.2.4 17 3.7 23.3 10zm191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.1 6.3-14 9.5-23.6 9.5-9.6 0-17.4-3.2-23.6-9.5-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2 6.3-6.3 14.1-9.6 23.3-10 9.2.4 17 3.7 23.3 10z"></path></svg> </a> <a class=md-social__link href=https://bangumi.tv/anime/list/759154/do rel=noopener target=_blank title=bangumi追番列表> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M152.1 38.2c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 113c-9.3-9.4-9.3-24.6 0-34s24.6-9.4 33.9 0L63 101.1l55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zm0 160c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 273c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0L63 261.2l55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zM224 96c0-17.7 14.3-32 32-32h224c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32zm0 160c0-17.7 14.3-32 32-32h224c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32zm-64 160c0-17.7 14.3-32 32-32h288c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-17.7 0-32-14.3-32-32zM48 368a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"></path></svg> </a> <a class=md-social__link href=https://aiboy996.github.io/dzd/ rel=noopener target=_blank title=高中数学典中典> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12.42 5.29c-1.1-.1-2.07.71-2.17 1.82L10 10h2.82v2h-3l-.44 5.07A4.001 4.001 0 0 1 2 18.83l1.5-1.5c.33 1.05 1.46 1.64 2.5 1.3.78-.24 1.33-.93 1.4-1.74L7.82 12h-3v-2H8l.27-3.07a4.01 4.01 0 0 1 4.33-3.65c1.26.11 2.4.81 3.06 1.89l-1.5 1.5c-.25-.77-.93-1.31-1.74-1.38M22 13.65l-1.41-1.41-2.83 2.83-2.83-2.83-1.43 1.41 2.85 2.85-2.85 2.81 1.43 1.41 2.83-2.83 2.83 2.83L22 19.31l-2.83-2.81L22 13.65Z"></path></svg> </a> <a class=md-social__link href=https://plex.yangz.site rel=noopener target=_blank title=Plex实况> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M4 2c-1.11 0-2 .89-2 2v16c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V4c0-1.11-.89-2-2-2H4m4.56 4h3.5l3.44 6-3.44 6h-3.5L12 12 8.56 6Z"></path></svg> </a> <a class=md-social__link href=https://whisper.yangz.site rel=noopener target=_blank title=微博客> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 0C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v80c0 6.1 3.4 11.6 8.8 14.3s11.9 2.1 16.8-1.5L309.3 416H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64z"></path></svg> </a> <a class=md-social__link href=https://yangzhang.site/feed_rss_created.xml rel=noopener target=_blank title=RSS> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 64c0-17.7 14.3-32 32-32 229.8 0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7 0 64zm0 352a64 64 0 1 1 128 0 64 64 0 1 1-128 0zm32-256c159.1 0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7 0-32-14.3-32-32s14.3-32 32-32z"></path></svg> </a> <a class=md-social__link href=https://www.travellings.cn/go.html rel=noopener target=_blank title=开往> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v256c0 48 35.2 87.7 81.1 94.9l-46 46c-7 7-2 19.1 7.9 19.1h39.7c8.5 0 16.6-3.4 22.6-9.4L160 448h128l54.6 54.6c6 6 14.1 9.4 22.6 9.4H405c10 0 15-12.1 7.9-19.1l-46-46c46-7.1 81.1-46.9 81.1-94.9V96c0-53-43-96-96-96H96zM64 128c0-17.7 14.3-32 32-32h80c17.7 0 32 14.3 32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32v-96zm208-32h80c17.7 0 32 14.3 32 32v96c0 17.7-14.3 32-32 32h-80c-17.7 0-32-14.3-32-32v-96c0-17.7 14.3-32 32-32zM64 352a32 32 0 1 1 64 0 32 32 0 1 1-64 0zm288-32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.tabs", "navigation.indexes", "content.code.copy", "content.code.annotate"], "search": "../../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../../assets/javascripts/bundle.cd18aaf1.min.js></script> <script src=../../../../assets/javascripts/color.js></script> <script src=../../../../assets/javascripts/termynal.js></script> <script src=../../../../assets/javascripts/gen_termynal.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>